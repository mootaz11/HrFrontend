!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("simple-angular-calendar",["exports","@angular/core","@angular/forms","@angular/platform-browser"],e):e(t["simple-angular-calendar"]={},t.ng.core,t.ng.forms,t.ng.platformBrowser)}(this,function(t,e,n,a){"use strict";var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};f[f.Sunday]="Sunday",f[f.Monday]="Monday",f[f.Tuesday]="Tuesday",f[f.Wednesday]="Wednesday",f[f.Thursday]="Thursday",f[f.Friday]="Friday",f[f.Saturday]="Saturday";var p=function(){function n(){}return n.addDays=function(t,e){var n=new Date(t.valueOf());return n.setDate(n.getDate()+e),n},n.substractDays=function(t,e){return n.addDays(t,-e)},n.addMonths=function(t,e){var n=new Date(t.valueOf());return n.setMonth(t.getMonth()+e),n},n.substractMonths=function(t,e){var n=new Date(t.valueOf());return n.setMonth(t.getMonth()-e),n},n.getFirstDayOfMonth=function(t){var e=new Date;return e.setFullYear(t.getFullYear(),t.getMonth(),1),e},n.getLastDayOfMonth=function(t){var e=new Date;return e.setFullYear(t.getFullYear(),t.getMonth()+1,0),e},n}(),o=function(){function t(t){this.date=t,this.WEEKS_PER_MONTH=5,this.DAYS_PER_WEEK=7}return t.prototype.createView=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=f.Monday);var n=this.createGrid(this.date,e);if(t){if(!n[0][0])for(var a=p.substractMonths(this.date,1),o=p.getLastDayOfMonth(a).getDate(),r=p.getFirstDayOfMonth(this.date).getDay()-e.valueOf(),i=0;i<r;i++){var s=o-(r-(i+1)),l=new Date(a.getFullYear(),a.getMonth(),s);n[0][i]={isToday:!1,isSelected:!1,day:s,date:l}}for(var d=1,c=0;c<this.WEEKS_PER_MONTH;c++)for(var h=0;h<this.DAYS_PER_WEEK;h++)if(!n[c][h]){var u=new Date(this.date.getFullYear(),this.date.getMonth(),d++);n[c][h]={isToday:!1,isSelected:!1,day:d,date:u}}}return n},t.prototype.createGrid=function(t,e){void 0===e&&(e=f.Monday);for(var n=this.initGrid(),a=p.getFirstDayOfMonth(t).getDay()-e.valueOf(),o=p.getLastDayOfMonth(t).getDate(),r=new Date,i=a,s=1,l=0;l<this.WEEKS_PER_MONTH;l++){for(;i<this.DAYS_PER_WEEK&&s<=o;i++){var d=r.getFullYear()===this.date.getFullYear(),c=r.getMonth()===this.date.getMonth(),h=r.getDate()===s,u=new Date(this.date.getFullYear(),this.date.getMonth(),s);n[l][i]={isToday:d&&c&&h,isSelected:this.date.getDate()===s,day:s,date:u},s++}i=0}return n},t.prototype.initGrid=function(){var t=undefined;return[new Array(this.DAYS_PER_WEEK).fill(t),new Array(this.DAYS_PER_WEEK).fill(t),new Array(this.DAYS_PER_WEEK).fill(t),new Array(this.DAYS_PER_WEEK).fill(t),new Array(this.DAYS_PER_WEEK).fill(t)]},t}(),r=function(){function t(){}return t.decorators=[{type:e.Directive,args:[{selector:"[scDayTemplate]"}]}],t.ctorParameters=function(){return[]},t}(),i=function(){function t(){}return t.decorators=[{type:e.Directive,args:[{selector:"[scDayOfWeekCaptionTemplate]"}]}],t.ctorParameters=function(){return[]},t}(),s=function(){function t(){}return t.decorators=[{type:e.Directive,args:[{selector:"[scMonthCaptionTemplate]"}]}],t.ctorParameters=function(){return[]},t}();function d(e){return function(t){return function s(t,e){for(var n=l.length,a=e.valueOf(),o=new Array(n).fill(0),r=0;r<n;r++){var i=(r+a)%n;o[r]=t[i]}return o}(l.map(function(t){return function e(t){return t.substr(0,1).toUpperCase()+t.substr(1,1).toLowerCase()}(t)}),e)[t.valueOf()]}}var c={provide:n.NG_VALUE_ACCESSOR,useExisting:e.forwardRef(function(){return h}),multi:!0},h=function(){function t(){this.change=new e.EventEmitter,this.monthClick=new e.EventEmitter,this.disabled=!1,this._value=new Date,this._grow={mode:"stretch"},this.defaultFirstDayOfWeek=f.Sunday,this.defaultDayOfWeekCaptionFormatter=d(this.defaultFirstDayOfWeek),this._firstDayOfWeek=this.defaultFirstDayOfWeek,this.monthClass="sc-month",this.disabledClass="sc-month--disabled",this.monthCaptionClass="sc-month__caption",this.dayOfWeekCaptionClass="sc-month__week-caption",this.dayCaptionClass="sc-month__day",this.currentDayClass="sc-month__day--today",this.disabledDayClass="sc-month__day--disabled",this.selectedDayClass="sc-month__day--selected",this.defaultMonthCaptionFormatter=function(t){return t.toDateString()},this.defaultDayFormatter=function(t){return t?t.day.toString():""},this.onChange=function(t){},this.onTouched=function(){}}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this.writeValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grow",{get:function(){return this._grow},set:function(t){this._grow=t||{mode:"stretch"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstDayOfWeek",{get:function(){return this._firstDayOfWeek},set:function(t){this._firstDayOfWeek=t,this.defaultDayOfWeekCaptionFormatter=d(this._firstDayOfWeek),this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayFormatter",{get:function(){return this._dayFormatter},set:function(t){this._dayFormatter=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayOfWeekCaptionFormatter",{get:function(){return this._dayOfWeekCaptionFormatter},set:function(t){this._dayOfWeekCaptionFormatter=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monthCaptionFormatter",{get:function(){return this._monthCaptionFormatter},set:function(t){this._monthCaptionFormatter=t,this.refresh()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.refresh()},t.prototype.writeValue=function(t){t&&(this._value=t,this.refresh(),this.onChange(t))},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.refresh=function(){this.refreshMonthCaption(this.value),this.refreshDayOfWeekCaptions(),this.refreshView(this.value)},t.prototype.refreshMonthCaption=function(t){this.monthCaptionFormatter?this.monthCaption=this.monthCaptionFormatter(t):this.monthCaption=this.defaultMonthCaptionFormatter(t)},t.prototype.refreshDayOfWeekCaptions=function(){for(var t=[],e=this.dayOfWeekCaptionFormatter?this.dayOfWeekCaptionFormatter:this.defaultDayOfWeekCaptionFormatter,n=0;n<l.length;n++)t.push(e(n));this.daysOfWeekCaptions=t},t.prototype.refreshView=function(t){this.view=new o(t).createView(!1,this.firstDayOfWeek)},t.prototype.getClassForMonth=function(){var t=this.monthClass;return this.disabled&&(t=this.monthClass+" "+this.disabledClass),t},t.prototype.getClassForDay=function(t){var e="";if(t){if(t.day===this.value.getDate())e=this.selectedDayClass;else if(t.isToday)e=this.currentDayClass;else if(this.customDayClass){new Date(this.value.valueOf()).setDate(t.day),e=this.customDayClass(t)}return this.disabled&&(e=e+" "+this.disabledDayClass),this.dayCaptionClass+" "+e}return this.dayCaptionClass},t.prototype.getFormattedDay=function(t){return this.dayFormatter?this.dayFormatter(t):this.defaultDayFormatter(t)},t.prototype.onDayClick=function(t){if(!this.disabled&&t){var e=new Date(this.value.valueOf());e.setDate(t.day),this.value=new Date(e.valueOf()),this.change.emit(e)}},t.prototype.onMonthClick=function(){this.disabled||this.monthClick.emit(this)},t.decorators=[{type:e.Component,args:[{selector:"sc-month-calendar",template:'\x3c!-- Month --\x3e\n<div (click)="onMonthClick()"\n     [ngClass]="[\'column\', grow.mode == \'stretch\' ? \'stretch-vertically\' : \'\', getClassForMonth()]">\n\n  \x3c!-- Month caption --\x3e\n  <div class="row">\n\n    \x3c!-- Month caption cell --\x3e\n    <div class="w-100"\n         [class.label]="grow.mode != \'mixed\'"\n         [class.ratio-height]="grow.mode == \'proportional\'"\n         [class.stretch-horizontally]="grow.mode == \'stretch\' || grow.mode == \'mixed\'">\n\n      \x3c!-- Month caption cell content --\x3e\n      <div [class.label__content]="grow.mode != \'mixed\'">\n\n        <ng-container *ngTemplateOutlet="monthTemplate ? monthTemplate : defaultMonthTemplate; context: { $implicit: value }"></ng-container>\n\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- Week captions --\x3e\n  <div class="row">\n\n    \x3c!-- Week captions cell --\x3e\n    <div [class.label]="grow.mode != \'mixed\'"\n         [class.ratio-square]="grow.mode == \'proportional\'"\n         [class.stretch-horizontally]="grow.mode == \'stretch\' || grow.mode == \'mixed\'"\n         *ngFor="let dayOfWeekCaption of daysOfWeekCaptions; let i = index">\n\n      \x3c!-- Week caption cell content --\x3e\n      <div [class.label__content]="grow.mode != \'mixed\'">\n\n        <ng-container *ngTemplateOutlet="dayOfWeekTemplate ? dayOfWeekTemplate : defaultDayOfWeekTemplate; context: { $implicit: dayOfWeekCaption, dayOfWeekIndex: i }"></ng-container>\n\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- Days --\x3e\n  <div class="row"\n       *ngFor="let week of view">\n\n    \x3c!-- Day cell --\x3e\n    <div (click)="onDayClick(day)"\n         class="ratio-square label"\n         [class.ratio-square]="grow.mode == \'proportional\' || grow.mode == \'mixed\'"\n         [class.stretch-horizontally]="grow.mode == \'stretch\'"\n         *ngFor="let day of week">\n\n      \x3c!-- Day content --\x3e\n      <div class="label__content">\n\n        <ng-container *ngTemplateOutlet="dayTemplate ? dayTemplate : defaultDayTemplate; context: { $implicit: day }"></ng-container>\n\n      </div>\n\n    </div>\n\n  </div>\n\n</div>\n\n\n\n\x3c!-- Templates --\x3e\n\n\x3c!-- Day template --\x3e\n<ng-template #defaultDayTemplate\n             let-day>\n  <div class="flex-expanded-container">\n    <div [ngClass]="[\'flex-expand\', getClassForDay(day)]">{{ getFormattedDay(day) }}</div>\n  </div>\n</ng-template>\n\n\x3c!-- Day of week cells template --\x3e\n<ng-template #defaultDayOfWeekTemplate\n             let-dayOfWeek\n             let-dayOfWeekIndex="dayOfWeekIndex">\n  <div [class.flex-expanded-container]="grow.mode != \'mixed\'">\n    <div [ngClass]="[\'flex-expand\', \'flex-centered\', dayOfWeekCaptionClass]">\n      {{ dayOfWeek }}\n    </div>\n  </div>\n</ng-template>\n\n\x3c!-- Month cell template --\x3e\n<ng-template #defaultMonthTemplate\n             let-date>\n  <div [class.flex-expanded-container]="grow.mode != \'mixed\'">\n    <div [ngClass]="[\'flex-expand\', \'flex-centered\', monthCaptionClass]">\n      {{ monthCaption }}\n    </div>\n  </div>\n</ng-template>\n',styles:[".column{display:flex;flex-flow:column;flex:1}.row{display:flex;flex:1}.label{position:relative}.label__content{position:absolute;top:0;left:0;bottom:0;right:0}.flex-expanded-container{display:flex;position:absolute;width:100%;height:100%}.flex-expand{flex:1}.flex-centered{display:flex;align-items:center;justify-content:center}.ratio-height{padding-bottom:14.28571%}.ratio-square{padding-bottom:14.28571%;width:14.28571%}.stretch-vertically{height:100%}.stretch-horizontally{width:14.28571%}.fixed-height{display:flex;flex:1}.w-100{width:100%}.sc-month{font-size:2rem}.sc-month--disabled{opacity:.25}.sc-month__caption,.sc-month__week-caption{border:1px solid #000;font-weight:700}.sc-month__day{border:1px solid #000;cursor:pointer}.sc-month__day--disabled{cursor:auto}.sc-month__day--today{background:pink}.sc-month__day--selected{background:#6495ed}"],providers:[c]}]}],t.propDecorators={dayTemplate:[{type:e.ContentChild,args:[r,{read:e.TemplateRef}]}],dayOfWeekTemplate:[{type:e.ContentChild,args:[i,{read:e.TemplateRef}]}],monthTemplate:[{type:e.ContentChild,args:[s,{read:e.TemplateRef}]}],change:[{type:e.Output,args:["change"]}],monthClick:[{type:e.Output,args:["monthClick"]}],disabled:[{type:e.Input}],value:[{type:e.Input}],grow:[{type:e.Input}],firstDayOfWeek:[{type:e.Input}],dayFormatter:[{type:e.Input}],dayOfWeekCaptionFormatter:[{type:e.Input}],monthCaptionFormatter:[{type:e.Input}],customDayClass:[{type:e.Input}],monthClass:[{type:e.Input}],disabledClass:[{type:e.Input}],monthCaptionClass:[{type:e.Input}],dayOfWeekCaptionClass:[{type:e.Input}],dayCaptionClass:[{type:e.Input}],currentDayClass:[{type:e.Input}],disabledDayClass:[{type:e.Input}],selectedDayClass:[{type:e.Input}]},t}(),u=function m(){},y=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[a.BrowserModule,n.FormsModule],declarations:[h,s,i,r],exports:[h,s,i,r]}]}],t}();t.MONTH_CALENDAR_VALUE_ACCESSOR=c,t.MonthCalendarComponent=h,t.MonthCaptionTemplateDirective=s,t.DayOfWeekCaptionTemplateDirective=i,t.DayTemplateDirective=r,t.DayInfo=u,t.DayOfWeek=f,t.MonthCalendarModule=y,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=simple-angular-calendar.umd.min.js.map