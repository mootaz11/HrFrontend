(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/forms'), require('@angular/platform-browser')) :
  typeof define === 'function' && define.amd ? define('simple-angular-calendar', ['exports', '@angular/core', '@angular/forms', '@angular/platform-browser'], factory) :
  (factory((global['simple-angular-calendar'] = {}),global.ng.core,global.ng.forms,global.ng.platformBrowser));
}(this, (function (exports,core,forms,platformBrowser) { 'use strict';

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  /** *
   * Names of the days of the week in English.
    @type {?} */
  var DAY_NAMES = [
      'Sunday',
      'Monday',
      'Tuesday',
      'Wednesday',
      'Thursday',
      'Friday',
      'Saturday'
  ];

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  /** @enum {number} */
  var DayOfWeek = {
      Sunday: 0,
      Monday: 1,
      Tuesday: 2,
      Wednesday: 3,
      Thursday: 4,
      Friday: 5,
      Saturday: 6,
  };
  DayOfWeek[DayOfWeek.Sunday] = 'Sunday';
  DayOfWeek[DayOfWeek.Monday] = 'Monday';
  DayOfWeek[DayOfWeek.Tuesday] = 'Tuesday';
  DayOfWeek[DayOfWeek.Wednesday] = 'Wednesday';
  DayOfWeek[DayOfWeek.Thursday] = 'Thursday';
  DayOfWeek[DayOfWeek.Friday] = 'Friday';
  DayOfWeek[DayOfWeek.Saturday] = 'Saturday';

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  /**
   * Contains several functions to work with
   * dates in JS.
   */
  var /**
   * Contains several functions to work with
   * dates in JS.
   */ DateMath = (function () {
      function DateMath() {
      }
      /**
       * Adds days to the specified date.
       * @param date Date that will be increased.
       * @param days Number of days to add to the specified
       * date.
       */
      /**
       * Adds days to the specified date.
       * @param {?} date Date that will be increased.
       * @param {?} days Number of days to add to the specified
       * date.
       * @return {?}
       */
      DateMath.addDays = /**
       * Adds days to the specified date.
       * @param {?} date Date that will be increased.
       * @param {?} days Number of days to add to the specified
       * date.
       * @return {?}
       */
          function (date, days) {
              /** @type {?} */
              var daysAdded = new Date(date.valueOf());
              daysAdded.setDate(daysAdded.getDate() + days);
              return daysAdded;
          };
      /**
       * Substract days to the specified date.
       * @param date Date that will be decreased.
       * @param days Number of days to substract from
       * the specified date.
       */
      /**
       * Substract days to the specified date.
       * @param {?} date Date that will be decreased.
       * @param {?} days Number of days to substract from
       * the specified date.
       * @return {?}
       */
      DateMath.substractDays = /**
       * Substract days to the specified date.
       * @param {?} date Date that will be decreased.
       * @param {?} days Number of days to substract from
       * the specified date.
       * @return {?}
       */
          function (date, days) {
              return DateMath.addDays(date, -days);
          };
      /**
       * Adds a number of months to the specified date.
       * @param date Date that will be increased.
       * @param months Months to add.
       */
      /**
       * Adds a number of months to the specified date.
       * @param {?} date Date that will be increased.
       * @param {?} months Months to add.
       * @return {?}
       */
      DateMath.addMonths = /**
       * Adds a number of months to the specified date.
       * @param {?} date Date that will be increased.
       * @param {?} months Months to add.
       * @return {?}
       */
          function (date, months) {
              /** @type {?} */
              var monthsAdded = new Date(date.valueOf());
              monthsAdded.setMonth(date.getMonth() + months);
              return monthsAdded;
          };
      /**
       * Substracts a number of months from the specified date.
       * @param date Date that will be decreased.
       * @param months Months to substract.
       */
      /**
       * Substracts a number of months from the specified date.
       * @param {?} date Date that will be decreased.
       * @param {?} months Months to substract.
       * @return {?}
       */
      DateMath.substractMonths = /**
       * Substracts a number of months from the specified date.
       * @param {?} date Date that will be decreased.
       * @param {?} months Months to substract.
       * @return {?}
       */
          function (date, months) {
              /** @type {?} */
              var monthsSubstracted = new Date(date.valueOf());
              monthsSubstracted.setMonth(date.getMonth() - months);
              return monthsSubstracted;
          };
      /**
       * Gets the date corresponding to the first day
       * of the month of the specified date.
       * @param date Date.
       */
      /**
       * Gets the date corresponding to the first day
       * of the month of the specified date.
       * @param {?} date Date.
       * @return {?}
       */
      DateMath.getFirstDayOfMonth = /**
       * Gets the date corresponding to the first day
       * of the month of the specified date.
       * @param {?} date Date.
       * @return {?}
       */
          function (date) {
              /** @type {?} */
              var firstDay = new Date();
              firstDay.setFullYear(date.getFullYear(), date.getMonth(), 1);
              return firstDay;
          };
      /**
       * Gets the date corresponding to the last day
       * of the month of the specified date.
       * @param date Date.
       */
      /**
       * Gets the date corresponding to the last day
       * of the month of the specified date.
       * @param {?} date Date.
       * @return {?}
       */
      DateMath.getLastDayOfMonth = /**
       * Gets the date corresponding to the last day
       * of the month of the specified date.
       * @param {?} date Date.
       * @return {?}
       */
          function (date) {
              /** @type {?} */
              var lastDay = new Date();
              lastDay.setFullYear(date.getFullYear(), date.getMonth() + 1, 0);
              return lastDay;
          };
      return DateMath;
  }());

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  /**
   * Creates a view of a month.
   */
  var /**
   * Creates a view of a month.
   */ MonthView = (function () {
      /**
       * Creates a new instance of MonthView.
       * @param date Date of the month.
       */
      function MonthView(date) {
          this.date = date;
          this.WEEKS_PER_MONTH = 5;
          this.DAYS_PER_WEEK = 7;
      }
      /**
       * Creates the grid corresponding to the month specified
       * by the date.
       * @param completeHoles Indicates if the beginning and end
       * of the grid should be completed with the days of the
       * adjacent months.
       * @param weekStart Day of week to be considered the beginning
       * of the week.
       */
      /**
       * Creates the grid corresponding to the month specified
       * by the date.
       * @param {?=} completeHoles Indicates if the beginning and end
       * of the grid should be completed with the days of the
       * adjacent months.
       * @param {?=} weekStart Day of week to be considered the beginning
       * of the week.
       * @return {?}
       */
      MonthView.prototype.createView = /**
       * Creates the grid corresponding to the month specified
       * by the date.
       * @param {?=} completeHoles Indicates if the beginning and end
       * of the grid should be completed with the days of the
       * adjacent months.
       * @param {?=} weekStart Day of week to be considered the beginning
       * of the week.
       * @return {?}
       */
          function (completeHoles, weekStart) {
              if (completeHoles === void 0) {
                  completeHoles = false;
              }
              if (weekStart === void 0) {
                  weekStart = DayOfWeek.Monday;
              }
              /** @type {?} */
              var currentMonthGrid = this.createGrid(this.date, weekStart);
              if (completeHoles) {
                  /** @type {?} */
                  var needsToBeFilledFromBeginning = !!!currentMonthGrid[0][0];
                  if (needsToBeFilledFromBeginning) {
                      /** @type {?} */
                      var lastMonth = DateMath.substractMonths(this.date, 1);
                      /** @type {?} */
                      var lastDayOfLastMonth = DateMath.getLastDayOfMonth(lastMonth).getDate();
                      /** @type {?} */
                      var firstDayOfCurrentMonth = DateMath.getFirstDayOfMonth(this.date);
                      /** @type {?} */
                      var daysToPickFromLastMonth = firstDayOfCurrentMonth.getDay() - weekStart.valueOf();
                      for (var i = 0; i < daysToPickFromLastMonth; i++) {
                          /** @type {?} */
                          var currentDayOfMonth = lastDayOfLastMonth - (daysToPickFromLastMonth - (i + 1));
                          /** @type {?} */
                          var currentDate = new Date(lastMonth.getFullYear(), lastMonth.getMonth(), currentDayOfMonth);
                          currentMonthGrid[0][i] = {
                              isToday: false,
                              isSelected: false,
                              day: currentDayOfMonth,
                              date: currentDate
                          };
                      }
                  }
                  /** @type {?} */
                  var fillingDays = 1;
                  for (var week = 0; week < this.WEEKS_PER_MONTH; week++) {
                      for (var dayOfWeek = 0; dayOfWeek < this.DAYS_PER_WEEK; dayOfWeek++) {
                          if (!!!currentMonthGrid[week][dayOfWeek]) {
                              /** @type {?} */
                              var fillingDates = new Date(this.date.getFullYear(), this.date.getMonth(), fillingDays++);
                              currentMonthGrid[week][dayOfWeek] = {
                                  isToday: false,
                                  isSelected: false,
                                  day: fillingDays,
                                  date: fillingDates
                              };
                          }
                      }
                  }
              }
              return currentMonthGrid;
          };
      /**
       * Creates the grid corresponding to the month specified
       * by the date.
       * @param {?} date Date to use.
       * @param {?=} weekStart Day of week which will be considered
       * the beginning of the week.
       * @return {?}
       */
      MonthView.prototype.createGrid = /**
       * Creates the grid corresponding to the month specified
       * by the date.
       * @param {?} date Date to use.
       * @param {?=} weekStart Day of week which will be considered
       * the beginning of the week.
       * @return {?}
       */
          function (date, weekStart) {
              if (weekStart === void 0) {
                  weekStart = DayOfWeek.Monday;
              }
              /** @type {?} */
              var grid = this.initGrid();
              /** @type {?} */
              var firstDayOfWeek = DateMath.getFirstDayOfMonth(date).getDay() - weekStart.valueOf();
              /** @type {?} */
              var lastDay = DateMath.getLastDayOfMonth(date).getDate();
              /** @type {?} */
              var today = new Date();
              /** @type {?} */
              var dayOfWeek = firstDayOfWeek;
              /** @type {?} */
              var currentDayOfMonth = 1;
              for (var week = 0; week < this.WEEKS_PER_MONTH; week++) {
                  for (; dayOfWeek < this.DAYS_PER_WEEK && currentDayOfMonth <= lastDay; dayOfWeek++) {
                      /** @type {?} */
                      var todaySameYear = today.getFullYear() === this.date.getFullYear();
                      /** @type {?} */
                      var todaySameMonth = today.getMonth() === this.date.getMonth();
                      /** @type {?} */
                      var todaySameDay = today.getDate() === currentDayOfMonth;
                      /** @type {?} */
                      var currentDate = new Date(this.date.getFullYear(), this.date.getMonth(), currentDayOfMonth);
                      grid[week][dayOfWeek] = {
                          isToday: todaySameYear && todaySameMonth && todaySameDay,
                          isSelected: this.date.getDate() === currentDayOfMonth,
                          day: currentDayOfMonth,
                          date: currentDate
                      };
                      currentDayOfMonth++;
                  }
                  dayOfWeek = 0;
              }
              return grid;
          };
      /**
       * Initializes the grid that contains
       * the info about the "shape" of the
       * month.
       * @return {?}
       */
      MonthView.prototype.initGrid = /**
       * Initializes the grid that contains
       * the info about the "shape" of the
       * month.
       * @return {?}
       */
          function () {
              /** @type {?} */
              var defaultEmpty = undefined;
              /** @type {?} */
              var grid = [
                  new Array(this.DAYS_PER_WEEK).fill(defaultEmpty),
                  new Array(this.DAYS_PER_WEEK).fill(defaultEmpty),
                  new Array(this.DAYS_PER_WEEK).fill(defaultEmpty),
                  new Array(this.DAYS_PER_WEEK).fill(defaultEmpty),
                  new Array(this.DAYS_PER_WEEK).fill(defaultEmpty)
              ];
              return grid;
          };
      return MonthView;
  }());

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  /**
   * Directive to select the template to use
   * for the day cell.
   */
  var DayTemplateDirective = (function () {
      function DayTemplateDirective() {
      }
      DayTemplateDirective.decorators = [
          { type: core.Directive, args: [{
                      selector: '[scDayTemplate]'
                  },] },
      ];
      /** @nocollapse */
      DayTemplateDirective.ctorParameters = function () { return []; };
      return DayTemplateDirective;
  }());

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  var DayOfWeekCaptionTemplateDirective = (function () {
      function DayOfWeekCaptionTemplateDirective() {
      }
      DayOfWeekCaptionTemplateDirective.decorators = [
          { type: core.Directive, args: [{
                      selector: '[scDayOfWeekCaptionTemplate]'
                  },] },
      ];
      /** @nocollapse */
      DayOfWeekCaptionTemplateDirective.ctorParameters = function () { return []; };
      return DayOfWeekCaptionTemplateDirective;
  }());

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  var MonthCaptionTemplateDirective = (function () {
      function MonthCaptionTemplateDirective() {
      }
      MonthCaptionTemplateDirective.decorators = [
          { type: core.Directive, args: [{
                      selector: '[scMonthCaptionTemplate]'
                  },] },
      ];
      /** @nocollapse */
      MonthCaptionTemplateDirective.ctorParameters = function () { return []; };
      return MonthCaptionTemplateDirective;
  }());

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  /**
   * Default formatter for the captions of the days
   * of the week.
   * @param {?} firstDayOfWeek
   * @return {?}
   */
  function defaultDayOfWeekCaptionFormatterFactory(firstDayOfWeek) {
      return function (dayOfWeek) {
          /** @type {?} */
          var formattedDayNames = DAY_NAMES.map(function (dayName) { return formatDayName(dayName); });
          /** @type {?} */
          var reordered = reorderDays(formattedDayNames, firstDayOfWeek);
          return reordered[dayOfWeek.valueOf()];
      };
  }
  /**
   * Applies formatting to the name of the day.
   * @param {?} dayName Name of the day.
   * @return {?}
   */
  function formatDayName(dayName) {
      /** @type {?} */
      var newDayName = dayName.substr(0, 1).toUpperCase() + dayName.substr(1, 1).toLowerCase();
      return newDayName;
  }
  /**
   * Reorders the array of names so the first index
   * corresponds with the name of the first day of
   * the week.
   * @param {?} dayNames Array with the names of the days
   * of the week.
   * @param {?} firstDayOfWeek First day of the week.
   * @return {?}
   */
  function reorderDays(dayNames, firstDayOfWeek) {
      /** @type {?} */
      var dayCount = DAY_NAMES.length;
      /** @type {?} */
      var dayIndex = firstDayOfWeek.valueOf();
      /** @type {?} */
      var reordered = (new Array(dayCount)).fill(0);
      for (var i = 0; i < dayCount; i++) {
          /** @type {?} */
          var newPosition = (i + dayIndex) % dayCount;
          reordered[i] = dayNames[newPosition];
      }
      return reordered;
  }

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  /** *
   * Month calendar provider.
    @type {?} */
  var MONTH_CALENDAR_VALUE_ACCESSOR = {
      provide: forms.NG_VALUE_ACCESSOR,
      useExisting: core.forwardRef(function () { return MonthCalendarComponent; }),
      multi: true
  };
  /**
   * Control that represents a calendar.
   */
  var MonthCalendarComponent = (function () {
      function MonthCalendarComponent() {
          /**
           * Event raised when the user selects a date.
           */
          this.change = new core.EventEmitter();
          /**
           * Event raised when the user clicks the calendar.
           */
          this.monthClick = new core.EventEmitter();
          /**
           * Sets if the control should be in a
           * disabled state.
           */
          this.disabled = false;
          /**
           * Date to show.
           */
          this._value = new Date();
          /**
           * Specifies how a day cell should grow.
           */
          this._grow = { mode: 'stretch' };
          this.defaultFirstDayOfWeek = DayOfWeek.Sunday;
          this.defaultDayOfWeekCaptionFormatter = defaultDayOfWeekCaptionFormatterFactory(this.defaultFirstDayOfWeek);
          /**
           * First day of the week.
           */
          this._firstDayOfWeek = this.defaultFirstDayOfWeek;
          /**
           * CSS class for the month.
           */
          this.monthClass = 'sc-month';
          /**
           * CSS class for the disabled state.
           */
          this.disabledClass = 'sc-month--disabled';
          /**
           * CSS class for the month caption.
           */
          this.monthCaptionClass = 'sc-month__caption';
          /**
           * CSS class for the day of the week captions.
           */
          this.dayOfWeekCaptionClass = 'sc-month__week-caption';
          /**
           * CSS class for the day captions.
           */
          this.dayCaptionClass = 'sc-month__day';
          /**
           * CSS class for the current day.
           */
          this.currentDayClass = 'sc-month__day--today';
          /**
           * CSS class for the day when the state is disabled.
           */
          this.disabledDayClass = 'sc-month__day--disabled';
          /**
           * CSS class for the selected day.
           */
          this.selectedDayClass = 'sc-month__day--selected';
          this.defaultMonthCaptionFormatter = function (date) { return date.toDateString(); };
          this.defaultDayFormatter = function (day) { return day ? day.day.toString() : ''; };
          this.onChange = function (date) { };
          this.onTouched = function () { };
      }
      Object.defineProperty(MonthCalendarComponent.prototype, "value", {
          get: /**
           * @return {?}
           */ function () {
              return this._value;
          },
          set: /**
           * @param {?} date
           * @return {?}
           */ function (date) {
              this.writeValue(date);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MonthCalendarComponent.prototype, "grow", {
          get: /**
           * @return {?}
           */ function () {
              return this._grow;
          },
          set: /**
           * @param {?} mode
           * @return {?}
           */ function (mode) {
              if (mode) {
                  this._grow = mode;
              }
              else {
                  this._grow = { mode: 'stretch' };
              }
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MonthCalendarComponent.prototype, "firstDayOfWeek", {
          get: /**
           * @return {?}
           */ function () {
              return this._firstDayOfWeek;
          },
          set: /**
           * @param {?} dayOfWeek
           * @return {?}
           */ function (dayOfWeek) {
              this._firstDayOfWeek = dayOfWeek;
              this.defaultDayOfWeekCaptionFormatter = defaultDayOfWeekCaptionFormatterFactory(this._firstDayOfWeek);
              this.refresh();
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MonthCalendarComponent.prototype, "dayFormatter", {
          get: /**
           * @return {?}
           */ function () {
              return this._dayFormatter;
          },
          set: /**
           * @param {?} formatter
           * @return {?}
           */ function (formatter) {
              this._dayFormatter = formatter;
              this.refresh();
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MonthCalendarComponent.prototype, "dayOfWeekCaptionFormatter", {
          get: /**
           * @return {?}
           */ function () {
              return this._dayOfWeekCaptionFormatter;
          },
          set: /**
           * @param {?} formatter
           * @return {?}
           */ function (formatter) {
              this._dayOfWeekCaptionFormatter = formatter;
              this.refresh();
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MonthCalendarComponent.prototype, "monthCaptionFormatter", {
          get: /**
           * @return {?}
           */ function () {
              return this._monthCaptionFormatter;
          },
          set: /**
           * @param {?} formatter
           * @return {?}
           */ function (formatter) {
              this._monthCaptionFormatter = formatter;
              this.refresh();
          },
          enumerable: true,
          configurable: true
      });
      /**
       * Initializes the component.
       */
      /**
       * Initializes the component.
       * @return {?}
       */
      MonthCalendarComponent.prototype.ngOnInit = /**
       * Initializes the component.
       * @return {?}
       */
          function () {
              this.refresh();
          };
      /**
       * @param {?} date
       * @return {?}
       */
      MonthCalendarComponent.prototype.writeValue = /**
       * @param {?} date
       * @return {?}
       */
          function (date) {
              if (date) {
                  this._value = date;
                  this.refresh();
                  this.onChange(date);
              }
          };
      /**
       * @param {?} fn
       * @return {?}
       */
      MonthCalendarComponent.prototype.registerOnChange = /**
       * @param {?} fn
       * @return {?}
       */
          function (fn) {
              this.onChange = fn;
          };
      /**
       * @param {?} fn
       * @return {?}
       */
      MonthCalendarComponent.prototype.registerOnTouched = /**
       * @param {?} fn
       * @return {?}
       */
          function (fn) {
              this.onTouched = fn;
          };
      /**
       * @param {?} isDisabled
       * @return {?}
       */
      MonthCalendarComponent.prototype.setDisabledState = /**
       * @param {?} isDisabled
       * @return {?}
       */
          function (isDisabled) {
              this.disabled = isDisabled;
          };
      /**
       * Refreshes the component.
       * @return {?}
       */
      MonthCalendarComponent.prototype.refresh = /**
       * Refreshes the component.
       * @return {?}
       */
          function () {
              this.refreshMonthCaption(this.value);
              this.refreshDayOfWeekCaptions();
              this.refreshView(this.value);
          };
      /**
       * Refreshes the month caption.
       * @param {?} date Date.
       * @return {?}
       */
      MonthCalendarComponent.prototype.refreshMonthCaption = /**
       * Refreshes the month caption.
       * @param {?} date Date.
       * @return {?}
       */
          function (date) {
              if (this.monthCaptionFormatter) {
                  this.monthCaption = this.monthCaptionFormatter(date);
              }
              else {
                  this.monthCaption = this.defaultMonthCaptionFormatter(date);
              }
          };
      /**
       * Refreshes the day of week captions.
       * @return {?}
       */
      MonthCalendarComponent.prototype.refreshDayOfWeekCaptions = /**
       * Refreshes the day of week captions.
       * @return {?}
       */
          function () {
              /** @type {?} */
              var dayCaptions = [];
              /** @type {?} */
              var dayOfWeekFormatter = this.dayOfWeekCaptionFormatter ?
                  this.dayOfWeekCaptionFormatter :
                  this.defaultDayOfWeekCaptionFormatter;
              for (var i = 0; i < DAY_NAMES.length; i++) {
                  dayCaptions.push(dayOfWeekFormatter(i));
              }
              this.daysOfWeekCaptions = dayCaptions;
          };
      /**
       * Refreshes the calendar view.
       * @param {?} date Date.
       * @return {?}
       */
      MonthCalendarComponent.prototype.refreshView = /**
       * Refreshes the calendar view.
       * @param {?} date Date.
       * @return {?}
       */
          function (date) {
              this.view = new MonthView(date).createView(false, this.firstDayOfWeek);
          };
      /**
       * Gets the CSS classes to apply to the month.
       */
      /**
       * Gets the CSS classes to apply to the month.
       * @return {?}
       */
      MonthCalendarComponent.prototype.getClassForMonth = /**
       * Gets the CSS classes to apply to the month.
       * @return {?}
       */
          function () {
              /** @type {?} */
              var classesToApply = this.monthClass;
              if (this.disabled) {
                  classesToApply = this.monthClass + ' ' + this.disabledClass;
              }
              return classesToApply;
          };
      /**
       * Gets the CSS class applicable to
       * the specified day.
       * @param day Day.
       */
      /**
       * Gets the CSS class applicable to
       * the specified day.
       * @param {?=} day Day.
       * @return {?}
       */
      MonthCalendarComponent.prototype.getClassForDay = /**
       * Gets the CSS class applicable to
       * the specified day.
       * @param {?=} day Day.
       * @return {?}
       */
          function (day) {
              /** @type {?} */
              var dayClassToApply = '';
              if (day) {
                  if (day.day === this.value.getDate()) {
                      dayClassToApply = this.selectedDayClass;
                  }
                  else if (day.isToday) {
                      dayClassToApply = this.currentDayClass;
                  }
                  else if (this.customDayClass) {
                      /** @type {?} */
                      var date = new Date(this.value.valueOf());
                      date.setDate(day.day);
                      dayClassToApply = this.customDayClass(day);
                  }
                  if (this.disabled) {
                      dayClassToApply = dayClassToApply + ' ' + this.disabledDayClass;
                  }
                  return this.dayCaptionClass + ' ' + dayClassToApply;
              }
              else {
                  return this.dayCaptionClass;
              }
          };
      /**
       * Gets a formatted string corresponding
       * to the specified day.
       * @param day Day to format.
       */
      /**
       * Gets a formatted string corresponding
       * to the specified day.
       * @param {?} day Day to format.
       * @return {?}
       */
      MonthCalendarComponent.prototype.getFormattedDay = /**
       * Gets a formatted string corresponding
       * to the specified day.
       * @param {?} day Day to format.
       * @return {?}
       */
          function (day) {
              if (this.dayFormatter) {
                  return this.dayFormatter(day);
              }
              else {
                  return this.defaultDayFormatter(day);
              }
          };
      /**
       * Controls the click event of a day cell.
       * @param dayInfo Info about the selected day.
       */
      /**
       * Controls the click event of a day cell.
       * @param {?} dayInfo Info about the selected day.
       * @return {?}
       */
      MonthCalendarComponent.prototype.onDayClick = /**
       * Controls the click event of a day cell.
       * @param {?} dayInfo Info about the selected day.
       * @return {?}
       */
          function (dayInfo) {
              if (!this.disabled && dayInfo) {
                  /** @type {?} */
                  var selectedDate = new Date(this.value.valueOf());
                  selectedDate.setDate(dayInfo.day);
                  this.value = new Date(selectedDate.valueOf());
                  this.change.emit(selectedDate);
              }
          };
      /**
       * Controls the click event of the month.
       */
      /**
       * Controls the click event of the month.
       * @return {?}
       */
      MonthCalendarComponent.prototype.onMonthClick = /**
       * Controls the click event of the month.
       * @return {?}
       */
          function () {
              if (!this.disabled) {
                  this.monthClick.emit(this);
              }
          };
      MonthCalendarComponent.decorators = [
          { type: core.Component, args: [{
                      selector: 'sc-month-calendar',
                      template: "<!-- Month -->\n<div (click)=\"onMonthClick()\"\n     [ngClass]=\"['column', grow.mode == 'stretch' ? 'stretch-vertically' : '', getClassForMonth()]\">\n\n  <!-- Month caption -->\n  <div class=\"row\">\n\n    <!-- Month caption cell -->\n    <div class=\"w-100\"\n         [class.label]=\"grow.mode != 'mixed'\"\n         [class.ratio-height]=\"grow.mode == 'proportional'\"\n         [class.stretch-horizontally]=\"grow.mode == 'stretch' || grow.mode == 'mixed'\">\n\n      <!-- Month caption cell content -->\n      <div [class.label__content]=\"grow.mode != 'mixed'\">\n\n        <ng-container *ngTemplateOutlet=\"monthTemplate ? monthTemplate : defaultMonthTemplate; context: { $implicit: value }\"></ng-container>\n\n      </div>\n    </div>\n  </div>\n\n  <!-- Week captions -->\n  <div class=\"row\">\n\n    <!-- Week captions cell -->\n    <div [class.label]=\"grow.mode != 'mixed'\"\n         [class.ratio-square]=\"grow.mode == 'proportional'\"\n         [class.stretch-horizontally]=\"grow.mode == 'stretch' || grow.mode == 'mixed'\"\n         *ngFor=\"let dayOfWeekCaption of daysOfWeekCaptions; let i = index\">\n\n      <!-- Week caption cell content -->\n      <div [class.label__content]=\"grow.mode != 'mixed'\">\n\n        <ng-container *ngTemplateOutlet=\"dayOfWeekTemplate ? dayOfWeekTemplate : defaultDayOfWeekTemplate; context: { $implicit: dayOfWeekCaption, dayOfWeekIndex: i }\"></ng-container>\n\n      </div>\n    </div>\n  </div>\n\n  <!-- Days -->\n  <div class=\"row\"\n       *ngFor=\"let week of view\">\n\n    <!-- Day cell -->\n    <div (click)=\"onDayClick(day)\"\n         class=\"ratio-square label\"\n         [class.ratio-square]=\"grow.mode == 'proportional' || grow.mode == 'mixed'\"\n         [class.stretch-horizontally]=\"grow.mode == 'stretch'\"\n         *ngFor=\"let day of week\">\n\n      <!-- Day content -->\n      <div class=\"label__content\">\n\n        <ng-container *ngTemplateOutlet=\"dayTemplate ? dayTemplate : defaultDayTemplate; context: { $implicit: day }\"></ng-container>\n\n      </div>\n\n    </div>\n\n  </div>\n\n</div>\n\n\n\n<!-- Templates -->\n\n<!-- Day template -->\n<ng-template #defaultDayTemplate\n             let-day>\n  <div class=\"flex-expanded-container\">\n    <div [ngClass]=\"['flex-expand', getClassForDay(day)]\">{{ getFormattedDay(day) }}</div>\n  </div>\n</ng-template>\n\n<!-- Day of week cells template -->\n<ng-template #defaultDayOfWeekTemplate\n             let-dayOfWeek\n             let-dayOfWeekIndex=\"dayOfWeekIndex\">\n  <div [class.flex-expanded-container]=\"grow.mode != 'mixed'\">\n    <div [ngClass]=\"['flex-expand', 'flex-centered', dayOfWeekCaptionClass]\">\n      {{ dayOfWeek }}\n    </div>\n  </div>\n</ng-template>\n\n<!-- Month cell template -->\n<ng-template #defaultMonthTemplate\n             let-date>\n  <div [class.flex-expanded-container]=\"grow.mode != 'mixed'\">\n    <div [ngClass]=\"['flex-expand', 'flex-centered', monthCaptionClass]\">\n      {{ monthCaption }}\n    </div>\n  </div>\n</ng-template>\n",
                      styles: [".column{display:flex;flex-flow:column;flex:1}.row{display:flex;flex:1}.label{position:relative}.label__content{position:absolute;top:0;left:0;bottom:0;right:0}.flex-expanded-container{display:flex;position:absolute;width:100%;height:100%}.flex-expand{flex:1}.flex-centered{display:flex;align-items:center;justify-content:center}.ratio-height{padding-bottom:14.28571%}.ratio-square{padding-bottom:14.28571%;width:14.28571%}.stretch-vertically{height:100%}.stretch-horizontally{width:14.28571%}.fixed-height{display:flex;flex:1}.w-100{width:100%}.sc-month{font-size:2rem}.sc-month--disabled{opacity:.25}.sc-month__caption,.sc-month__week-caption{border:1px solid #000;font-weight:700}.sc-month__day{border:1px solid #000;cursor:pointer}.sc-month__day--disabled{cursor:auto}.sc-month__day--today{background:pink}.sc-month__day--selected{background:#6495ed}"],
                      providers: [MONTH_CALENDAR_VALUE_ACCESSOR]
                  },] },
      ];
      MonthCalendarComponent.propDecorators = {
          dayTemplate: [{ type: core.ContentChild, args: [DayTemplateDirective, { read: core.TemplateRef },] }],
          dayOfWeekTemplate: [{ type: core.ContentChild, args: [DayOfWeekCaptionTemplateDirective, { read: core.TemplateRef },] }],
          monthTemplate: [{ type: core.ContentChild, args: [MonthCaptionTemplateDirective, { read: core.TemplateRef },] }],
          change: [{ type: core.Output, args: ['change',] }],
          monthClick: [{ type: core.Output, args: ['monthClick',] }],
          disabled: [{ type: core.Input }],
          value: [{ type: core.Input }],
          grow: [{ type: core.Input }],
          firstDayOfWeek: [{ type: core.Input }],
          dayFormatter: [{ type: core.Input }],
          dayOfWeekCaptionFormatter: [{ type: core.Input }],
          monthCaptionFormatter: [{ type: core.Input }],
          customDayClass: [{ type: core.Input }],
          monthClass: [{ type: core.Input }],
          disabledClass: [{ type: core.Input }],
          monthCaptionClass: [{ type: core.Input }],
          dayOfWeekCaptionClass: [{ type: core.Input }],
          dayCaptionClass: [{ type: core.Input }],
          currentDayClass: [{ type: core.Input }],
          disabledDayClass: [{ type: core.Input }],
          selectedDayClass: [{ type: core.Input }]
      };
      return MonthCalendarComponent;
  }());

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  /**
   * Represents information about one
   * day of the month.
   */
  var /**
   * Represents information about one
   * day of the month.
   */ DayInfo = (function () {
      function DayInfo() {
      }
      return DayInfo;
  }());

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */
  var MonthCalendarModule = (function () {
      function MonthCalendarModule() {
      }
      MonthCalendarModule.decorators = [
          { type: core.NgModule, args: [{
                      imports: [
                          platformBrowser.BrowserModule,
                          forms.FormsModule
                      ],
                      declarations: [
                          MonthCalendarComponent,
                          MonthCaptionTemplateDirective,
                          DayOfWeekCaptionTemplateDirective,
                          DayTemplateDirective
                      ],
                      exports: [
                          MonthCalendarComponent,
                          MonthCaptionTemplateDirective,
                          DayOfWeekCaptionTemplateDirective,
                          DayTemplateDirective
                      ]
                  },] },
      ];
      return MonthCalendarModule;
  }());

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */

  /**
   * @fileoverview added by tsickle
   * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
   */

  exports.MONTH_CALENDAR_VALUE_ACCESSOR = MONTH_CALENDAR_VALUE_ACCESSOR;
  exports.MonthCalendarComponent = MonthCalendarComponent;
  exports.MonthCaptionTemplateDirective = MonthCaptionTemplateDirective;
  exports.DayOfWeekCaptionTemplateDirective = DayOfWeekCaptionTemplateDirective;
  exports.DayTemplateDirective = DayTemplateDirective;
  exports.DayInfo = DayInfo;
  exports.DayOfWeek = DayOfWeek;
  exports.MonthCalendarModule = MonthCalendarModule;

  Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2ltcGxlLWFuZ3VsYXItY2FsZW5kYXIudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9zaW1wbGUtYW5ndWxhci1jYWxlbmRhci9saWIvbW9kZWxzL2RheS1uYW1lcy50cyIsIm5nOi8vc2ltcGxlLWFuZ3VsYXItY2FsZW5kYXIvbGliL21vZGVscy9kYXktb2Ytd2Vlay50cyIsIm5nOi8vc2ltcGxlLWFuZ3VsYXItY2FsZW5kYXIvbGliL21vZGVscy9kYXRlcy9kYXRlLW1hdGgudHMiLCJuZzovL3NpbXBsZS1hbmd1bGFyLWNhbGVuZGFyL2xpYi9tb2RlbHMvdmlld3MvbW90aC12aWV3LnRzIiwibmc6Ly9zaW1wbGUtYW5ndWxhci1jYWxlbmRhci9saWIvZGlyZWN0aXZlcy9kYXktdGVtcGxhdGUuZGlyZWN0aXZlLnRzIiwibmc6Ly9zaW1wbGUtYW5ndWxhci1jYWxlbmRhci9saWIvZGlyZWN0aXZlcy9kYXktb2Ytd2Vlay1jYXB0aW9uLXRlbXBsYXRlLmRpcmVjdGl2ZS50cyIsIm5nOi8vc2ltcGxlLWFuZ3VsYXItY2FsZW5kYXIvbGliL2RpcmVjdGl2ZXMvbW9udGgtY2FwdGlvbi10ZW1wbGF0ZS5kaXJlY3RpdmUudHMiLCJuZzovL3NpbXBsZS1hbmd1bGFyLWNhbGVuZGFyL2xpYi9tb2RlbHMvZm9ybWF0dGVycy9kYXktb2Ytd2Vlay1jYXB0aW9uLWZvcm1hdHRlci50cyIsIm5nOi8vc2ltcGxlLWFuZ3VsYXItY2FsZW5kYXIvbGliL2NvbXBvbmVudHMvbW9udGgtY2FsZW5kYXIvbW9udGgtY2FsZW5kYXIuY29tcG9uZW50LnRzIiwibmc6Ly9zaW1wbGUtYW5ndWxhci1jYWxlbmRhci9saWIvbW9kZWxzL2RheS1pbmZvLnRzIiwibmc6Ly9zaW1wbGUtYW5ndWxhci1jYWxlbmRhci9saWIvbW9udGgtY2FsZW5kYXIubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTmFtZXMgb2YgdGhlIGRheXMgb2YgdGhlIHdlZWsgaW4gRW5nbGlzaC5cbiAqL1xuZXhwb3J0IGNvbnN0IERBWV9OQU1FUyA9IFtcbiAgICAnU3VuZGF5JyxcbiAgICAnTW9uZGF5JyxcbiAgICAnVHVlc2RheScsXG4gICAgJ1dlZG5lc2RheScsXG4gICAgJ1RodXJzZGF5JyxcbiAgICAnRnJpZGF5JyxcbiAgICAnU2F0dXJkYXknICAgIFxuXTsiLCIvKipcbiAqIFJlcHJlc2VudHMgYSBkYXkgb2YgdGhlIHdlZWsuXG4gKi9cbmV4cG9ydCBlbnVtIERheU9mV2VlayB7XG4gIFN1bmRheSA9IDAsXG4gIE1vbmRheSA9IDEsXG4gIFR1ZXNkYXkgPSAyLFxuICBXZWRuZXNkYXkgPSAzLFxuICBUaHVyc2RheSA9IDQsXG4gIEZyaWRheSA9IDUsXG4gIFNhdHVyZGF5ID0gNlxufVxuIiwiLyoqXG4gKiBDb250YWlucyBzZXZlcmFsIGZ1bmN0aW9ucyB0byB3b3JrIHdpdGhcbiAqIGRhdGVzIGluIEpTLlxuICovXG5leHBvcnQgY2xhc3MgRGF0ZU1hdGgge1xuXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGRheXMgdG8gdGhlIHNwZWNpZmllZCBkYXRlLlxuICAgICAqIEBwYXJhbSBkYXRlIERhdGUgdGhhdCB3aWxsIGJlIGluY3JlYXNlZC5cbiAgICAgKiBAcGFyYW0gZGF5cyBOdW1iZXIgb2YgZGF5cyB0byBhZGQgdG8gdGhlIHNwZWNpZmllZFxuICAgICAqIGRhdGUuXG4gICAgICovXG4gICAgc3RhdGljIGFkZERheXMoZGF0ZTogRGF0ZSwgZGF5czogbnVtYmVyKTogRGF0ZSB7XG4gICAgICAgIGNvbnN0IGRheXNBZGRlZCA9IG5ldyBEYXRlKGRhdGUudmFsdWVPZigpKTtcbiAgICAgICAgZGF5c0FkZGVkLnNldERhdGUoZGF5c0FkZGVkLmdldERhdGUoKSArIGRheXMpO1xuICAgICAgICByZXR1cm4gZGF5c0FkZGVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN1YnN0cmFjdCBkYXlzIHRvIHRoZSBzcGVjaWZpZWQgZGF0ZS5cbiAgICAgKiBAcGFyYW0gZGF0ZSBEYXRlIHRoYXQgd2lsbCBiZSBkZWNyZWFzZWQuXG4gICAgICogQHBhcmFtIGRheXMgTnVtYmVyIG9mIGRheXMgdG8gc3Vic3RyYWN0IGZyb21cbiAgICAgKiB0aGUgc3BlY2lmaWVkIGRhdGUuXG4gICAgICovXG4gICAgc3RhdGljIHN1YnN0cmFjdERheXMoZGF0ZTogRGF0ZSwgZGF5czogbnVtYmVyKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiBEYXRlTWF0aC5hZGREYXlzKGRhdGUsIC1kYXlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbnVtYmVyIG9mIG1vbnRocyB0byB0aGUgc3BlY2lmaWVkIGRhdGUuXG4gICAgICogQHBhcmFtIGRhdGUgRGF0ZSB0aGF0IHdpbGwgYmUgaW5jcmVhc2VkLlxuICAgICAqIEBwYXJhbSBtb250aHMgTW9udGhzIHRvIGFkZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYWRkTW9udGhzKGRhdGU6IERhdGUsIG1vbnRoczogbnVtYmVyKTogRGF0ZSB7XG4gICAgICBjb25zdCBtb250aHNBZGRlZCA9IG5ldyBEYXRlKGRhdGUudmFsdWVPZigpKTtcbiAgICAgIG1vbnRoc0FkZGVkLnNldE1vbnRoKGRhdGUuZ2V0TW9udGgoKSArIG1vbnRocyk7XG4gICAgICByZXR1cm4gbW9udGhzQWRkZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3Vic3RyYWN0cyBhIG51bWJlciBvZiBtb250aHMgZnJvbSB0aGUgc3BlY2lmaWVkIGRhdGUuXG4gICAgICogQHBhcmFtIGRhdGUgRGF0ZSB0aGF0IHdpbGwgYmUgZGVjcmVhc2VkLlxuICAgICAqIEBwYXJhbSBtb250aHMgTW9udGhzIHRvIHN1YnN0cmFjdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgc3Vic3RyYWN0TW9udGhzKGRhdGU6IERhdGUsIG1vbnRoczogbnVtYmVyKTogRGF0ZSB7XG4gICAgICBjb25zdCBtb250aHNTdWJzdHJhY3RlZCA9IG5ldyBEYXRlKGRhdGUudmFsdWVPZigpKTtcbiAgICAgIG1vbnRoc1N1YnN0cmFjdGVkLnNldE1vbnRoKGRhdGUuZ2V0TW9udGgoKSAtIG1vbnRocyk7XG4gICAgICByZXR1cm4gbW9udGhzU3Vic3RyYWN0ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZGF0ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBmaXJzdCBkYXlcbiAgICAgKiBvZiB0aGUgbW9udGggb2YgdGhlIHNwZWNpZmllZCBkYXRlLlxuICAgICAqIEBwYXJhbSBkYXRlIERhdGUuXG4gICAgICovXG4gICAgc3RhdGljIGdldEZpcnN0RGF5T2ZNb250aChkYXRlOiBEYXRlKTogRGF0ZSB7XG4gICAgICAgIGNvbnN0IGZpcnN0RGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgZmlyc3REYXkuc2V0RnVsbFllYXIoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIDEpO1xuICAgICAgICByZXR1cm4gZmlyc3REYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZGF0ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBsYXN0IGRheVxuICAgICAqIG9mIHRoZSBtb250aCBvZiB0aGUgc3BlY2lmaWVkIGRhdGUuXG4gICAgICogQHBhcmFtIGRhdGUgRGF0ZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0TGFzdERheU9mTW9udGgoZGF0ZTogRGF0ZSk6IERhdGUge1xuICAgICAgICBjb25zdCBsYXN0RGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGFzdERheS5zZXRGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSArIDEsIDApO1xuICAgICAgICByZXR1cm4gbGFzdERheTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBEYXlPZldlZWsgfSBmcm9tICcuLi9kYXktb2Ytd2Vlayc7XG5pbXBvcnQgeyBEYXRlTWF0aCB9IGZyb20gJy4uL2RhdGVzL2RhdGUtbWF0aCc7XG5pbXBvcnQgeyBEYXlJbmZvIH0gZnJvbSAnLi4vZGF5LWluZm8nO1xuXG4vKipcbiAqIENyZWF0ZXMgYSB2aWV3IG9mIGEgbW9udGguXG4gKi9cbmV4cG9ydCBjbGFzcyBNb250aFZpZXcge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgV0VFS1NfUEVSX01PTlRIID0gNTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IERBWVNfUEVSX1dFRUsgPSA3O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIE1vbnRoVmlldy5cbiAgICogQHBhcmFtIGRhdGUgRGF0ZSBvZiB0aGUgbW9udGguXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGU6IERhdGUpIHt9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGhlIGdyaWQgY29ycmVzcG9uZGluZyB0byB0aGUgbW9udGggc3BlY2lmaWVkXG4gICAqIGJ5IHRoZSBkYXRlLlxuICAgKiBAcGFyYW0gY29tcGxldGVIb2xlcyBJbmRpY2F0ZXMgaWYgdGhlIGJlZ2lubmluZyBhbmQgZW5kXG4gICAqIG9mIHRoZSBncmlkIHNob3VsZCBiZSBjb21wbGV0ZWQgd2l0aCB0aGUgZGF5cyBvZiB0aGVcbiAgICogYWRqYWNlbnQgbW9udGhzLlxuICAgKiBAcGFyYW0gd2Vla1N0YXJ0IERheSBvZiB3ZWVrIHRvIGJlIGNvbnNpZGVyZWQgdGhlIGJlZ2lubmluZ1xuICAgKiBvZiB0aGUgd2Vlay5cbiAgICovXG4gIGNyZWF0ZVZpZXcoY29tcGxldGVIb2xlcyA9IGZhbHNlLCB3ZWVrU3RhcnQgPSBEYXlPZldlZWsuTW9uZGF5KTogQXJyYXk8QXJyYXk8RGF5SW5mbz4+IHtcbiAgICBjb25zdCBjdXJyZW50TW9udGhHcmlkID0gdGhpcy5jcmVhdGVHcmlkKHRoaXMuZGF0ZSwgd2Vla1N0YXJ0KTtcblxuICAgIGlmIChjb21wbGV0ZUhvbGVzKSB7XG4gICAgICBjb25zdCBuZWVkc1RvQmVGaWxsZWRGcm9tQmVnaW5uaW5nID0gISEhY3VycmVudE1vbnRoR3JpZFswXVswXTtcblxuICAgICAgaWYgKG5lZWRzVG9CZUZpbGxlZEZyb21CZWdpbm5pbmcpIHtcbiAgICAgICAgY29uc3QgbGFzdE1vbnRoID0gRGF0ZU1hdGguc3Vic3RyYWN0TW9udGhzKHRoaXMuZGF0ZSwgMSk7XG4gICAgICAgIGNvbnN0IGxhc3REYXlPZkxhc3RNb250aCA9IERhdGVNYXRoLmdldExhc3REYXlPZk1vbnRoKGxhc3RNb250aCkuZ2V0RGF0ZSgpO1xuXG4gICAgICAgIGNvbnN0IGZpcnN0RGF5T2ZDdXJyZW50TW9udGggPSBEYXRlTWF0aC5nZXRGaXJzdERheU9mTW9udGgodGhpcy5kYXRlKTtcbiAgICAgICAgY29uc3QgZGF5c1RvUGlja0Zyb21MYXN0TW9udGggPSBmaXJzdERheU9mQ3VycmVudE1vbnRoLmdldERheSgpIC0gd2Vla1N0YXJ0LnZhbHVlT2YoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRheXNUb1BpY2tGcm9tTGFzdE1vbnRoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50RGF5T2ZNb250aCA9IGxhc3REYXlPZkxhc3RNb250aCAtIChkYXlzVG9QaWNrRnJvbUxhc3RNb250aCAtIChpICsgMSkpO1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUobGFzdE1vbnRoLmdldEZ1bGxZZWFyKCksIGxhc3RNb250aC5nZXRNb250aCgpLCBjdXJyZW50RGF5T2ZNb250aCk7XG5cbiAgICAgICAgICBjdXJyZW50TW9udGhHcmlkWzBdW2ldID0ge1xuICAgICAgICAgICAgaXNUb2RheTogZmFsc2UsXG4gICAgICAgICAgICBpc1NlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGRheTogY3VycmVudERheU9mTW9udGgsXG4gICAgICAgICAgICBkYXRlOiBjdXJyZW50RGF0ZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IGZpbGxpbmdEYXlzID0gMTtcbiAgICAgIGZvciAobGV0IHdlZWsgPSAwOyB3ZWVrIDwgdGhpcy5XRUVLU19QRVJfTU9OVEg7IHdlZWsrKykge1xuICAgICAgICBmb3IgKGxldCBkYXlPZldlZWsgPSAwOyBkYXlPZldlZWsgPCB0aGlzLkRBWVNfUEVSX1dFRUs7IGRheU9mV2VlaysrKSB7XG4gICAgICAgICAgaWYgKCEhIWN1cnJlbnRNb250aEdyaWRbd2Vla11bZGF5T2ZXZWVrXSkge1xuXG4gICAgICAgICAgICBjb25zdCBmaWxsaW5nRGF0ZXMgPSBuZXcgRGF0ZSh0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKSwgdGhpcy5kYXRlLmdldE1vbnRoKCksIGZpbGxpbmdEYXlzKyspO1xuXG4gICAgICAgICAgICBjdXJyZW50TW9udGhHcmlkW3dlZWtdW2RheU9mV2Vla10gPSB7XG4gICAgICAgICAgICAgIGlzVG9kYXk6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1NlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgZGF5OiBmaWxsaW5nRGF5cyxcbiAgICAgICAgICAgICAgZGF0ZTogZmlsbGluZ0RhdGVzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjdXJyZW50TW9udGhHcmlkO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGhlIGdyaWQgY29ycmVzcG9uZGluZyB0byB0aGUgbW9udGggc3BlY2lmaWVkXG4gICAqIGJ5IHRoZSBkYXRlLlxuICAgKiBAcGFyYW0gZGF0ZSBEYXRlIHRvIHVzZS5cbiAgICogQHBhcmFtIHdlZWtTdGFydCBEYXkgb2Ygd2VlayB3aGljaCB3aWxsIGJlIGNvbnNpZGVyZWRcbiAgICogdGhlIGJlZ2lubmluZyBvZiB0aGUgd2Vlay5cbiAgICovXG4gIHByaXZhdGUgY3JlYXRlR3JpZChkYXRlOiBEYXRlLCB3ZWVrU3RhcnQgPSBEYXlPZldlZWsuTW9uZGF5KTogQXJyYXk8QXJyYXk8RGF5SW5mbz4+IHtcbiAgICBjb25zdCBncmlkID0gdGhpcy5pbml0R3JpZCgpO1xuICAgIGNvbnN0IGZpcnN0RGF5T2ZXZWVrID1cbiAgICAgIERhdGVNYXRoLmdldEZpcnN0RGF5T2ZNb250aChkYXRlKS5nZXREYXkoKSAtIHdlZWtTdGFydC52YWx1ZU9mKCk7XG4gICAgY29uc3QgbGFzdERheSA9IERhdGVNYXRoLmdldExhc3REYXlPZk1vbnRoKGRhdGUpLmdldERhdGUoKTtcblxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICBsZXQgZGF5T2ZXZWVrID0gZmlyc3REYXlPZldlZWs7XG4gICAgbGV0IGN1cnJlbnREYXlPZk1vbnRoID0gMTtcbiAgICBmb3IgKGxldCB3ZWVrID0gMDsgd2VlayA8IHRoaXMuV0VFS1NfUEVSX01PTlRIOyB3ZWVrKyspIHtcblxuICAgICAgZm9yICg7IGRheU9mV2VlayA8IHRoaXMuREFZU19QRVJfV0VFSyAmJiBjdXJyZW50RGF5T2ZNb250aCA8PSBsYXN0RGF5OyBkYXlPZldlZWsrKykge1xuICAgICAgICBjb25zdCB0b2RheVNhbWVZZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKSA9PT0gdGhpcy5kYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGNvbnN0IHRvZGF5U2FtZU1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKSA9PT0gdGhpcy5kYXRlLmdldE1vbnRoKCk7XG4gICAgICAgIGNvbnN0IHRvZGF5U2FtZURheSA9IHRvZGF5LmdldERhdGUoKSA9PT0gY3VycmVudERheU9mTW9udGg7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUodGhpcy5kYXRlLmdldEZ1bGxZZWFyKCksIHRoaXMuZGF0ZS5nZXRNb250aCgpLCBjdXJyZW50RGF5T2ZNb250aCk7XG5cbiAgICAgICAgZ3JpZFt3ZWVrXVtkYXlPZldlZWtdID0ge1xuICAgICAgICAgIGlzVG9kYXk6IHRvZGF5U2FtZVllYXIgJiYgdG9kYXlTYW1lTW9udGggJiYgdG9kYXlTYW1lRGF5LFxuICAgICAgICAgIGlzU2VsZWN0ZWQ6IHRoaXMuZGF0ZS5nZXREYXRlKCkgPT09IGN1cnJlbnREYXlPZk1vbnRoLFxuICAgICAgICAgIGRheTogY3VycmVudERheU9mTW9udGgsXG4gICAgICAgICAgZGF0ZTogY3VycmVudERhdGVcbiAgICAgICAgfTtcblxuICAgICAgICBjdXJyZW50RGF5T2ZNb250aCsrO1xuICAgICAgfVxuXG4gICAgICBkYXlPZldlZWsgPSAwO1xuXG4gICAgfVxuXG4gICAgcmV0dXJuIGdyaWQ7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGdyaWQgdGhhdCBjb250YWluc1xuICAgKiB0aGUgaW5mbyBhYm91dCB0aGUgXCJzaGFwZVwiIG9mIHRoZVxuICAgKiBtb250aC5cbiAgICovXG4gIHByaXZhdGUgaW5pdEdyaWQoKTogQXJyYXk8QXJyYXk8RGF5SW5mbz4+IHtcbiAgICBjb25zdCBkZWZhdWx0RW1wdHkgPSB1bmRlZmluZWQ7XG4gICAgY29uc3QgZ3JpZCA9IFtcbiAgICAgIG5ldyBBcnJheSh0aGlzLkRBWVNfUEVSX1dFRUspLmZpbGwoZGVmYXVsdEVtcHR5KSxcbiAgICAgIG5ldyBBcnJheSh0aGlzLkRBWVNfUEVSX1dFRUspLmZpbGwoZGVmYXVsdEVtcHR5KSxcbiAgICAgIG5ldyBBcnJheSh0aGlzLkRBWVNfUEVSX1dFRUspLmZpbGwoZGVmYXVsdEVtcHR5KSxcbiAgICAgIG5ldyBBcnJheSh0aGlzLkRBWVNfUEVSX1dFRUspLmZpbGwoZGVmYXVsdEVtcHR5KSxcbiAgICAgIG5ldyBBcnJheSh0aGlzLkRBWVNfUEVSX1dFRUspLmZpbGwoZGVmYXVsdEVtcHR5KVxuICAgIF07XG5cbiAgICByZXR1cm4gZ3JpZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGlyZWN0aXZlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbi8qKlxuICogRGlyZWN0aXZlIHRvIHNlbGVjdCB0aGUgdGVtcGxhdGUgdG8gdXNlXG4gKiBmb3IgdGhlIGRheSBjZWxsLlxuICovXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbc2NEYXlUZW1wbGF0ZV0nXG59KVxuZXhwb3J0IGNsYXNzIERheVRlbXBsYXRlRGlyZWN0aXZlIHtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW3NjRGF5T2ZXZWVrQ2FwdGlvblRlbXBsYXRlXSdcbn0pXG5leHBvcnQgY2xhc3MgRGF5T2ZXZWVrQ2FwdGlvblRlbXBsYXRlRGlyZWN0aXZlIHtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW3NjTW9udGhDYXB0aW9uVGVtcGxhdGVdJ1xufSlcbmV4cG9ydCBjbGFzcyBNb250aENhcHRpb25UZW1wbGF0ZURpcmVjdGl2ZSB7XG5cbiAgY29uc3RydWN0b3IoKSB7IH1cblxufVxuIiwiaW1wb3J0IHsgREFZX05BTUVTIH0gZnJvbSAnLi4vZGF5LW5hbWVzJztcbmltcG9ydCB7IERheU9mV2VlayB9IGZyb20gJy4uL2RheS1vZi13ZWVrJztcblxuLyoqXG4gKiBEZWZhdWx0IGZvcm1hdHRlciBmb3IgdGhlIGNhcHRpb25zIG9mIHRoZSBkYXlzXG4gKiBvZiB0aGUgd2Vlay5cbiAqIEBwYXJhbSBkYXlPZldlZWsgRGF5IG9mIHRoZSB3ZWVrLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdERheU9mV2Vla0NhcHRpb25Gb3JtYXR0ZXJGYWN0b3J5KGZpcnN0RGF5T2ZXZWVrOiBEYXlPZldlZWspOiAoZGF5T2ZXZWVrOiBEYXlPZldlZWspID0+IHN0cmluZyB7XG4gIHJldHVybiAoZGF5T2ZXZWVrOiBEYXlPZldlZWspID0+IHtcbiAgICBjb25zdCBmb3JtYXR0ZWREYXlOYW1lcyA9IERBWV9OQU1FUy5tYXAoXG4gICAgICBkYXlOYW1lID0+IGZvcm1hdERheU5hbWUoZGF5TmFtZSlcbiAgICApO1xuXG4gICAgY29uc3QgcmVvcmRlcmVkID0gcmVvcmRlckRheXMoZm9ybWF0dGVkRGF5TmFtZXMsIGZpcnN0RGF5T2ZXZWVrKTtcbiAgICByZXR1cm4gcmVvcmRlcmVkW2RheU9mV2Vlay52YWx1ZU9mKCldO1xuICB9O1xufVxuXG4vKipcbiAqIEFwcGxpZXMgZm9ybWF0dGluZyB0byB0aGUgbmFtZSBvZiB0aGUgZGF5LlxuICogQHBhcmFtIGRheU5hbWUgTmFtZSBvZiB0aGUgZGF5LlxuICovXG5mdW5jdGlvbiBmb3JtYXREYXlOYW1lKGRheU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IG5ld0RheU5hbWUgPSBkYXlOYW1lLnN1YnN0cigwLCAxKS50b1VwcGVyQ2FzZSgpICsgZGF5TmFtZS5zdWJzdHIoMSwgMSkudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIG5ld0RheU5hbWU7XG59XG5cbi8qKlxuICogUmVvcmRlcnMgdGhlIGFycmF5IG9mIG5hbWVzIHNvIHRoZSBmaXJzdCBpbmRleFxuICogY29ycmVzcG9uZHMgd2l0aCB0aGUgbmFtZSBvZiB0aGUgZmlyc3QgZGF5IG9mXG4gKiB0aGUgd2Vlay5cbiAqIEBwYXJhbSBkYXlOYW1lcyBBcnJheSB3aXRoIHRoZSBuYW1lcyBvZiB0aGUgZGF5c1xuICogb2YgdGhlIHdlZWsuXG4gKiBAcGFyYW0gZmlyc3REYXlPZldlZWsgRmlyc3QgZGF5IG9mIHRoZSB3ZWVrLlxuICovXG5mdW5jdGlvbiByZW9yZGVyRGF5cyhkYXlOYW1lczogc3RyaW5nW10sIGZpcnN0RGF5T2ZXZWVrOiBEYXlPZldlZWspOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGRheUNvdW50ID0gREFZX05BTUVTLmxlbmd0aDtcblxuICBjb25zdCBkYXlJbmRleCA9IGZpcnN0RGF5T2ZXZWVrLnZhbHVlT2YoKTtcbiAgY29uc3QgcmVvcmRlcmVkID0gKG5ldyBBcnJheShkYXlDb3VudCkpLmZpbGwoMCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGF5Q291bnQ7IGkrKykge1xuICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gKGkgKyBkYXlJbmRleCkgJSBkYXlDb3VudDtcbiAgICByZW9yZGVyZWRbaV0gPSBkYXlOYW1lc1tuZXdQb3NpdGlvbl07XG4gIH1cblxuICByZXR1cm4gcmVvcmRlcmVkO1xufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIGZvcndhcmRSZWYsIEhvc3RCaW5kaW5nLCBJbnB1dCwgT3V0cHV0LCBDb250ZW50Q2hpbGQsIFRlbXBsYXRlUmVmLCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IERheUluZm8gfSBmcm9tICcuLi8uLi9tb2RlbHMvZGF5LWluZm8nO1xuaW1wb3J0IHsgREFZX05BTUVTIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2RheS1uYW1lcyc7XG5pbXBvcnQgeyBNb250aFZpZXcgfSBmcm9tICcuLi8uLi9tb2RlbHMvdmlld3MvbW90aC12aWV3JztcbmltcG9ydCB7IERheVRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi4vLi4vZGlyZWN0aXZlcy9kYXktdGVtcGxhdGUuZGlyZWN0aXZlJztcbmltcG9ydCB7IERheU9mV2Vla0NhcHRpb25UZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvZGF5LW9mLXdlZWstY2FwdGlvbi10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgTW9udGhDYXB0aW9uVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL21vbnRoLWNhcHRpb24tdGVtcGxhdGUuZGlyZWN0aXZlJztcbmltcG9ydCB7IERheU9mV2VlayB9IGZyb20gJy4uLy4uL21vZGVscy9kYXktb2Ytd2Vlayc7XG5pbXBvcnQgeyBkZWZhdWx0RGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlckZhY3RvcnkgfSBmcm9tICcuLi8uLi9tb2RlbHMvZm9ybWF0dGVycy9kYXktb2Ytd2Vlay1jYXB0aW9uLWZvcm1hdHRlcic7XG5pbXBvcnQgeyBHcm93TW9kZSB9IGZyb20gJy4uLy4uL21vZGVscy9ncm93LW1vZGUnO1xuXG4vKipcbiAqIE1vbnRoIGNhbGVuZGFyIHByb3ZpZGVyLlxuICovXG5leHBvcnQgY29uc3QgTU9OVEhfQ0FMRU5EQVJfVkFMVUVfQUNDRVNTT1I6IGFueSA9IHtcbiAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE1vbnRoQ2FsZW5kYXJDb21wb25lbnQpLFxuICBtdWx0aTogdHJ1ZVxufTtcblxuLyoqXG4gKiBDb250cm9sIHRoYXQgcmVwcmVzZW50cyBhIGNhbGVuZGFyLlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdzYy1tb250aC1jYWxlbmRhcicsXG4gIHRlbXBsYXRlOiBgPCEtLSBNb250aCAtLT5cbjxkaXYgKGNsaWNrKT1cIm9uTW9udGhDbGljaygpXCJcbiAgICAgW25nQ2xhc3NdPVwiWydjb2x1bW4nLCBncm93Lm1vZGUgPT0gJ3N0cmV0Y2gnID8gJ3N0cmV0Y2gtdmVydGljYWxseScgOiAnJywgZ2V0Q2xhc3NGb3JNb250aCgpXVwiPlxuXG4gIDwhLS0gTW9udGggY2FwdGlvbiAtLT5cbiAgPGRpdiBjbGFzcz1cInJvd1wiPlxuXG4gICAgPCEtLSBNb250aCBjYXB0aW9uIGNlbGwgLS0+XG4gICAgPGRpdiBjbGFzcz1cInctMTAwXCJcbiAgICAgICAgIFtjbGFzcy5sYWJlbF09XCJncm93Lm1vZGUgIT0gJ21peGVkJ1wiXG4gICAgICAgICBbY2xhc3MucmF0aW8taGVpZ2h0XT1cImdyb3cubW9kZSA9PSAncHJvcG9ydGlvbmFsJ1wiXG4gICAgICAgICBbY2xhc3Muc3RyZXRjaC1ob3Jpem9udGFsbHldPVwiZ3Jvdy5tb2RlID09ICdzdHJldGNoJyB8fCBncm93Lm1vZGUgPT0gJ21peGVkJ1wiPlxuXG4gICAgICA8IS0tIE1vbnRoIGNhcHRpb24gY2VsbCBjb250ZW50IC0tPlxuICAgICAgPGRpdiBbY2xhc3MubGFiZWxfX2NvbnRlbnRdPVwiZ3Jvdy5tb2RlICE9ICdtaXhlZCdcIj5cblxuICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwibW9udGhUZW1wbGF0ZSA/IG1vbnRoVGVtcGxhdGUgOiBkZWZhdWx0TW9udGhUZW1wbGF0ZTsgY29udGV4dDogeyAkaW1wbGljaXQ6IHZhbHVlIH1cIj48L25nLWNvbnRhaW5lcj5cblxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuXG4gIDwhLS0gV2VlayBjYXB0aW9ucyAtLT5cbiAgPGRpdiBjbGFzcz1cInJvd1wiPlxuXG4gICAgPCEtLSBXZWVrIGNhcHRpb25zIGNlbGwgLS0+XG4gICAgPGRpdiBbY2xhc3MubGFiZWxdPVwiZ3Jvdy5tb2RlICE9ICdtaXhlZCdcIlxuICAgICAgICAgW2NsYXNzLnJhdGlvLXNxdWFyZV09XCJncm93Lm1vZGUgPT0gJ3Byb3BvcnRpb25hbCdcIlxuICAgICAgICAgW2NsYXNzLnN0cmV0Y2gtaG9yaXpvbnRhbGx5XT1cImdyb3cubW9kZSA9PSAnc3RyZXRjaCcgfHwgZ3Jvdy5tb2RlID09ICdtaXhlZCdcIlxuICAgICAgICAgKm5nRm9yPVwibGV0IGRheU9mV2Vla0NhcHRpb24gb2YgZGF5c09mV2Vla0NhcHRpb25zOyBsZXQgaSA9IGluZGV4XCI+XG5cbiAgICAgIDwhLS0gV2VlayBjYXB0aW9uIGNlbGwgY29udGVudCAtLT5cbiAgICAgIDxkaXYgW2NsYXNzLmxhYmVsX19jb250ZW50XT1cImdyb3cubW9kZSAhPSAnbWl4ZWQnXCI+XG5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImRheU9mV2Vla1RlbXBsYXRlID8gZGF5T2ZXZWVrVGVtcGxhdGUgOiBkZWZhdWx0RGF5T2ZXZWVrVGVtcGxhdGU7IGNvbnRleHQ6IHsgJGltcGxpY2l0OiBkYXlPZldlZWtDYXB0aW9uLCBkYXlPZldlZWtJbmRleDogaSB9XCI+PC9uZy1jb250YWluZXI+XG5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cblxuICA8IS0tIERheXMgLS0+XG4gIDxkaXYgY2xhc3M9XCJyb3dcIlxuICAgICAgICpuZ0Zvcj1cImxldCB3ZWVrIG9mIHZpZXdcIj5cblxuICAgIDwhLS0gRGF5IGNlbGwgLS0+XG4gICAgPGRpdiAoY2xpY2spPVwib25EYXlDbGljayhkYXkpXCJcbiAgICAgICAgIGNsYXNzPVwicmF0aW8tc3F1YXJlIGxhYmVsXCJcbiAgICAgICAgIFtjbGFzcy5yYXRpby1zcXVhcmVdPVwiZ3Jvdy5tb2RlID09ICdwcm9wb3J0aW9uYWwnIHx8IGdyb3cubW9kZSA9PSAnbWl4ZWQnXCJcbiAgICAgICAgIFtjbGFzcy5zdHJldGNoLWhvcml6b250YWxseV09XCJncm93Lm1vZGUgPT0gJ3N0cmV0Y2gnXCJcbiAgICAgICAgICpuZ0Zvcj1cImxldCBkYXkgb2Ygd2Vla1wiPlxuXG4gICAgICA8IS0tIERheSBjb250ZW50IC0tPlxuICAgICAgPGRpdiBjbGFzcz1cImxhYmVsX19jb250ZW50XCI+XG5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImRheVRlbXBsYXRlID8gZGF5VGVtcGxhdGUgOiBkZWZhdWx0RGF5VGVtcGxhdGU7IGNvbnRleHQ6IHsgJGltcGxpY2l0OiBkYXkgfVwiPjwvbmctY29udGFpbmVyPlxuXG4gICAgICA8L2Rpdj5cblxuICAgIDwvZGl2PlxuXG4gIDwvZGl2PlxuXG48L2Rpdj5cblxuXG5cbjwhLS0gVGVtcGxhdGVzIC0tPlxuXG48IS0tIERheSB0ZW1wbGF0ZSAtLT5cbjxuZy10ZW1wbGF0ZSAjZGVmYXVsdERheVRlbXBsYXRlXG4gICAgICAgICAgICAgbGV0LWRheT5cbiAgPGRpdiBjbGFzcz1cImZsZXgtZXhwYW5kZWQtY29udGFpbmVyXCI+XG4gICAgPGRpdiBbbmdDbGFzc109XCJbJ2ZsZXgtZXhwYW5kJywgZ2V0Q2xhc3NGb3JEYXkoZGF5KV1cIj57eyBnZXRGb3JtYXR0ZWREYXkoZGF5KSB9fTwvZGl2PlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG5cbjwhLS0gRGF5IG9mIHdlZWsgY2VsbHMgdGVtcGxhdGUgLS0+XG48bmctdGVtcGxhdGUgI2RlZmF1bHREYXlPZldlZWtUZW1wbGF0ZVxuICAgICAgICAgICAgIGxldC1kYXlPZldlZWtcbiAgICAgICAgICAgICBsZXQtZGF5T2ZXZWVrSW5kZXg9XCJkYXlPZldlZWtJbmRleFwiPlxuICA8ZGl2IFtjbGFzcy5mbGV4LWV4cGFuZGVkLWNvbnRhaW5lcl09XCJncm93Lm1vZGUgIT0gJ21peGVkJ1wiPlxuICAgIDxkaXYgW25nQ2xhc3NdPVwiWydmbGV4LWV4cGFuZCcsICdmbGV4LWNlbnRlcmVkJywgZGF5T2ZXZWVrQ2FwdGlvbkNsYXNzXVwiPlxuICAgICAge3sgZGF5T2ZXZWVrIH19XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPCEtLSBNb250aCBjZWxsIHRlbXBsYXRlIC0tPlxuPG5nLXRlbXBsYXRlICNkZWZhdWx0TW9udGhUZW1wbGF0ZVxuICAgICAgICAgICAgIGxldC1kYXRlPlxuICA8ZGl2IFtjbGFzcy5mbGV4LWV4cGFuZGVkLWNvbnRhaW5lcl09XCJncm93Lm1vZGUgIT0gJ21peGVkJ1wiPlxuICAgIDxkaXYgW25nQ2xhc3NdPVwiWydmbGV4LWV4cGFuZCcsICdmbGV4LWNlbnRlcmVkJywgbW9udGhDYXB0aW9uQ2xhc3NdXCI+XG4gICAgICB7eyBtb250aENhcHRpb24gfX1cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuYCxcbiAgc3R5bGVzOiBbYC5jb2x1bW57ZGlzcGxheTpmbGV4O2ZsZXgtZmxvdzpjb2x1bW47ZmxleDoxfS5yb3d7ZGlzcGxheTpmbGV4O2ZsZXg6MX0ubGFiZWx7cG9zaXRpb246cmVsYXRpdmV9LmxhYmVsX19jb250ZW50e3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDtib3R0b206MDtyaWdodDowfS5mbGV4LWV4cGFuZGVkLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0uZmxleC1leHBhbmR7ZmxleDoxfS5mbGV4LWNlbnRlcmVke2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0ucmF0aW8taGVpZ2h0e3BhZGRpbmctYm90dG9tOjE0LjI4NTcxJX0ucmF0aW8tc3F1YXJle3BhZGRpbmctYm90dG9tOjE0LjI4NTcxJTt3aWR0aDoxNC4yODU3MSV9LnN0cmV0Y2gtdmVydGljYWxseXtoZWlnaHQ6MTAwJX0uc3RyZXRjaC1ob3Jpem9udGFsbHl7d2lkdGg6MTQuMjg1NzElfS5maXhlZC1oZWlnaHR7ZGlzcGxheTpmbGV4O2ZsZXg6MX0udy0xMDB7d2lkdGg6MTAwJX0uc2MtbW9udGh7Zm9udC1zaXplOjJyZW19LnNjLW1vbnRoLS1kaXNhYmxlZHtvcGFjaXR5Oi4yNX0uc2MtbW9udGhfX2NhcHRpb24sLnNjLW1vbnRoX193ZWVrLWNhcHRpb257Ym9yZGVyOjFweCBzb2xpZCAjMDAwO2ZvbnQtd2VpZ2h0OjcwMH0uc2MtbW9udGhfX2RheXtib3JkZXI6MXB4IHNvbGlkICMwMDA7Y3Vyc29yOnBvaW50ZXJ9LnNjLW1vbnRoX19kYXktLWRpc2FibGVke2N1cnNvcjphdXRvfS5zYy1tb250aF9fZGF5LS10b2RheXtiYWNrZ3JvdW5kOnBpbmt9LnNjLW1vbnRoX19kYXktLXNlbGVjdGVke2JhY2tncm91bmQ6IzY0OTVlZH1gXSxcbiAgcHJvdmlkZXJzOiBbTU9OVEhfQ0FMRU5EQVJfVkFMVUVfQUNDRVNTT1JdXG59KVxuZXhwb3J0IGNsYXNzIE1vbnRoQ2FsZW5kYXJDb21wb25lbnQgaW1wbGVtZW50cyBDb250cm9sVmFsdWVBY2Nlc3NvciwgT25Jbml0IHtcbiAgQENvbnRlbnRDaGlsZChEYXlUZW1wbGF0ZURpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KSBkYXlUZW1wbGF0ZTtcbiAgQENvbnRlbnRDaGlsZChEYXlPZldlZWtDYXB0aW9uVGVtcGxhdGVEaXJlY3RpdmUsIHsgcmVhZDogVGVtcGxhdGVSZWYgfSkgZGF5T2ZXZWVrVGVtcGxhdGU7XG4gIEBDb250ZW50Q2hpbGQoTW9udGhDYXB0aW9uVGVtcGxhdGVEaXJlY3RpdmUsIHsgcmVhZDogVGVtcGxhdGVSZWYgfSkgbW9udGhUZW1wbGF0ZTtcblxuICAvKipcbiAgICogRXZlbnQgcmFpc2VkIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIGRhdGUuXG4gICAqL1xuICBAT3V0cHV0KCdjaGFuZ2UnKSBjaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPERhdGU+KCk7XG5cbiAgLyoqXG4gICAqIEV2ZW50IHJhaXNlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgY2FsZW5kYXIuXG4gICAqL1xuICBAT3V0cHV0KCdtb250aENsaWNrJykgbW9udGhDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8TW9udGhDYWxlbmRhckNvbXBvbmVudD4oKTtcblxuICAvKipcbiAgICogU2V0cyBpZiB0aGUgY29udHJvbCBzaG91bGQgYmUgaW4gYVxuICAgKiBkaXNhYmxlZCBzdGF0ZS5cbiAgICovXG4gIEBJbnB1dCgpIGRpc2FibGVkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIERhdGUgdG8gc2hvdy5cbiAgICovXG4gIHByaXZhdGUgX3ZhbHVlID0gbmV3IERhdGUoKTtcblxuICBnZXQgdmFsdWUoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IHZhbHVlKGRhdGU6IERhdGUpIHtcbiAgICB0aGlzLndyaXRlVmFsdWUoZGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogU3BlY2lmaWVzIGhvdyBhIGRheSBjZWxsIHNob3VsZCBncm93LlxuICAgKi9cbiAgcHJpdmF0ZSBfZ3JvdzogR3Jvd01vZGUgPSB7IG1vZGU6ICdzdHJldGNoJyB9O1xuXG4gIEBJbnB1dCgpIHNldCBncm93IChtb2RlOiBHcm93TW9kZSkge1xuICAgIGlmIChtb2RlKSB7XG4gICAgICB0aGlzLl9ncm93ID0gbW9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZ3JvdyA9IHsgbW9kZTogJ3N0cmV0Y2gnIH07XG4gICAgfVxuICB9XG5cbiAgZ2V0IGdyb3coKTogR3Jvd01vZGUge1xuICAgIHJldHVybiB0aGlzLl9ncm93O1xuICB9XG5cbiAgcHJpdmF0ZSBkZWZhdWx0Rmlyc3REYXlPZldlZWsgPSBEYXlPZldlZWsuU3VuZGF5O1xuXG4gIHByaXZhdGUgZGVmYXVsdERheU9mV2Vla0NhcHRpb25Gb3JtYXR0ZXIgPSBkZWZhdWx0RGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlckZhY3RvcnkodGhpcy5kZWZhdWx0Rmlyc3REYXlPZldlZWspO1xuXG4gIC8qKlxuICAgKiBGaXJzdCBkYXkgb2YgdGhlIHdlZWsuXG4gICAqL1xuICBwcml2YXRlIF9maXJzdERheU9mV2VlazogRGF5T2ZXZWVrID0gdGhpcy5kZWZhdWx0Rmlyc3REYXlPZldlZWs7XG5cbiAgQElucHV0KCkgc2V0IGZpcnN0RGF5T2ZXZWVrIChkYXlPZldlZWs6IERheU9mV2Vlaykge1xuICAgIHRoaXMuX2ZpcnN0RGF5T2ZXZWVrID0gZGF5T2ZXZWVrO1xuICAgIHRoaXMuZGVmYXVsdERheU9mV2Vla0NhcHRpb25Gb3JtYXR0ZXIgPSBkZWZhdWx0RGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlckZhY3RvcnkodGhpcy5fZmlyc3REYXlPZldlZWspO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgZ2V0IGZpcnN0RGF5T2ZXZWVrKCk6IERheU9mV2VlayB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpcnN0RGF5T2ZXZWVrO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdHRlciBmb3IgZGF5cy5cbiAgICovXG4gIHByaXZhdGUgX2RheUZvcm1hdHRlcjogKGRheT86IERheUluZm8pID0+IHN0cmluZztcblxuICBASW5wdXQoKSBzZXQgZGF5Rm9ybWF0dGVyIChmb3JtYXR0ZXI6IChkYXk/OiBEYXlJbmZvKSA9PiBzdHJpbmcpIHtcbiAgICB0aGlzLl9kYXlGb3JtYXR0ZXIgPSBmb3JtYXR0ZXI7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICBnZXQgZGF5Rm9ybWF0dGVyKCk6IChkYXk/OiBEYXlJbmZvKSA9PiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9kYXlGb3JtYXR0ZXI7XG4gIH1cblxuICAvKipcbiAgICogQ2FwdGlvbnMgb2YgdGhlIGRpZmZlcmVudCBkYXlzIG9mIHRoZSB3ZWVrLlxuICAgKi9cbiAgZGF5c09mV2Vla0NhcHRpb25zO1xuXG4gIC8qKlxuICAgKiBGb3JtYXR0ZXIgZm9yIHRoZSBjYXB0aW9ucyBvZiB0aGUgZGlmZmVyZW50XG4gICAqIGRheXMgb2YgdGhlIHdlZWsuXG4gICAqL1xuICBwcml2YXRlIF9kYXlPZldlZWtDYXB0aW9uRm9ybWF0dGVyOiAoZGF5T2ZXZWVrOiBEYXlPZldlZWspID0+IHN0cmluZztcblxuICBASW5wdXQoKSBzZXQgZGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlciAoZm9ybWF0dGVyOiAoZGF5T2ZXZWVrOiBEYXlPZldlZWspID0+IHN0cmluZykge1xuICAgIHRoaXMuX2RheU9mV2Vla0NhcHRpb25Gb3JtYXR0ZXIgPSBmb3JtYXR0ZXI7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICBnZXQgZGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlcigpOiAoZGF5T2ZXZWVrOiBEYXlPZldlZWspID0+IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2RheU9mV2Vla0NhcHRpb25Gb3JtYXR0ZXI7XG4gIH1cblxuICAvKipcbiAgICogQ2FwdGlvbiBvZiB0aGUgbW9udGguXG4gICAqL1xuICBtb250aENhcHRpb247XG5cbiAgLyoqXG4gICAqIEZvcm1hdHRlciBmb3IgdGhlIG1vbnRoIGNhcHRpb24uXG4gICAqL1xuICBwcml2YXRlIF9tb250aENhcHRpb25Gb3JtYXR0ZXI6IChkYXRlOiBEYXRlKSA9PiBzdHJpbmc7XG5cbiAgQElucHV0KCkgc2V0IG1vbnRoQ2FwdGlvbkZvcm1hdHRlciAoZm9ybWF0dGVyOiAoZGF0ZTogRGF0ZSkgPT4gc3RyaW5nKSB7XG4gICAgdGhpcy5fbW9udGhDYXB0aW9uRm9ybWF0dGVyID0gZm9ybWF0dGVyO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgZ2V0IG1vbnRoQ2FwdGlvbkZvcm1hdHRlcigpOiAoZGF0ZTogRGF0ZSkgPT4gc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fbW9udGhDYXB0aW9uRm9ybWF0dGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhIENTUyBjbGFzcyBmb3IgdGhlIHNwZWNpZmllZCBkYXkuXG4gICAqL1xuICBASW5wdXQoKSBjdXN0b21EYXlDbGFzczogKGRheTogRGF5SW5mbykgPT4gc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBDU1MgY2xhc3MgZm9yIHRoZSBtb250aC5cbiAgICovXG4gIEBJbnB1dCgpIG1vbnRoQ2xhc3MgPSAnc2MtbW9udGgnO1xuXG4gIC8qKlxuICAgKiBDU1MgY2xhc3MgZm9yIHRoZSBkaXNhYmxlZCBzdGF0ZS5cbiAgICovXG4gIEBJbnB1dCgpIGRpc2FibGVkQ2xhc3MgPSAnc2MtbW9udGgtLWRpc2FibGVkJztcblxuICAvKipcbiAgICogQ1NTIGNsYXNzIGZvciB0aGUgbW9udGggY2FwdGlvbi5cbiAgICovXG4gIEBJbnB1dCgpIG1vbnRoQ2FwdGlvbkNsYXNzID0gJ3NjLW1vbnRoX19jYXB0aW9uJztcblxuICAvKipcbiAgICogQ1NTIGNsYXNzIGZvciB0aGUgZGF5IG9mIHRoZSB3ZWVrIGNhcHRpb25zLlxuICAgKi9cbiAgQElucHV0KCkgZGF5T2ZXZWVrQ2FwdGlvbkNsYXNzID0gJ3NjLW1vbnRoX193ZWVrLWNhcHRpb24nO1xuXG4gIC8qKlxuICAgKiBDU1MgY2xhc3MgZm9yIHRoZSBkYXkgY2FwdGlvbnMuXG4gICAqL1xuICBASW5wdXQoKSBkYXlDYXB0aW9uQ2xhc3MgPSAnc2MtbW9udGhfX2RheSc7XG5cbiAgLyoqXG4gICAqIENTUyBjbGFzcyBmb3IgdGhlIGN1cnJlbnQgZGF5LlxuICAgKi9cbiAgQElucHV0KCkgY3VycmVudERheUNsYXNzID0gJ3NjLW1vbnRoX19kYXktLXRvZGF5JztcblxuICAvKipcbiAgICogQ1NTIGNsYXNzIGZvciB0aGUgZGF5IHdoZW4gdGhlIHN0YXRlIGlzIGRpc2FibGVkLlxuICAgKi9cbiAgQElucHV0KCkgZGlzYWJsZWREYXlDbGFzcyA9ICdzYy1tb250aF9fZGF5LS1kaXNhYmxlZCc7XG5cbiAgLyoqXG4gICAqIENTUyBjbGFzcyBmb3IgdGhlIHNlbGVjdGVkIGRheS5cbiAgICovXG4gIEBJbnB1dCgpIHNlbGVjdGVkRGF5Q2xhc3MgPSAnc2MtbW9udGhfX2RheS0tc2VsZWN0ZWQnO1xuXG4gIC8qKlxuICAgKiBWaWV3IG9mIHRoZSBjdXJyZW50IG1vbnRoLlxuICAgKi9cbiAgdmlldztcblxuICBwcml2YXRlIGRlZmF1bHRNb250aENhcHRpb25Gb3JtYXR0ZXIgPSAoZGF0ZTogRGF0ZSkgPT4gZGF0ZS50b0RhdGVTdHJpbmcoKTtcbiAgcHJpdmF0ZSBkZWZhdWx0RGF5Rm9ybWF0dGVyID0gKGRheT86IERheUluZm8pID0+IGRheSA/IGRheS5kYXkudG9TdHJpbmcoKSA6ICcnO1xuICBwcml2YXRlIG9uQ2hhbmdlID0gKGRhdGU6IERhdGUpID0+IHsgfTtcbiAgcHJpdmF0ZSBvblRvdWNoZWQgPSAoKSA9PiB7IH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBjb21wb25lbnQuXG4gICAqL1xuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIHdyaXRlVmFsdWUoZGF0ZTogRGF0ZSk6IHZvaWQge1xuICAgIGlmIChkYXRlKSB7XG4gICAgICB0aGlzLl92YWx1ZSA9IGRhdGU7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgIHRoaXMub25DaGFuZ2UoZGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogKGRhdGU6IERhdGUpID0+IHt9KTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICB9XG5cbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaGVzIHRoZSBjb21wb25lbnQuXG4gICAqL1xuICBwcml2YXRlIHJlZnJlc2goKTogdm9pZCB7XG4gICAgdGhpcy5yZWZyZXNoTW9udGhDYXB0aW9uKHRoaXMudmFsdWUpO1xuICAgIHRoaXMucmVmcmVzaERheU9mV2Vla0NhcHRpb25zKCk7XG4gICAgdGhpcy5yZWZyZXNoVmlldyh0aGlzLnZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoZXMgdGhlIG1vbnRoIGNhcHRpb24uXG4gICAqIEBwYXJhbSBkYXRlIERhdGUuXG4gICAqL1xuICBwcml2YXRlIHJlZnJlc2hNb250aENhcHRpb24oZGF0ZTogRGF0ZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1vbnRoQ2FwdGlvbkZvcm1hdHRlcikge1xuICAgICAgdGhpcy5tb250aENhcHRpb24gPSB0aGlzLm1vbnRoQ2FwdGlvbkZvcm1hdHRlcihkYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tb250aENhcHRpb24gPSB0aGlzLmRlZmF1bHRNb250aENhcHRpb25Gb3JtYXR0ZXIoZGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyB0aGUgZGF5IG9mIHdlZWsgY2FwdGlvbnMuXG4gICAqL1xuICBwcml2YXRlIHJlZnJlc2hEYXlPZldlZWtDYXB0aW9ucygpOiB2b2lkIHtcbiAgICBjb25zdCBkYXlDYXB0aW9uczogc3RyaW5nW10gPSBbXTtcblxuICAgIGNvbnN0IGRheU9mV2Vla0Zvcm1hdHRlciA9IHRoaXMuZGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlciA/XG4gICAgICB0aGlzLmRheU9mV2Vla0NhcHRpb25Gb3JtYXR0ZXIgOlxuICAgICAgdGhpcy5kZWZhdWx0RGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlcjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgREFZX05BTUVTLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXlDYXB0aW9ucy5wdXNoKGRheU9mV2Vla0Zvcm1hdHRlcihpKSk7XG4gICAgfVxuXG4gICAgdGhpcy5kYXlzT2ZXZWVrQ2FwdGlvbnMgPSBkYXlDYXB0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoZXMgdGhlIGNhbGVuZGFyIHZpZXcuXG4gICAqIEBwYXJhbSBkYXRlIERhdGUuXG4gICAqL1xuICBwcml2YXRlIHJlZnJlc2hWaWV3KGRhdGU6IERhdGUpOiB2b2lkIHtcbiAgICB0aGlzLnZpZXcgPSBuZXcgTW9udGhWaWV3KGRhdGUpLmNyZWF0ZVZpZXcoZmFsc2UsIHRoaXMuZmlyc3REYXlPZldlZWspO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIENTUyBjbGFzc2VzIHRvIGFwcGx5IHRvIHRoZSBtb250aC5cbiAgICovXG4gIGdldENsYXNzRm9yTW9udGgoKTogc3RyaW5nIHtcbiAgICBsZXQgY2xhc3Nlc1RvQXBwbHkgPSB0aGlzLm1vbnRoQ2xhc3M7XG5cbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgY2xhc3Nlc1RvQXBwbHkgPSB0aGlzLm1vbnRoQ2xhc3MgKyAnICcgKyB0aGlzLmRpc2FibGVkQ2xhc3M7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzZXNUb0FwcGx5O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIENTUyBjbGFzcyBhcHBsaWNhYmxlIHRvXG4gICAqIHRoZSBzcGVjaWZpZWQgZGF5LlxuICAgKiBAcGFyYW0gZGF5IERheS5cbiAgICovXG4gIGdldENsYXNzRm9yRGF5KGRheT86IERheUluZm8pOiBzdHJpbmcge1xuICAgIGxldCBkYXlDbGFzc1RvQXBwbHkgPSAnJztcblxuICAgIGlmIChkYXkpIHtcblxuICAgICAgaWYgKGRheS5kYXkgPT09IHRoaXMudmFsdWUuZ2V0RGF0ZSgpKSB7XG4gICAgICAgIGRheUNsYXNzVG9BcHBseSA9IHRoaXMuc2VsZWN0ZWREYXlDbGFzcztcbiAgICAgIH0gZWxzZSBpZiAoZGF5LmlzVG9kYXkpIHtcbiAgICAgICAgZGF5Q2xhc3NUb0FwcGx5ID0gdGhpcy5jdXJyZW50RGF5Q2xhc3M7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY3VzdG9tRGF5Q2xhc3MpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRoaXMudmFsdWUudmFsdWVPZigpKTtcbiAgICAgICAgZGF0ZS5zZXREYXRlKGRheS5kYXkpO1xuICAgICAgICBkYXlDbGFzc1RvQXBwbHkgPSB0aGlzLmN1c3RvbURheUNsYXNzKGRheSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgIGRheUNsYXNzVG9BcHBseSA9IGRheUNsYXNzVG9BcHBseSArICcgJyArIHRoaXMuZGlzYWJsZWREYXlDbGFzcztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZGF5Q2FwdGlvbkNsYXNzICsgJyAnICsgZGF5Q2xhc3NUb0FwcGx5O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXlDYXB0aW9uQ2xhc3M7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSBmb3JtYXR0ZWQgc3RyaW5nIGNvcnJlc3BvbmRpbmdcbiAgICogdG8gdGhlIHNwZWNpZmllZCBkYXkuXG4gICAqIEBwYXJhbSBkYXkgRGF5IHRvIGZvcm1hdC5cbiAgICovXG4gIGdldEZvcm1hdHRlZERheShkYXk6IERheUluZm8pOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmRheUZvcm1hdHRlcikge1xuICAgICAgcmV0dXJuIHRoaXMuZGF5Rm9ybWF0dGVyKGRheSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmRlZmF1bHREYXlGb3JtYXR0ZXIoZGF5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29udHJvbHMgdGhlIGNsaWNrIGV2ZW50IG9mIGEgZGF5IGNlbGwuXG4gICAqIEBwYXJhbSBkYXlJbmZvIEluZm8gYWJvdXQgdGhlIHNlbGVjdGVkIGRheS5cbiAgICovXG4gIG9uRGF5Q2xpY2soZGF5SW5mbzogRGF5SW5mbyk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiBkYXlJbmZvKSB7XG4gICAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZSh0aGlzLnZhbHVlLnZhbHVlT2YoKSk7XG4gICAgICBzZWxlY3RlZERhdGUuc2V0RGF0ZShkYXlJbmZvLmRheSk7XG5cbiAgICAgIHRoaXMudmFsdWUgPSBuZXcgRGF0ZShzZWxlY3RlZERhdGUudmFsdWVPZigpKTtcblxuICAgICAgdGhpcy5jaGFuZ2UuZW1pdChzZWxlY3RlZERhdGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb250cm9scyB0aGUgY2xpY2sgZXZlbnQgb2YgdGhlIG1vbnRoLlxuICAgKi9cbiAgb25Nb250aENsaWNrKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5tb250aENsaWNrLmVtaXQodGhpcyk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIFJlcHJlc2VudHMgaW5mb3JtYXRpb24gYWJvdXQgb25lXG4gKiBkYXkgb2YgdGhlIG1vbnRoLlxuICovXG5leHBvcnQgY2xhc3MgRGF5SW5mbyB7XG4gICAgaXNUb2RheTogYm9vbGVhbjtcbiAgICBpc1NlbGVjdGVkOiBib29sZWFuO1xuICAgIGRheTogbnVtYmVyO1xuICAgIGRhdGU6IERhdGU7XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQnJvd3Nlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xuaW1wb3J0IHsgTW9udGhDYWxlbmRhckNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9tb250aC1jYWxlbmRhci9tb250aC1jYWxlbmRhci5jb21wb25lbnQnO1xuaW1wb3J0IHsgTW9udGhDYXB0aW9uVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZXMvbW9udGgtY2FwdGlvbi10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgRGF5T2ZXZWVrQ2FwdGlvblRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi9kaXJlY3RpdmVzL2RheS1vZi13ZWVrLWNhcHRpb24tdGVtcGxhdGUuZGlyZWN0aXZlJztcbmltcG9ydCB7IERheVRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi9kaXJlY3RpdmVzL2RheS10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBCcm93c2VyTW9kdWxlLFxuICAgIEZvcm1zTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW1xuICAgIE1vbnRoQ2FsZW5kYXJDb21wb25lbnQsXG4gICAgTW9udGhDYXB0aW9uVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgRGF5T2ZXZWVrQ2FwdGlvblRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIERheVRlbXBsYXRlRGlyZWN0aXZlXG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBNb250aENhbGVuZGFyQ29tcG9uZW50LFxuICAgIE1vbnRoQ2FwdGlvblRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIERheU9mV2Vla0NhcHRpb25UZW1wbGF0ZURpcmVjdGl2ZSxcbiAgICBEYXlUZW1wbGF0ZURpcmVjdGl2ZVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIE1vbnRoQ2FsZW5kYXJNb2R1bGUgeyB9XG4iXSwibmFtZXMiOlsiRGlyZWN0aXZlIiwiTkdfVkFMVUVfQUNDRVNTT1IiLCJmb3J3YXJkUmVmIiwiRXZlbnRFbWl0dGVyIiwiQ29tcG9uZW50IiwiQ29udGVudENoaWxkIiwiVGVtcGxhdGVSZWYiLCJPdXRwdXQiLCJJbnB1dCIsIk5nTW9kdWxlIiwiQnJvd3Nlck1vZHVsZSIsIkZvcm1zTW9kdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBR0EsTUFBYSxTQUFTLEdBQUc7TUFDckIsUUFBUTtNQUNSLFFBQVE7TUFDUixTQUFTO01BQ1QsV0FBVztNQUNYLFVBQVU7TUFDVixRQUFRO01BQ1IsVUFBVTtHQUNiLENBQUM7Ozs7Ozs7O01DUEEsU0FBVTtNQUNWLFNBQVU7TUFDVixVQUFXO01BQ1gsWUFBYTtNQUNiLFdBQVk7TUFDWixTQUFVO01BQ1YsV0FBWTs7c0JBTlosTUFBTTtzQkFDTixNQUFNO3NCQUNOLE9BQU87c0JBQ1AsU0FBUztzQkFDVCxRQUFRO3NCQUNSLE1BQU07c0JBQ04sUUFBUTs7Ozs7Ozs7OztFQ05WOzs7TUFBQTs7Ozs7Ozs7Ozs7Ozs7OztNQVVXLGdCQUFPOzs7Ozs7O1VBQWQsVUFBZSxJQUFVLEVBQUUsSUFBWTs7Y0FDbkMsSUFBTSxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7Y0FDM0MsU0FBUyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7Y0FDOUMsT0FBTyxTQUFTLENBQUM7V0FDcEI7Ozs7Ozs7Ozs7Ozs7O01BUU0sc0JBQWE7Ozs7Ozs7VUFBcEIsVUFBcUIsSUFBVSxFQUFFLElBQVk7Y0FDekMsT0FBTyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO1dBQ3hDOzs7Ozs7Ozs7Ozs7TUFPTSxrQkFBUzs7Ozs7O1VBQWhCLFVBQWlCLElBQVUsRUFBRSxN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