import { Directive, Component, EventEmitter, forwardRef, Input, Output, ContentChild, TemplateRef, NgModule } from '@angular/core';
import { NG_VALUE_ACCESSOR, FormsModule } from '@angular/forms';
import { BrowserModule } from '@angular/platform-browser';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** *
 * Names of the days of the week in English.
  @type {?} */
var DAY_NAMES = [
    'Sunday',
    'Monday',
    'Tuesday',
    'Wednesday',
    'Thursday',
    'Friday',
    'Saturday'
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @enum {number} */
var DayOfWeek = {
    Sunday: 0,
    Monday: 1,
    Tuesday: 2,
    Wednesday: 3,
    Thursday: 4,
    Friday: 5,
    Saturday: 6,
};
DayOfWeek[DayOfWeek.Sunday] = 'Sunday';
DayOfWeek[DayOfWeek.Monday] = 'Monday';
DayOfWeek[DayOfWeek.Tuesday] = 'Tuesday';
DayOfWeek[DayOfWeek.Wednesday] = 'Wednesday';
DayOfWeek[DayOfWeek.Thursday] = 'Thursday';
DayOfWeek[DayOfWeek.Friday] = 'Friday';
DayOfWeek[DayOfWeek.Saturday] = 'Saturday';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Contains several functions to work with
 * dates in JS.
 */
var /**
 * Contains several functions to work with
 * dates in JS.
 */
DateMath = /** @class */ (function () {
    function DateMath() {
    }
    /**
     * Adds days to the specified date.
     * @param date Date that will be increased.
     * @param days Number of days to add to the specified
     * date.
     */
    /**
     * Adds days to the specified date.
     * @param {?} date Date that will be increased.
     * @param {?} days Number of days to add to the specified
     * date.
     * @return {?}
     */
    DateMath.addDays = /**
     * Adds days to the specified date.
     * @param {?} date Date that will be increased.
     * @param {?} days Number of days to add to the specified
     * date.
     * @return {?}
     */
    function (date, days) {
        /** @type {?} */
        var daysAdded = new Date(date.valueOf());
        daysAdded.setDate(daysAdded.getDate() + days);
        return daysAdded;
    };
    /**
     * Substract days to the specified date.
     * @param date Date that will be decreased.
     * @param days Number of days to substract from
     * the specified date.
     */
    /**
     * Substract days to the specified date.
     * @param {?} date Date that will be decreased.
     * @param {?} days Number of days to substract from
     * the specified date.
     * @return {?}
     */
    DateMath.substractDays = /**
     * Substract days to the specified date.
     * @param {?} date Date that will be decreased.
     * @param {?} days Number of days to substract from
     * the specified date.
     * @return {?}
     */
    function (date, days) {
        return DateMath.addDays(date, -days);
    };
    /**
     * Adds a number of months to the specified date.
     * @param date Date that will be increased.
     * @param months Months to add.
     */
    /**
     * Adds a number of months to the specified date.
     * @param {?} date Date that will be increased.
     * @param {?} months Months to add.
     * @return {?}
     */
    DateMath.addMonths = /**
     * Adds a number of months to the specified date.
     * @param {?} date Date that will be increased.
     * @param {?} months Months to add.
     * @return {?}
     */
    function (date, months) {
        /** @type {?} */
        var monthsAdded = new Date(date.valueOf());
        monthsAdded.setMonth(date.getMonth() + months);
        return monthsAdded;
    };
    /**
     * Substracts a number of months from the specified date.
     * @param date Date that will be decreased.
     * @param months Months to substract.
     */
    /**
     * Substracts a number of months from the specified date.
     * @param {?} date Date that will be decreased.
     * @param {?} months Months to substract.
     * @return {?}
     */
    DateMath.substractMonths = /**
     * Substracts a number of months from the specified date.
     * @param {?} date Date that will be decreased.
     * @param {?} months Months to substract.
     * @return {?}
     */
    function (date, months) {
        /** @type {?} */
        var monthsSubstracted = new Date(date.valueOf());
        monthsSubstracted.setMonth(date.getMonth() - months);
        return monthsSubstracted;
    };
    /**
     * Gets the date corresponding to the first day
     * of the month of the specified date.
     * @param date Date.
     */
    /**
     * Gets the date corresponding to the first day
     * of the month of the specified date.
     * @param {?} date Date.
     * @return {?}
     */
    DateMath.getFirstDayOfMonth = /**
     * Gets the date corresponding to the first day
     * of the month of the specified date.
     * @param {?} date Date.
     * @return {?}
     */
    function (date) {
        /** @type {?} */
        var firstDay = new Date();
        firstDay.setFullYear(date.getFullYear(), date.getMonth(), 1);
        return firstDay;
    };
    /**
     * Gets the date corresponding to the last day
     * of the month of the specified date.
     * @param date Date.
     */
    /**
     * Gets the date corresponding to the last day
     * of the month of the specified date.
     * @param {?} date Date.
     * @return {?}
     */
    DateMath.getLastDayOfMonth = /**
     * Gets the date corresponding to the last day
     * of the month of the specified date.
     * @param {?} date Date.
     * @return {?}
     */
    function (date) {
        /** @type {?} */
        var lastDay = new Date();
        lastDay.setFullYear(date.getFullYear(), date.getMonth() + 1, 0);
        return lastDay;
    };
    return DateMath;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Creates a view of a month.
 */
var /**
 * Creates a view of a month.
 */
MonthView = /** @class */ (function () {
    /**
     * Creates a new instance of MonthView.
     * @param date Date of the month.
     */
    function MonthView(date) {
        this.date = date;
        this.WEEKS_PER_MONTH = 5;
        this.DAYS_PER_WEEK = 7;
    }
    /**
     * Creates the grid corresponding to the month specified
     * by the date.
     * @param completeHoles Indicates if the beginning and end
     * of the grid should be completed with the days of the
     * adjacent months.
     * @param weekStart Day of week to be considered the beginning
     * of the week.
     */
    /**
     * Creates the grid corresponding to the month specified
     * by the date.
     * @param {?=} completeHoles Indicates if the beginning and end
     * of the grid should be completed with the days of the
     * adjacent months.
     * @param {?=} weekStart Day of week to be considered the beginning
     * of the week.
     * @return {?}
     */
    MonthView.prototype.createView = /**
     * Creates the grid corresponding to the month specified
     * by the date.
     * @param {?=} completeHoles Indicates if the beginning and end
     * of the grid should be completed with the days of the
     * adjacent months.
     * @param {?=} weekStart Day of week to be considered the beginning
     * of the week.
     * @return {?}
     */
    function (completeHoles, weekStart) {
        if (completeHoles === void 0) { completeHoles = false; }
        if (weekStart === void 0) { weekStart = DayOfWeek.Monday; }
        /** @type {?} */
        var currentMonthGrid = this.createGrid(this.date, weekStart);
        if (completeHoles) {
            /** @type {?} */
            var needsToBeFilledFromBeginning = !!!currentMonthGrid[0][0];
            if (needsToBeFilledFromBeginning) {
                /** @type {?} */
                var lastMonth = DateMath.substractMonths(this.date, 1);
                /** @type {?} */
                var lastDayOfLastMonth = DateMath.getLastDayOfMonth(lastMonth).getDate();
                /** @type {?} */
                var firstDayOfCurrentMonth = DateMath.getFirstDayOfMonth(this.date);
                /** @type {?} */
                var daysToPickFromLastMonth = firstDayOfCurrentMonth.getDay() - weekStart.valueOf();
                for (var i = 0; i < daysToPickFromLastMonth; i++) {
                    /** @type {?} */
                    var currentDayOfMonth = lastDayOfLastMonth - (daysToPickFromLastMonth - (i + 1));
                    /** @type {?} */
                    var currentDate = new Date(lastMonth.getFullYear(), lastMonth.getMonth(), currentDayOfMonth);
                    currentMonthGrid[0][i] = {
                        isToday: false,
                        isSelected: false,
                        day: currentDayOfMonth,
                        date: currentDate
                    };
                }
            }
            /** @type {?} */
            var fillingDays = 1;
            for (var week = 0; week < this.WEEKS_PER_MONTH; week++) {
                for (var dayOfWeek = 0; dayOfWeek < this.DAYS_PER_WEEK; dayOfWeek++) {
                    if (!!!currentMonthGrid[week][dayOfWeek]) {
                        /** @type {?} */
                        var fillingDates = new Date(this.date.getFullYear(), this.date.getMonth(), fillingDays++);
                        currentMonthGrid[week][dayOfWeek] = {
                            isToday: false,
                            isSelected: false,
                            day: fillingDays,
                            date: fillingDates
                        };
                    }
                }
            }
        }
        return currentMonthGrid;
    };
    /**
     * Creates the grid corresponding to the month specified
     * by the date.
     * @param {?} date Date to use.
     * @param {?=} weekStart Day of week which will be considered
     * the beginning of the week.
     * @return {?}
     */
    MonthView.prototype.createGrid = /**
     * Creates the grid corresponding to the month specified
     * by the date.
     * @param {?} date Date to use.
     * @param {?=} weekStart Day of week which will be considered
     * the beginning of the week.
     * @return {?}
     */
    function (date, weekStart) {
        if (weekStart === void 0) { weekStart = DayOfWeek.Monday; }
        /** @type {?} */
        var grid = this.initGrid();
        /** @type {?} */
        var firstDayOfWeek = DateMath.getFirstDayOfMonth(date).getDay() - weekStart.valueOf();
        /** @type {?} */
        var lastDay = DateMath.getLastDayOfMonth(date).getDate();
        /** @type {?} */
        var today = new Date();
        /** @type {?} */
        var dayOfWeek = firstDayOfWeek;
        /** @type {?} */
        var currentDayOfMonth = 1;
        for (var week = 0; week < this.WEEKS_PER_MONTH; week++) {
            for (; dayOfWeek < this.DAYS_PER_WEEK && currentDayOfMonth <= lastDay; dayOfWeek++) {
                /** @type {?} */
                var todaySameYear = today.getFullYear() === this.date.getFullYear();
                /** @type {?} */
                var todaySameMonth = today.getMonth() === this.date.getMonth();
                /** @type {?} */
                var todaySameDay = today.getDate() === currentDayOfMonth;
                /** @type {?} */
                var currentDate = new Date(this.date.getFullYear(), this.date.getMonth(), currentDayOfMonth);
                grid[week][dayOfWeek] = {
                    isToday: todaySameYear && todaySameMonth && todaySameDay,
                    isSelected: this.date.getDate() === currentDayOfMonth,
                    day: currentDayOfMonth,
                    date: currentDate
                };
                currentDayOfMonth++;
            }
            dayOfWeek = 0;
        }
        return grid;
    };
    /**
     * Initializes the grid that contains
     * the info about the "shape" of the
     * month.
     * @return {?}
     */
    MonthView.prototype.initGrid = /**
     * Initializes the grid that contains
     * the info about the "shape" of the
     * month.
     * @return {?}
     */
    function () {
        /** @type {?} */
        var defaultEmpty = undefined;
        /** @type {?} */
        var grid = [
            new Array(this.DAYS_PER_WEEK).fill(defaultEmpty),
            new Array(this.DAYS_PER_WEEK).fill(defaultEmpty),
            new Array(this.DAYS_PER_WEEK).fill(defaultEmpty),
            new Array(this.DAYS_PER_WEEK).fill(defaultEmpty),
            new Array(this.DAYS_PER_WEEK).fill(defaultEmpty)
        ];
        return grid;
    };
    return MonthView;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Directive to select the template to use
 * for the day cell.
 */
var DayTemplateDirective = /** @class */ (function () {
    function DayTemplateDirective() {
    }
    DayTemplateDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[scDayTemplate]'
                },] },
    ];
    /** @nocollapse */
    DayTemplateDirective.ctorParameters = function () { return []; };
    return DayTemplateDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var DayOfWeekCaptionTemplateDirective = /** @class */ (function () {
    function DayOfWeekCaptionTemplateDirective() {
    }
    DayOfWeekCaptionTemplateDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[scDayOfWeekCaptionTemplate]'
                },] },
    ];
    /** @nocollapse */
    DayOfWeekCaptionTemplateDirective.ctorParameters = function () { return []; };
    return DayOfWeekCaptionTemplateDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var MonthCaptionTemplateDirective = /** @class */ (function () {
    function MonthCaptionTemplateDirective() {
    }
    MonthCaptionTemplateDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[scMonthCaptionTemplate]'
                },] },
    ];
    /** @nocollapse */
    MonthCaptionTemplateDirective.ctorParameters = function () { return []; };
    return MonthCaptionTemplateDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Default formatter for the captions of the days
 * of the week.
 * @param {?} firstDayOfWeek
 * @return {?}
 */
function defaultDayOfWeekCaptionFormatterFactory(firstDayOfWeek) {
    return function (dayOfWeek) {
        /** @type {?} */
        var formattedDayNames = DAY_NAMES.map(function (dayName) { return formatDayName(dayName); });
        /** @type {?} */
        var reordered = reorderDays(formattedDayNames, firstDayOfWeek);
        return reordered[dayOfWeek.valueOf()];
    };
}
/**
 * Applies formatting to the name of the day.
 * @param {?} dayName Name of the day.
 * @return {?}
 */
function formatDayName(dayName) {
    /** @type {?} */
    var newDayName = dayName.substr(0, 1).toUpperCase() + dayName.substr(1, 1).toLowerCase();
    return newDayName;
}
/**
 * Reorders the array of names so the first index
 * corresponds with the name of the first day of
 * the week.
 * @param {?} dayNames Array with the names of the days
 * of the week.
 * @param {?} firstDayOfWeek First day of the week.
 * @return {?}
 */
function reorderDays(dayNames, firstDayOfWeek) {
    /** @type {?} */
    var dayCount = DAY_NAMES.length;
    /** @type {?} */
    var dayIndex = firstDayOfWeek.valueOf();
    /** @type {?} */
    var reordered = (new Array(dayCount)).fill(0);
    for (var i = 0; i < dayCount; i++) {
        /** @type {?} */
        var newPosition = (i + dayIndex) % dayCount;
        reordered[i] = dayNames[newPosition];
    }
    return reordered;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** *
 * Month calendar provider.
  @type {?} */
var MONTH_CALENDAR_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(function () { return MonthCalendarComponent; }),
    multi: true
};
/**
 * Control that represents a calendar.
 */
var MonthCalendarComponent = /** @class */ (function () {
    function MonthCalendarComponent() {
        /**
         * Event raised when the user selects a date.
         */
        this.change = new EventEmitter();
        /**
         * Event raised when the user clicks the calendar.
         */
        this.monthClick = new EventEmitter();
        /**
         * Sets if the control should be in a
         * disabled state.
         */
        this.disabled = false;
        /**
         * Date to show.
         */
        this._value = new Date();
        /**
         * Specifies how a day cell should grow.
         */
        this._grow = { mode: 'stretch' };
        this.defaultFirstDayOfWeek = DayOfWeek.Sunday;
        this.defaultDayOfWeekCaptionFormatter = defaultDayOfWeekCaptionFormatterFactory(this.defaultFirstDayOfWeek);
        /**
         * First day of the week.
         */
        this._firstDayOfWeek = this.defaultFirstDayOfWeek;
        /**
         * CSS class for the month.
         */
        this.monthClass = 'sc-month';
        /**
         * CSS class for the disabled state.
         */
        this.disabledClass = 'sc-month--disabled';
        /**
         * CSS class for the month caption.
         */
        this.monthCaptionClass = 'sc-month__caption';
        /**
         * CSS class for the day of the week captions.
         */
        this.dayOfWeekCaptionClass = 'sc-month__week-caption';
        /**
         * CSS class for the day captions.
         */
        this.dayCaptionClass = 'sc-month__day';
        /**
         * CSS class for the current day.
         */
        this.currentDayClass = 'sc-month__day--today';
        /**
         * CSS class for the day when the state is disabled.
         */
        this.disabledDayClass = 'sc-month__day--disabled';
        /**
         * CSS class for the selected day.
         */
        this.selectedDayClass = 'sc-month__day--selected';
        this.defaultMonthCaptionFormatter = function (date) { return date.toDateString(); };
        this.defaultDayFormatter = function (day) { return day ? day.day.toString() : ''; };
        this.onChange = function (date) { };
        this.onTouched = function () { };
    }
    Object.defineProperty(MonthCalendarComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} date
         * @return {?}
         */
        function (date) {
            this.writeValue(date);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MonthCalendarComponent.prototype, "grow", {
        get: /**
         * @return {?}
         */
        function () {
            return this._grow;
        },
        set: /**
         * @param {?} mode
         * @return {?}
         */
        function (mode) {
            if (mode) {
                this._grow = mode;
            }
            else {
                this._grow = { mode: 'stretch' };
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MonthCalendarComponent.prototype, "firstDayOfWeek", {
        get: /**
         * @return {?}
         */
        function () {
            return this._firstDayOfWeek;
        },
        set: /**
         * @param {?} dayOfWeek
         * @return {?}
         */
        function (dayOfWeek) {
            this._firstDayOfWeek = dayOfWeek;
            this.defaultDayOfWeekCaptionFormatter = defaultDayOfWeekCaptionFormatterFactory(this._firstDayOfWeek);
            this.refresh();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MonthCalendarComponent.prototype, "dayFormatter", {
        get: /**
         * @return {?}
         */
        function () {
            return this._dayFormatter;
        },
        set: /**
         * @param {?} formatter
         * @return {?}
         */
        function (formatter) {
            this._dayFormatter = formatter;
            this.refresh();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MonthCalendarComponent.prototype, "dayOfWeekCaptionFormatter", {
        get: /**
         * @return {?}
         */
        function () {
            return this._dayOfWeekCaptionFormatter;
        },
        set: /**
         * @param {?} formatter
         * @return {?}
         */
        function (formatter) {
            this._dayOfWeekCaptionFormatter = formatter;
            this.refresh();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MonthCalendarComponent.prototype, "monthCaptionFormatter", {
        get: /**
         * @return {?}
         */
        function () {
            return this._monthCaptionFormatter;
        },
        set: /**
         * @param {?} formatter
         * @return {?}
         */
        function (formatter) {
            this._monthCaptionFormatter = formatter;
            this.refresh();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Initializes the component.
     */
    /**
     * Initializes the component.
     * @return {?}
     */
    MonthCalendarComponent.prototype.ngOnInit = /**
     * Initializes the component.
     * @return {?}
     */
    function () {
        this.refresh();
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MonthCalendarComponent.prototype.writeValue = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        if (date) {
            this._value = date;
            this.refresh();
            this.onChange(date);
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    MonthCalendarComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    MonthCalendarComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onTouched = fn;
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    MonthCalendarComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        this.disabled = isDisabled;
    };
    /**
     * Refreshes the component.
     * @return {?}
     */
    MonthCalendarComponent.prototype.refresh = /**
     * Refreshes the component.
     * @return {?}
     */
    function () {
        this.refreshMonthCaption(this.value);
        this.refreshDayOfWeekCaptions();
        this.refreshView(this.value);
    };
    /**
     * Refreshes the month caption.
     * @param {?} date Date.
     * @return {?}
     */
    MonthCalendarComponent.prototype.refreshMonthCaption = /**
     * Refreshes the month caption.
     * @param {?} date Date.
     * @return {?}
     */
    function (date) {
        if (this.monthCaptionFormatter) {
            this.monthCaption = this.monthCaptionFormatter(date);
        }
        else {
            this.monthCaption = this.defaultMonthCaptionFormatter(date);
        }
    };
    /**
     * Refreshes the day of week captions.
     * @return {?}
     */
    MonthCalendarComponent.prototype.refreshDayOfWeekCaptions = /**
     * Refreshes the day of week captions.
     * @return {?}
     */
    function () {
        /** @type {?} */
        var dayCaptions = [];
        /** @type {?} */
        var dayOfWeekFormatter = this.dayOfWeekCaptionFormatter ?
            this.dayOfWeekCaptionFormatter :
            this.defaultDayOfWeekCaptionFormatter;
        for (var i = 0; i < DAY_NAMES.length; i++) {
            dayCaptions.push(dayOfWeekFormatter(i));
        }
        this.daysOfWeekCaptions = dayCaptions;
    };
    /**
     * Refreshes the calendar view.
     * @param {?} date Date.
     * @return {?}
     */
    MonthCalendarComponent.prototype.refreshView = /**
     * Refreshes the calendar view.
     * @param {?} date Date.
     * @return {?}
     */
    function (date) {
        this.view = new MonthView(date).createView(false, this.firstDayOfWeek);
    };
    /**
     * Gets the CSS classes to apply to the month.
     */
    /**
     * Gets the CSS classes to apply to the month.
     * @return {?}
     */
    MonthCalendarComponent.prototype.getClassForMonth = /**
     * Gets the CSS classes to apply to the month.
     * @return {?}
     */
    function () {
        /** @type {?} */
        var classesToApply = this.monthClass;
        if (this.disabled) {
            classesToApply = this.monthClass + ' ' + this.disabledClass;
        }
        return classesToApply;
    };
    /**
     * Gets the CSS class applicable to
     * the specified day.
     * @param day Day.
     */
    /**
     * Gets the CSS class applicable to
     * the specified day.
     * @param {?=} day Day.
     * @return {?}
     */
    MonthCalendarComponent.prototype.getClassForDay = /**
     * Gets the CSS class applicable to
     * the specified day.
     * @param {?=} day Day.
     * @return {?}
     */
    function (day) {
        /** @type {?} */
        var dayClassToApply = '';
        if (day) {
            if (day.day === this.value.getDate()) {
                dayClassToApply = this.selectedDayClass;
            }
            else if (day.isToday) {
                dayClassToApply = this.currentDayClass;
            }
            else if (this.customDayClass) {
                /** @type {?} */
                var date = new Date(this.value.valueOf());
                date.setDate(day.day);
                dayClassToApply = this.customDayClass(day);
            }
            if (this.disabled) {
                dayClassToApply = dayClassToApply + ' ' + this.disabledDayClass;
            }
            return this.dayCaptionClass + ' ' + dayClassToApply;
        }
        else {
            return this.dayCaptionClass;
        }
    };
    /**
     * Gets a formatted string corresponding
     * to the specified day.
     * @param day Day to format.
     */
    /**
     * Gets a formatted string corresponding
     * to the specified day.
     * @param {?} day Day to format.
     * @return {?}
     */
    MonthCalendarComponent.prototype.getFormattedDay = /**
     * Gets a formatted string corresponding
     * to the specified day.
     * @param {?} day Day to format.
     * @return {?}
     */
    function (day) {
        if (this.dayFormatter) {
            return this.dayFormatter(day);
        }
        else {
            return this.defaultDayFormatter(day);
        }
    };
    /**
     * Controls the click event of a day cell.
     * @param dayInfo Info about the selected day.
     */
    /**
     * Controls the click event of a day cell.
     * @param {?} dayInfo Info about the selected day.
     * @return {?}
     */
    MonthCalendarComponent.prototype.onDayClick = /**
     * Controls the click event of a day cell.
     * @param {?} dayInfo Info about the selected day.
     * @return {?}
     */
    function (dayInfo) {
        if (!this.disabled && dayInfo) {
            /** @type {?} */
            var selectedDate = new Date(this.value.valueOf());
            selectedDate.setDate(dayInfo.day);
            this.value = new Date(selectedDate.valueOf());
            this.change.emit(selectedDate);
        }
    };
    /**
     * Controls the click event of the month.
     */
    /**
     * Controls the click event of the month.
     * @return {?}
     */
    MonthCalendarComponent.prototype.onMonthClick = /**
     * Controls the click event of the month.
     * @return {?}
     */
    function () {
        if (!this.disabled) {
            this.monthClick.emit(this);
        }
    };
    MonthCalendarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'sc-month-calendar',
                    template: "<!-- Month -->\n<div (click)=\"onMonthClick()\"\n     [ngClass]=\"['column', grow.mode == 'stretch' ? 'stretch-vertically' : '', getClassForMonth()]\">\n\n  <!-- Month caption -->\n  <div class=\"row\">\n\n    <!-- Month caption cell -->\n    <div class=\"w-100\"\n         [class.label]=\"grow.mode != 'mixed'\"\n         [class.ratio-height]=\"grow.mode == 'proportional'\"\n         [class.stretch-horizontally]=\"grow.mode == 'stretch' || grow.mode == 'mixed'\">\n\n      <!-- Month caption cell content -->\n      <div [class.label__content]=\"grow.mode != 'mixed'\">\n\n        <ng-container *ngTemplateOutlet=\"monthTemplate ? monthTemplate : defaultMonthTemplate; context: { $implicit: value }\"></ng-container>\n\n      </div>\n    </div>\n  </div>\n\n  <!-- Week captions -->\n  <div class=\"row\">\n\n    <!-- Week captions cell -->\n    <div [class.label]=\"grow.mode != 'mixed'\"\n         [class.ratio-square]=\"grow.mode == 'proportional'\"\n         [class.stretch-horizontally]=\"grow.mode == 'stretch' || grow.mode == 'mixed'\"\n         *ngFor=\"let dayOfWeekCaption of daysOfWeekCaptions; let i = index\">\n\n      <!-- Week caption cell content -->\n      <div [class.label__content]=\"grow.mode != 'mixed'\">\n\n        <ng-container *ngTemplateOutlet=\"dayOfWeekTemplate ? dayOfWeekTemplate : defaultDayOfWeekTemplate; context: { $implicit: dayOfWeekCaption, dayOfWeekIndex: i }\"></ng-container>\n\n      </div>\n    </div>\n  </div>\n\n  <!-- Days -->\n  <div class=\"row\"\n       *ngFor=\"let week of view\">\n\n    <!-- Day cell -->\n    <div (click)=\"onDayClick(day)\"\n         class=\"ratio-square label\"\n         [class.ratio-square]=\"grow.mode == 'proportional' || grow.mode == 'mixed'\"\n         [class.stretch-horizontally]=\"grow.mode == 'stretch'\"\n         *ngFor=\"let day of week\">\n\n      <!-- Day content -->\n      <div class=\"label__content\">\n\n        <ng-container *ngTemplateOutlet=\"dayTemplate ? dayTemplate : defaultDayTemplate; context: { $implicit: day }\"></ng-container>\n\n      </div>\n\n    </div>\n\n  </div>\n\n</div>\n\n\n\n<!-- Templates -->\n\n<!-- Day template -->\n<ng-template #defaultDayTemplate\n             let-day>\n  <div class=\"flex-expanded-container\">\n    <div [ngClass]=\"['flex-expand', getClassForDay(day)]\">{{ getFormattedDay(day) }}</div>\n  </div>\n</ng-template>\n\n<!-- Day of week cells template -->\n<ng-template #defaultDayOfWeekTemplate\n             let-dayOfWeek\n             let-dayOfWeekIndex=\"dayOfWeekIndex\">\n  <div [class.flex-expanded-container]=\"grow.mode != 'mixed'\">\n    <div [ngClass]=\"['flex-expand', 'flex-centered', dayOfWeekCaptionClass]\">\n      {{ dayOfWeek }}\n    </div>\n  </div>\n</ng-template>\n\n<!-- Month cell template -->\n<ng-template #defaultMonthTemplate\n             let-date>\n  <div [class.flex-expanded-container]=\"grow.mode != 'mixed'\">\n    <div [ngClass]=\"['flex-expand', 'flex-centered', monthCaptionClass]\">\n      {{ monthCaption }}\n    </div>\n  </div>\n</ng-template>\n",
                    styles: [".column{display:flex;flex-flow:column;flex:1}.row{display:flex;flex:1}.label{position:relative}.label__content{position:absolute;top:0;left:0;bottom:0;right:0}.flex-expanded-container{display:flex;position:absolute;width:100%;height:100%}.flex-expand{flex:1}.flex-centered{display:flex;align-items:center;justify-content:center}.ratio-height{padding-bottom:14.28571%}.ratio-square{padding-bottom:14.28571%;width:14.28571%}.stretch-vertically{height:100%}.stretch-horizontally{width:14.28571%}.fixed-height{display:flex;flex:1}.w-100{width:100%}.sc-month{font-size:2rem}.sc-month--disabled{opacity:.25}.sc-month__caption,.sc-month__week-caption{border:1px solid #000;font-weight:700}.sc-month__day{border:1px solid #000;cursor:pointer}.sc-month__day--disabled{cursor:auto}.sc-month__day--today{background:pink}.sc-month__day--selected{background:#6495ed}"],
                    providers: [MONTH_CALENDAR_VALUE_ACCESSOR]
                },] },
    ];
    MonthCalendarComponent.propDecorators = {
        dayTemplate: [{ type: ContentChild, args: [DayTemplateDirective, { read: TemplateRef },] }],
        dayOfWeekTemplate: [{ type: ContentChild, args: [DayOfWeekCaptionTemplateDirective, { read: TemplateRef },] }],
        monthTemplate: [{ type: ContentChild, args: [MonthCaptionTemplateDirective, { read: TemplateRef },] }],
        change: [{ type: Output, args: ['change',] }],
        monthClick: [{ type: Output, args: ['monthClick',] }],
        disabled: [{ type: Input }],
        value: [{ type: Input }],
        grow: [{ type: Input }],
        firstDayOfWeek: [{ type: Input }],
        dayFormatter: [{ type: Input }],
        dayOfWeekCaptionFormatter: [{ type: Input }],
        monthCaptionFormatter: [{ type: Input }],
        customDayClass: [{ type: Input }],
        monthClass: [{ type: Input }],
        disabledClass: [{ type: Input }],
        monthCaptionClass: [{ type: Input }],
        dayOfWeekCaptionClass: [{ type: Input }],
        dayCaptionClass: [{ type: Input }],
        currentDayClass: [{ type: Input }],
        disabledDayClass: [{ type: Input }],
        selectedDayClass: [{ type: Input }]
    };
    return MonthCalendarComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Represents information about one
 * day of the month.
 */
var  /**
 * Represents information about one
 * day of the month.
 */
DayInfo = /** @class */ (function () {
    function DayInfo() {
    }
    return DayInfo;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var MonthCalendarModule = /** @class */ (function () {
    function MonthCalendarModule() {
    }
    MonthCalendarModule.decorators = [
        { type: NgModule, args: [{
                    imports: [
                        BrowserModule,
                        FormsModule
                    ],
                    declarations: [
                        MonthCalendarComponent,
                        MonthCaptionTemplateDirective,
                        DayOfWeekCaptionTemplateDirective,
                        DayTemplateDirective
                    ],
                    exports: [
                        MonthCalendarComponent,
                        MonthCaptionTemplateDirective,
                        DayOfWeekCaptionTemplateDirective,
                        DayTemplateDirective
                    ]
                },] },
    ];
    return MonthCalendarModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { MONTH_CALENDAR_VALUE_ACCESSOR, MonthCalendarComponent, MonthCaptionTemplateDirective, DayOfWeekCaptionTemplateDirective, DayTemplateDirective, DayInfo, DayOfWeek, MonthCalendarModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2ltcGxlLWFuZ3VsYXItY2FsZW5kYXIuanMubWFwIiwic291cmNlcyI6WyJuZzovL3NpbXBsZS1hbmd1bGFyLWNhbGVuZGFyL2xpYi9tb2RlbHMvZGF5LW5hbWVzLnRzIiwibmc6Ly9zaW1wbGUtYW5ndWxhci1jYWxlbmRhci9saWIvbW9kZWxzL2RheS1vZi13ZWVrLnRzIiwibmc6Ly9zaW1wbGUtYW5ndWxhci1jYWxlbmRhci9saWIvbW9kZWxzL2RhdGVzL2RhdGUtbWF0aC50cyIsIm5nOi8vc2ltcGxlLWFuZ3VsYXItY2FsZW5kYXIvbGliL21vZGVscy92aWV3cy9tb3RoLXZpZXcudHMiLCJuZzovL3NpbXBsZS1hbmd1bGFyLWNhbGVuZGFyL2xpYi9kaXJlY3RpdmVzL2RheS10ZW1wbGF0ZS5kaXJlY3RpdmUudHMiLCJuZzovL3NpbXBsZS1hbmd1bGFyLWNhbGVuZGFyL2xpYi9kaXJlY3RpdmVzL2RheS1vZi13ZWVrLWNhcHRpb24tdGVtcGxhdGUuZGlyZWN0aXZlLnRzIiwibmc6Ly9zaW1wbGUtYW5ndWxhci1jYWxlbmRhci9saWIvZGlyZWN0aXZlcy9tb250aC1jYXB0aW9uLXRlbXBsYXRlLmRpcmVjdGl2ZS50cyIsIm5nOi8vc2ltcGxlLWFuZ3VsYXItY2FsZW5kYXIvbGliL21vZGVscy9mb3JtYXR0ZXJzL2RheS1vZi13ZWVrLWNhcHRpb24tZm9ybWF0dGVyLnRzIiwibmc6Ly9zaW1wbGUtYW5ndWxhci1jYWxlbmRhci9saWIvY29tcG9uZW50cy9tb250aC1jYWxlbmRhci9tb250aC1jYWxlbmRhci5jb21wb25lbnQudHMiLCJuZzovL3NpbXBsZS1hbmd1bGFyLWNhbGVuZGFyL2xpYi9tb2RlbHMvZGF5LWluZm8udHMiLCJuZzovL3NpbXBsZS1hbmd1bGFyLWNhbGVuZGFyL2xpYi9tb250aC1jYWxlbmRhci5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBOYW1lcyBvZiB0aGUgZGF5cyBvZiB0aGUgd2VlayBpbiBFbmdsaXNoLlxuICovXG5leHBvcnQgY29uc3QgREFZX05BTUVTID0gW1xuICAgICdTdW5kYXknLFxuICAgICdNb25kYXknLFxuICAgICdUdWVzZGF5JyxcbiAgICAnV2VkbmVzZGF5JyxcbiAgICAnVGh1cnNkYXknLFxuICAgICdGcmlkYXknLFxuICAgICdTYXR1cmRheScgICAgXG5dOyIsIi8qKlxuICogUmVwcmVzZW50cyBhIGRheSBvZiB0aGUgd2Vlay5cbiAqL1xuZXhwb3J0IGVudW0gRGF5T2ZXZWVrIHtcbiAgU3VuZGF5ID0gMCxcbiAgTW9uZGF5ID0gMSxcbiAgVHVlc2RheSA9IDIsXG4gIFdlZG5lc2RheSA9IDMsXG4gIFRodXJzZGF5ID0gNCxcbiAgRnJpZGF5ID0gNSxcbiAgU2F0dXJkYXkgPSA2XG59XG4iLCIvKipcbiAqIENvbnRhaW5zIHNldmVyYWwgZnVuY3Rpb25zIHRvIHdvcmsgd2l0aFxuICogZGF0ZXMgaW4gSlMuXG4gKi9cbmV4cG9ydCBjbGFzcyBEYXRlTWF0aCB7XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICAgIC8qKlxuICAgICAqIEFkZHMgZGF5cyB0byB0aGUgc3BlY2lmaWVkIGRhdGUuXG4gICAgICogQHBhcmFtIGRhdGUgRGF0ZSB0aGF0IHdpbGwgYmUgaW5jcmVhc2VkLlxuICAgICAqIEBwYXJhbSBkYXlzIE51bWJlciBvZiBkYXlzIHRvIGFkZCB0byB0aGUgc3BlY2lmaWVkXG4gICAgICogZGF0ZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgYWRkRGF5cyhkYXRlOiBEYXRlLCBkYXlzOiBudW1iZXIpOiBEYXRlIHtcbiAgICAgICAgY29uc3QgZGF5c0FkZGVkID0gbmV3IERhdGUoZGF0ZS52YWx1ZU9mKCkpO1xuICAgICAgICBkYXlzQWRkZWQuc2V0RGF0ZShkYXlzQWRkZWQuZ2V0RGF0ZSgpICsgZGF5cyk7XG4gICAgICAgIHJldHVybiBkYXlzQWRkZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3Vic3RyYWN0IGRheXMgdG8gdGhlIHNwZWNpZmllZCBkYXRlLlxuICAgICAqIEBwYXJhbSBkYXRlIERhdGUgdGhhdCB3aWxsIGJlIGRlY3JlYXNlZC5cbiAgICAgKiBAcGFyYW0gZGF5cyBOdW1iZXIgb2YgZGF5cyB0byBzdWJzdHJhY3QgZnJvbVxuICAgICAqIHRoZSBzcGVjaWZpZWQgZGF0ZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgc3Vic3RyYWN0RGF5cyhkYXRlOiBEYXRlLCBkYXlzOiBudW1iZXIpOiBEYXRlIHtcbiAgICAgICAgcmV0dXJuIERhdGVNYXRoLmFkZERheXMoZGF0ZSwgLWRheXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBudW1iZXIgb2YgbW9udGhzIHRvIHRoZSBzcGVjaWZpZWQgZGF0ZS5cbiAgICAgKiBAcGFyYW0gZGF0ZSBEYXRlIHRoYXQgd2lsbCBiZSBpbmNyZWFzZWQuXG4gICAgICogQHBhcmFtIG1vbnRocyBNb250aHMgdG8gYWRkLlxuICAgICAqL1xuICAgIHN0YXRpYyBhZGRNb250aHMoZGF0ZTogRGF0ZSwgbW9udGhzOiBudW1iZXIpOiBEYXRlIHtcbiAgICAgIGNvbnN0IG1vbnRoc0FkZGVkID0gbmV3IERhdGUoZGF0ZS52YWx1ZU9mKCkpO1xuICAgICAgbW9udGhzQWRkZWQuc2V0TW9udGgoZGF0ZS5nZXRNb250aCgpICsgbW9udGhzKTtcbiAgICAgIHJldHVybiBtb250aHNBZGRlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdWJzdHJhY3RzIGEgbnVtYmVyIG9mIG1vbnRocyBmcm9tIHRoZSBzcGVjaWZpZWQgZGF0ZS5cbiAgICAgKiBAcGFyYW0gZGF0ZSBEYXRlIHRoYXQgd2lsbCBiZSBkZWNyZWFzZWQuXG4gICAgICogQHBhcmFtIG1vbnRocyBNb250aHMgdG8gc3Vic3RyYWN0LlxuICAgICAqL1xuICAgIHN0YXRpYyBzdWJzdHJhY3RNb250aHMoZGF0ZTogRGF0ZSwgbW9udGhzOiBudW1iZXIpOiBEYXRlIHtcbiAgICAgIGNvbnN0IG1vbnRoc1N1YnN0cmFjdGVkID0gbmV3IERhdGUoZGF0ZS52YWx1ZU9mKCkpO1xuICAgICAgbW9udGhzU3Vic3RyYWN0ZWQuc2V0TW9udGgoZGF0ZS5nZXRNb250aCgpIC0gbW9udGhzKTtcbiAgICAgIHJldHVybiBtb250aHNTdWJzdHJhY3RlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBkYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGZpcnN0IGRheVxuICAgICAqIG9mIHRoZSBtb250aCBvZiB0aGUgc3BlY2lmaWVkIGRhdGUuXG4gICAgICogQHBhcmFtIGRhdGUgRGF0ZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0Rmlyc3REYXlPZk1vbnRoKGRhdGU6IERhdGUpOiBEYXRlIHtcbiAgICAgICAgY29uc3QgZmlyc3REYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBmaXJzdERheS5zZXRGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgMSk7XG4gICAgICAgIHJldHVybiBmaXJzdERheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBkYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGxhc3QgZGF5XG4gICAgICogb2YgdGhlIG1vbnRoIG9mIHRoZSBzcGVjaWZpZWQgZGF0ZS5cbiAgICAgKiBAcGFyYW0gZGF0ZSBEYXRlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRMYXN0RGF5T2ZNb250aChkYXRlOiBEYXRlKTogRGF0ZSB7XG4gICAgICAgIGNvbnN0IGxhc3REYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBsYXN0RGF5LnNldEZ1bGxZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpICsgMSwgMCk7XG4gICAgICAgIHJldHVybiBsYXN0RGF5O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IERheU9mV2VlayB9IGZyb20gJy4uL2RheS1vZi13ZWVrJztcbmltcG9ydCB7IERhdGVNYXRoIH0gZnJvbSAnLi4vZGF0ZXMvZGF0ZS1tYXRoJztcbmltcG9ydCB7IERheUluZm8gfSBmcm9tICcuLi9kYXktaW5mbyc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIHZpZXcgb2YgYSBtb250aC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vbnRoVmlldyB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBXRUVLU19QRVJfTU9OVEggPSA1O1xuICAgIHByaXZhdGUgcmVhZG9ubHkgREFZU19QRVJfV0VFSyA9IDc7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgTW9udGhWaWV3LlxuICAgKiBAcGFyYW0gZGF0ZSBEYXRlIG9mIHRoZSBtb250aC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0ZTogRGF0ZSkge31cblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgZ3JpZCBjb3JyZXNwb25kaW5nIHRvIHRoZSBtb250aCBzcGVjaWZpZWRcbiAgICogYnkgdGhlIGRhdGUuXG4gICAqIEBwYXJhbSBjb21wbGV0ZUhvbGVzIEluZGljYXRlcyBpZiB0aGUgYmVnaW5uaW5nIGFuZCBlbmRcbiAgICogb2YgdGhlIGdyaWQgc2hvdWxkIGJlIGNvbXBsZXRlZCB3aXRoIHRoZSBkYXlzIG9mIHRoZVxuICAgKiBhZGphY2VudCBtb250aHMuXG4gICAqIEBwYXJhbSB3ZWVrU3RhcnQgRGF5IG9mIHdlZWsgdG8gYmUgY29uc2lkZXJlZCB0aGUgYmVnaW5uaW5nXG4gICAqIG9mIHRoZSB3ZWVrLlxuICAgKi9cbiAgY3JlYXRlVmlldyhjb21wbGV0ZUhvbGVzID0gZmFsc2UsIHdlZWtTdGFydCA9IERheU9mV2Vlay5Nb25kYXkpOiBBcnJheTxBcnJheTxEYXlJbmZvPj4ge1xuICAgIGNvbnN0IGN1cnJlbnRNb250aEdyaWQgPSB0aGlzLmNyZWF0ZUdyaWQodGhpcy5kYXRlLCB3ZWVrU3RhcnQpO1xuXG4gICAgaWYgKGNvbXBsZXRlSG9sZXMpIHtcbiAgICAgIGNvbnN0IG5lZWRzVG9CZUZpbGxlZEZyb21CZWdpbm5pbmcgPSAhISFjdXJyZW50TW9udGhHcmlkWzBdWzBdO1xuXG4gICAgICBpZiAobmVlZHNUb0JlRmlsbGVkRnJvbUJlZ2lubmluZykge1xuICAgICAgICBjb25zdCBsYXN0TW9udGggPSBEYXRlTWF0aC5zdWJzdHJhY3RNb250aHModGhpcy5kYXRlLCAxKTtcbiAgICAgICAgY29uc3QgbGFzdERheU9mTGFzdE1vbnRoID0gRGF0ZU1hdGguZ2V0TGFzdERheU9mTW9udGgobGFzdE1vbnRoKS5nZXREYXRlKCk7XG5cbiAgICAgICAgY29uc3QgZmlyc3REYXlPZkN1cnJlbnRNb250aCA9IERhdGVNYXRoLmdldEZpcnN0RGF5T2ZNb250aCh0aGlzLmRhdGUpO1xuICAgICAgICBjb25zdCBkYXlzVG9QaWNrRnJvbUxhc3RNb250aCA9IGZpcnN0RGF5T2ZDdXJyZW50TW9udGguZ2V0RGF5KCkgLSB3ZWVrU3RhcnQudmFsdWVPZigpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF5c1RvUGlja0Zyb21MYXN0TW9udGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXlPZk1vbnRoID0gbGFzdERheU9mTGFzdE1vbnRoIC0gKGRheXNUb1BpY2tGcm9tTGFzdE1vbnRoIC0gKGkgKyAxKSk7XG4gICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZShsYXN0TW9udGguZ2V0RnVsbFllYXIoKSwgbGFzdE1vbnRoLmdldE1vbnRoKCksIGN1cnJlbnREYXlPZk1vbnRoKTtcblxuICAgICAgICAgIGN1cnJlbnRNb250aEdyaWRbMF1baV0gPSB7XG4gICAgICAgICAgICBpc1RvZGF5OiBmYWxzZSxcbiAgICAgICAgICAgIGlzU2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZGF5OiBjdXJyZW50RGF5T2ZNb250aCxcbiAgICAgICAgICAgIGRhdGU6IGN1cnJlbnREYXRlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgZmlsbGluZ0RheXMgPSAxO1xuICAgICAgZm9yIChsZXQgd2VlayA9IDA7IHdlZWsgPCB0aGlzLldFRUtTX1BFUl9NT05USDsgd2VlaysrKSB7XG4gICAgICAgIGZvciAobGV0IGRheU9mV2VlayA9IDA7IGRheU9mV2VlayA8IHRoaXMuREFZU19QRVJfV0VFSzsgZGF5T2ZXZWVrKyspIHtcbiAgICAgICAgICBpZiAoISEhY3VycmVudE1vbnRoR3JpZFt3ZWVrXVtkYXlPZldlZWtdKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGZpbGxpbmdEYXRlcyA9IG5ldyBEYXRlKHRoaXMuZGF0ZS5nZXRGdWxsWWVhcigpLCB0aGlzLmRhdGUuZ2V0TW9udGgoKSwgZmlsbGluZ0RheXMrKyk7XG5cbiAgICAgICAgICAgIGN1cnJlbnRNb250aEdyaWRbd2Vla11bZGF5T2ZXZWVrXSA9IHtcbiAgICAgICAgICAgICAgaXNUb2RheTogZmFsc2UsXG4gICAgICAgICAgICAgIGlzU2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICBkYXk6IGZpbGxpbmdEYXlzLFxuICAgICAgICAgICAgICBkYXRlOiBmaWxsaW5nRGF0ZXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1cnJlbnRNb250aEdyaWQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgZ3JpZCBjb3JyZXNwb25kaW5nIHRvIHRoZSBtb250aCBzcGVjaWZpZWRcbiAgICogYnkgdGhlIGRhdGUuXG4gICAqIEBwYXJhbSBkYXRlIERhdGUgdG8gdXNlLlxuICAgKiBAcGFyYW0gd2Vla1N0YXJ0IERheSBvZiB3ZWVrIHdoaWNoIHdpbGwgYmUgY29uc2lkZXJlZFxuICAgKiB0aGUgYmVnaW5uaW5nIG9mIHRoZSB3ZWVrLlxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVHcmlkKGRhdGU6IERhdGUsIHdlZWtTdGFydCA9IERheU9mV2Vlay5Nb25kYXkpOiBBcnJheTxBcnJheTxEYXlJbmZvPj4ge1xuICAgIGNvbnN0IGdyaWQgPSB0aGlzLmluaXRHcmlkKCk7XG4gICAgY29uc3QgZmlyc3REYXlPZldlZWsgPVxuICAgICAgRGF0ZU1hdGguZ2V0Rmlyc3REYXlPZk1vbnRoKGRhdGUpLmdldERheSgpIC0gd2Vla1N0YXJ0LnZhbHVlT2YoKTtcbiAgICBjb25zdCBsYXN0RGF5ID0gRGF0ZU1hdGguZ2V0TGFzdERheU9mTW9udGgoZGF0ZSkuZ2V0RGF0ZSgpO1xuXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIGxldCBkYXlPZldlZWsgPSBmaXJzdERheU9mV2VlaztcbiAgICBsZXQgY3VycmVudERheU9mTW9udGggPSAxO1xuICAgIGZvciAobGV0IHdlZWsgPSAwOyB3ZWVrIDwgdGhpcy5XRUVLU19QRVJfTU9OVEg7IHdlZWsrKykge1xuXG4gICAgICBmb3IgKDsgZGF5T2ZXZWVrIDwgdGhpcy5EQVlTX1BFUl9XRUVLICYmIGN1cnJlbnREYXlPZk1vbnRoIDw9IGxhc3REYXk7IGRheU9mV2VlaysrKSB7XG4gICAgICAgIGNvbnN0IHRvZGF5U2FtZVllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpID09PSB0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgdG9kYXlTYW1lTW9udGggPSB0b2RheS5nZXRNb250aCgpID09PSB0aGlzLmRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgY29uc3QgdG9kYXlTYW1lRGF5ID0gdG9kYXkuZ2V0RGF0ZSgpID09PSBjdXJyZW50RGF5T2ZNb250aDtcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSh0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKSwgdGhpcy5kYXRlLmdldE1vbnRoKCksIGN1cnJlbnREYXlPZk1vbnRoKTtcblxuICAgICAgICBncmlkW3dlZWtdW2RheU9mV2Vla10gPSB7XG4gICAgICAgICAgaXNUb2RheTogdG9kYXlTYW1lWWVhciAmJiB0b2RheVNhbWVNb250aCAmJiB0b2RheVNhbWVEYXksXG4gICAgICAgICAgaXNTZWxlY3RlZDogdGhpcy5kYXRlLmdldERhdGUoKSA9PT0gY3VycmVudERheU9mTW9udGgsXG4gICAgICAgICAgZGF5OiBjdXJyZW50RGF5T2ZNb250aCxcbiAgICAgICAgICBkYXRlOiBjdXJyZW50RGF0ZVxuICAgICAgICB9O1xuXG4gICAgICAgIGN1cnJlbnREYXlPZk1vbnRoKys7XG4gICAgICB9XG5cbiAgICAgIGRheU9mV2VlayA9IDA7XG5cbiAgICB9XG5cbiAgICByZXR1cm4gZ3JpZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgZ3JpZCB0aGF0IGNvbnRhaW5zXG4gICAqIHRoZSBpbmZvIGFib3V0IHRoZSBcInNoYXBlXCIgb2YgdGhlXG4gICAqIG1vbnRoLlxuICAgKi9cbiAgcHJpdmF0ZSBpbml0R3JpZCgpOiBBcnJheTxBcnJheTxEYXlJbmZvPj4ge1xuICAgIGNvbnN0IGRlZmF1bHRFbXB0eSA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBncmlkID0gW1xuICAgICAgbmV3IEFycmF5KHRoaXMuREFZU19QRVJfV0VFSykuZmlsbChkZWZhdWx0RW1wdHkpLFxuICAgICAgbmV3IEFycmF5KHRoaXMuREFZU19QRVJfV0VFSykuZmlsbChkZWZhdWx0RW1wdHkpLFxuICAgICAgbmV3IEFycmF5KHRoaXMuREFZU19QRVJfV0VFSykuZmlsbChkZWZhdWx0RW1wdHkpLFxuICAgICAgbmV3IEFycmF5KHRoaXMuREFZU19QRVJfV0VFSykuZmlsbChkZWZhdWx0RW1wdHkpLFxuICAgICAgbmV3IEFycmF5KHRoaXMuREFZU19QRVJfV0VFSykuZmlsbChkZWZhdWx0RW1wdHkpXG4gICAgXTtcblxuICAgIHJldHVybiBncmlkO1xuICB9XG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuLyoqXG4gKiBEaXJlY3RpdmUgdG8gc2VsZWN0IHRoZSB0ZW1wbGF0ZSB0byB1c2VcbiAqIGZvciB0aGUgZGF5IGNlbGwuXG4gKi9cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tzY0RheVRlbXBsYXRlXSdcbn0pXG5leHBvcnQgY2xhc3MgRGF5VGVtcGxhdGVEaXJlY3RpdmUge1xuXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbn1cbiIsImltcG9ydCB7IERpcmVjdGl2ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbc2NEYXlPZldlZWtDYXB0aW9uVGVtcGxhdGVdJ1xufSlcbmV4cG9ydCBjbGFzcyBEYXlPZldlZWtDYXB0aW9uVGVtcGxhdGVEaXJlY3RpdmUge1xuXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbn1cbiIsImltcG9ydCB7IERpcmVjdGl2ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbc2NNb250aENhcHRpb25UZW1wbGF0ZV0nXG59KVxuZXhwb3J0IGNsYXNzIE1vbnRoQ2FwdGlvblRlbXBsYXRlRGlyZWN0aXZlIHtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG59XG4iLCJpbXBvcnQgeyBEQVlfTkFNRVMgfSBmcm9tICcuLi9kYXktbmFtZXMnO1xuaW1wb3J0IHsgRGF5T2ZXZWVrIH0gZnJvbSAnLi4vZGF5LW9mLXdlZWsnO1xuXG4vKipcbiAqIERlZmF1bHQgZm9ybWF0dGVyIGZvciB0aGUgY2FwdGlvbnMgb2YgdGhlIGRheXNcbiAqIG9mIHRoZSB3ZWVrLlxuICogQHBhcmFtIGRheU9mV2VlayBEYXkgb2YgdGhlIHdlZWsuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0RGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlckZhY3RvcnkoZmlyc3REYXlPZldlZWs6IERheU9mV2Vlayk6IChkYXlPZldlZWs6IERheU9mV2VlaykgPT4gc3RyaW5nIHtcbiAgcmV0dXJuIChkYXlPZldlZWs6IERheU9mV2VlaykgPT4ge1xuICAgIGNvbnN0IGZvcm1hdHRlZERheU5hbWVzID0gREFZX05BTUVTLm1hcChcbiAgICAgIGRheU5hbWUgPT4gZm9ybWF0RGF5TmFtZShkYXlOYW1lKVxuICAgICk7XG5cbiAgICBjb25zdCByZW9yZGVyZWQgPSByZW9yZGVyRGF5cyhmb3JtYXR0ZWREYXlOYW1lcywgZmlyc3REYXlPZldlZWspO1xuICAgIHJldHVybiByZW9yZGVyZWRbZGF5T2ZXZWVrLnZhbHVlT2YoKV07XG4gIH07XG59XG5cbi8qKlxuICogQXBwbGllcyBmb3JtYXR0aW5nIHRvIHRoZSBuYW1lIG9mIHRoZSBkYXkuXG4gKiBAcGFyYW0gZGF5TmFtZSBOYW1lIG9mIHRoZSBkYXkuXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdERheU5hbWUoZGF5TmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgbmV3RGF5TmFtZSA9IGRheU5hbWUuc3Vic3RyKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBkYXlOYW1lLnN1YnN0cigxLCAxKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gbmV3RGF5TmFtZTtcbn1cblxuLyoqXG4gKiBSZW9yZGVycyB0aGUgYXJyYXkgb2YgbmFtZXMgc28gdGhlIGZpcnN0IGluZGV4XG4gKiBjb3JyZXNwb25kcyB3aXRoIHRoZSBuYW1lIG9mIHRoZSBmaXJzdCBkYXkgb2ZcbiAqIHRoZSB3ZWVrLlxuICogQHBhcmFtIGRheU5hbWVzIEFycmF5IHdpdGggdGhlIG5hbWVzIG9mIHRoZSBkYXlzXG4gKiBvZiB0aGUgd2Vlay5cbiAqIEBwYXJhbSBmaXJzdERheU9mV2VlayBGaXJzdCBkYXkgb2YgdGhlIHdlZWsuXG4gKi9cbmZ1bmN0aW9uIHJlb3JkZXJEYXlzKGRheU5hbWVzOiBzdHJpbmdbXSwgZmlyc3REYXlPZldlZWs6IERheU9mV2Vlayk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZGF5Q291bnQgPSBEQVlfTkFNRVMubGVuZ3RoO1xuXG4gIGNvbnN0IGRheUluZGV4ID0gZmlyc3REYXlPZldlZWsudmFsdWVPZigpO1xuICBjb25zdCByZW9yZGVyZWQgPSAobmV3IEFycmF5KGRheUNvdW50KSkuZmlsbCgwKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXlDb3VudDsgaSsrKSB7XG4gICAgY29uc3QgbmV3UG9zaXRpb24gPSAoaSArIGRheUluZGV4KSAlIGRheUNvdW50O1xuICAgIHJlb3JkZXJlZFtpXSA9IGRheU5hbWVzW25ld1Bvc2l0aW9uXTtcbiAgfVxuXG4gIHJldHVybiByZW9yZGVyZWQ7XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgZm9yd2FyZFJlZiwgSG9zdEJpbmRpbmcsIElucHV0LCBPdXRwdXQsIENvbnRlbnRDaGlsZCwgVGVtcGxhdGVSZWYsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgRGF5SW5mbyB9IGZyb20gJy4uLy4uL21vZGVscy9kYXktaW5mbyc7XG5pbXBvcnQgeyBEQVlfTkFNRVMgfSBmcm9tICcuLi8uLi9tb2RlbHMvZGF5LW5hbWVzJztcbmltcG9ydCB7IE1vbnRoVmlldyB9IGZyb20gJy4uLy4uL21vZGVscy92aWV3cy9tb3RoLXZpZXcnO1xuaW1wb3J0IHsgRGF5VGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL2RheS10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgRGF5T2ZXZWVrQ2FwdGlvblRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi4vLi4vZGlyZWN0aXZlcy9kYXktb2Ytd2Vlay1jYXB0aW9uLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBNb250aENhcHRpb25UZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvbW9udGgtY2FwdGlvbi10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgRGF5T2ZXZWVrIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2RheS1vZi13ZWVrJztcbmltcG9ydCB7IGRlZmF1bHREYXlPZldlZWtDYXB0aW9uRm9ybWF0dGVyRmFjdG9yeSB9IGZyb20gJy4uLy4uL21vZGVscy9mb3JtYXR0ZXJzL2RheS1vZi13ZWVrLWNhcHRpb24tZm9ybWF0dGVyJztcbmltcG9ydCB7IEdyb3dNb2RlIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2dyb3ctbW9kZSc7XG5cbi8qKlxuICogTW9udGggY2FsZW5kYXIgcHJvdmlkZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBNT05USF9DQUxFTkRBUl9WQUxVRV9BQ0NFU1NPUjogYW55ID0ge1xuICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTW9udGhDYWxlbmRhckNvbXBvbmVudCksXG4gIG11bHRpOiB0cnVlXG59O1xuXG4vKipcbiAqIENvbnRyb2wgdGhhdCByZXByZXNlbnRzIGEgY2FsZW5kYXIuXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3NjLW1vbnRoLWNhbGVuZGFyJyxcbiAgdGVtcGxhdGU6IGA8IS0tIE1vbnRoIC0tPlxuPGRpdiAoY2xpY2spPVwib25Nb250aENsaWNrKClcIlxuICAgICBbbmdDbGFzc109XCJbJ2NvbHVtbicsIGdyb3cubW9kZSA9PSAnc3RyZXRjaCcgPyAnc3RyZXRjaC12ZXJ0aWNhbGx5JyA6ICcnLCBnZXRDbGFzc0Zvck1vbnRoKCldXCI+XG5cbiAgPCEtLSBNb250aCBjYXB0aW9uIC0tPlxuICA8ZGl2IGNsYXNzPVwicm93XCI+XG5cbiAgICA8IS0tIE1vbnRoIGNhcHRpb24gY2VsbCAtLT5cbiAgICA8ZGl2IGNsYXNzPVwidy0xMDBcIlxuICAgICAgICAgW2NsYXNzLmxhYmVsXT1cImdyb3cubW9kZSAhPSAnbWl4ZWQnXCJcbiAgICAgICAgIFtjbGFzcy5yYXRpby1oZWlnaHRdPVwiZ3Jvdy5tb2RlID09ICdwcm9wb3J0aW9uYWwnXCJcbiAgICAgICAgIFtjbGFzcy5zdHJldGNoLWhvcml6b250YWxseV09XCJncm93Lm1vZGUgPT0gJ3N0cmV0Y2gnIHx8IGdyb3cubW9kZSA9PSAnbWl4ZWQnXCI+XG5cbiAgICAgIDwhLS0gTW9udGggY2FwdGlvbiBjZWxsIGNvbnRlbnQgLS0+XG4gICAgICA8ZGl2IFtjbGFzcy5sYWJlbF9fY29udGVudF09XCJncm93Lm1vZGUgIT0gJ21peGVkJ1wiPlxuXG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJtb250aFRlbXBsYXRlID8gbW9udGhUZW1wbGF0ZSA6IGRlZmF1bHRNb250aFRlbXBsYXRlOyBjb250ZXh0OiB7ICRpbXBsaWNpdDogdmFsdWUgfVwiPjwvbmctY29udGFpbmVyPlxuXG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5cbiAgPCEtLSBXZWVrIGNhcHRpb25zIC0tPlxuICA8ZGl2IGNsYXNzPVwicm93XCI+XG5cbiAgICA8IS0tIFdlZWsgY2FwdGlvbnMgY2VsbCAtLT5cbiAgICA8ZGl2IFtjbGFzcy5sYWJlbF09XCJncm93Lm1vZGUgIT0gJ21peGVkJ1wiXG4gICAgICAgICBbY2xhc3MucmF0aW8tc3F1YXJlXT1cImdyb3cubW9kZSA9PSAncHJvcG9ydGlvbmFsJ1wiXG4gICAgICAgICBbY2xhc3Muc3RyZXRjaC1ob3Jpem9udGFsbHldPVwiZ3Jvdy5tb2RlID09ICdzdHJldGNoJyB8fCBncm93Lm1vZGUgPT0gJ21peGVkJ1wiXG4gICAgICAgICAqbmdGb3I9XCJsZXQgZGF5T2ZXZWVrQ2FwdGlvbiBvZiBkYXlzT2ZXZWVrQ2FwdGlvbnM7IGxldCBpID0gaW5kZXhcIj5cblxuICAgICAgPCEtLSBXZWVrIGNhcHRpb24gY2VsbCBjb250ZW50IC0tPlxuICAgICAgPGRpdiBbY2xhc3MubGFiZWxfX2NvbnRlbnRdPVwiZ3Jvdy5tb2RlICE9ICdtaXhlZCdcIj5cblxuICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiZGF5T2ZXZWVrVGVtcGxhdGUgPyBkYXlPZldlZWtUZW1wbGF0ZSA6IGRlZmF1bHREYXlPZldlZWtUZW1wbGF0ZTsgY29udGV4dDogeyAkaW1wbGljaXQ6IGRheU9mV2Vla0NhcHRpb24sIGRheU9mV2Vla0luZGV4OiBpIH1cIj48L25nLWNvbnRhaW5lcj5cblxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuXG4gIDwhLS0gRGF5cyAtLT5cbiAgPGRpdiBjbGFzcz1cInJvd1wiXG4gICAgICAgKm5nRm9yPVwibGV0IHdlZWsgb2Ygdmlld1wiPlxuXG4gICAgPCEtLSBEYXkgY2VsbCAtLT5cbiAgICA8ZGl2IChjbGljayk9XCJvbkRheUNsaWNrKGRheSlcIlxuICAgICAgICAgY2xhc3M9XCJyYXRpby1zcXVhcmUgbGFiZWxcIlxuICAgICAgICAgW2NsYXNzLnJhdGlvLXNxdWFyZV09XCJncm93Lm1vZGUgPT0gJ3Byb3BvcnRpb25hbCcgfHwgZ3Jvdy5tb2RlID09ICdtaXhlZCdcIlxuICAgICAgICAgW2NsYXNzLnN0cmV0Y2gtaG9yaXpvbnRhbGx5XT1cImdyb3cubW9kZSA9PSAnc3RyZXRjaCdcIlxuICAgICAgICAgKm5nRm9yPVwibGV0IGRheSBvZiB3ZWVrXCI+XG5cbiAgICAgIDwhLS0gRGF5IGNvbnRlbnQgLS0+XG4gICAgICA8ZGl2IGNsYXNzPVwibGFiZWxfX2NvbnRlbnRcIj5cblxuICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiZGF5VGVtcGxhdGUgPyBkYXlUZW1wbGF0ZSA6IGRlZmF1bHREYXlUZW1wbGF0ZTsgY29udGV4dDogeyAkaW1wbGljaXQ6IGRheSB9XCI+PC9uZy1jb250YWluZXI+XG5cbiAgICAgIDwvZGl2PlxuXG4gICAgPC9kaXY+XG5cbiAgPC9kaXY+XG5cbjwvZGl2PlxuXG5cblxuPCEtLSBUZW1wbGF0ZXMgLS0+XG5cbjwhLS0gRGF5IHRlbXBsYXRlIC0tPlxuPG5nLXRlbXBsYXRlICNkZWZhdWx0RGF5VGVtcGxhdGVcbiAgICAgICAgICAgICBsZXQtZGF5PlxuICA8ZGl2IGNsYXNzPVwiZmxleC1leHBhbmRlZC1jb250YWluZXJcIj5cbiAgICA8ZGl2IFtuZ0NsYXNzXT1cIlsnZmxleC1leHBhbmQnLCBnZXRDbGFzc0ZvckRheShkYXkpXVwiPnt7IGdldEZvcm1hdHRlZERheShkYXkpIH19PC9kaXY+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPCEtLSBEYXkgb2Ygd2VlayBjZWxscyB0ZW1wbGF0ZSAtLT5cbjxuZy10ZW1wbGF0ZSAjZGVmYXVsdERheU9mV2Vla1RlbXBsYXRlXG4gICAgICAgICAgICAgbGV0LWRheU9mV2Vla1xuICAgICAgICAgICAgIGxldC1kYXlPZldlZWtJbmRleD1cImRheU9mV2Vla0luZGV4XCI+XG4gIDxkaXYgW2NsYXNzLmZsZXgtZXhwYW5kZWQtY29udGFpbmVyXT1cImdyb3cubW9kZSAhPSAnbWl4ZWQnXCI+XG4gICAgPGRpdiBbbmdDbGFzc109XCJbJ2ZsZXgtZXhwYW5kJywgJ2ZsZXgtY2VudGVyZWQnLCBkYXlPZldlZWtDYXB0aW9uQ2xhc3NdXCI+XG4gICAgICB7eyBkYXlPZldlZWsgfX1cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuXG48IS0tIE1vbnRoIGNlbGwgdGVtcGxhdGUgLS0+XG48bmctdGVtcGxhdGUgI2RlZmF1bHRNb250aFRlbXBsYXRlXG4gICAgICAgICAgICAgbGV0LWRhdGU+XG4gIDxkaXYgW2NsYXNzLmZsZXgtZXhwYW5kZWQtY29udGFpbmVyXT1cImdyb3cubW9kZSAhPSAnbWl4ZWQnXCI+XG4gICAgPGRpdiBbbmdDbGFzc109XCJbJ2ZsZXgtZXhwYW5kJywgJ2ZsZXgtY2VudGVyZWQnLCBtb250aENhcHRpb25DbGFzc11cIj5cbiAgICAgIHt7IG1vbnRoQ2FwdGlvbiB9fVxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG5gLFxuICBzdHlsZXM6IFtgLmNvbHVtbntkaXNwbGF5OmZsZXg7ZmxleC1mbG93OmNvbHVtbjtmbGV4OjF9LnJvd3tkaXNwbGF5OmZsZXg7ZmxleDoxfS5sYWJlbHtwb3NpdGlvbjpyZWxhdGl2ZX0ubGFiZWxfX2NvbnRlbnR7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO2JvdHRvbTowO3JpZ2h0OjB9LmZsZXgtZXhwYW5kZWQtY29udGFpbmVye2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS5mbGV4LWV4cGFuZHtmbGV4OjF9LmZsZXgtY2VudGVyZWR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5yYXRpby1oZWlnaHR7cGFkZGluZy1ib3R0b206MTQuMjg1NzElfS5yYXRpby1zcXVhcmV7cGFkZGluZy1ib3R0b206MTQuMjg1NzElO3dpZHRoOjE0LjI4NTcxJX0uc3RyZXRjaC12ZXJ0aWNhbGx5e2hlaWdodDoxMDAlfS5zdHJldGNoLWhvcml6b250YWxseXt3aWR0aDoxNC4yODU3MSV9LmZpeGVkLWhlaWdodHtkaXNwbGF5OmZsZXg7ZmxleDoxfS53LTEwMHt3aWR0aDoxMDAlfS5zYy1tb250aHtmb250LXNpemU6MnJlbX0uc2MtbW9udGgtLWRpc2FibGVke29wYWNpdHk6LjI1fS5zYy1tb250aF9fY2FwdGlvbiwuc2MtbW9udGhfX3dlZWstY2FwdGlvbntib3JkZXI6MXB4IHNvbGlkICMwMDA7Zm9udC13ZWlnaHQ6NzAwfS5zYy1tb250aF9fZGF5e2JvcmRlcjoxcHggc29saWQgIzAwMDtjdXJzb3I6cG9pbnRlcn0uc2MtbW9udGhfX2RheS0tZGlzYWJsZWR7Y3Vyc29yOmF1dG99LnNjLW1vbnRoX19kYXktLXRvZGF5e2JhY2tncm91bmQ6cGlua30uc2MtbW9udGhfX2RheS0tc2VsZWN0ZWR7YmFja2dyb3VuZDojNjQ5NWVkfWBdLFxuICBwcm92aWRlcnM6IFtNT05USF9DQUxFTkRBUl9WQUxVRV9BQ0NFU1NPUl1cbn0pXG5leHBvcnQgY2xhc3MgTW9udGhDYWxlbmRhckNvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkluaXQge1xuICBAQ29udGVudENoaWxkKERheVRlbXBsYXRlRGlyZWN0aXZlLCB7IHJlYWQ6IFRlbXBsYXRlUmVmIH0pIGRheVRlbXBsYXRlO1xuICBAQ29udGVudENoaWxkKERheU9mV2Vla0NhcHRpb25UZW1wbGF0ZURpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KSBkYXlPZldlZWtUZW1wbGF0ZTtcbiAgQENvbnRlbnRDaGlsZChNb250aENhcHRpb25UZW1wbGF0ZURpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KSBtb250aFRlbXBsYXRlO1xuXG4gIC8qKlxuICAgKiBFdmVudCByYWlzZWQgd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgZGF0ZS5cbiAgICovXG4gIEBPdXRwdXQoJ2NoYW5nZScpIGNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8RGF0ZT4oKTtcblxuICAvKipcbiAgICogRXZlbnQgcmFpc2VkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBjYWxlbmRhci5cbiAgICovXG4gIEBPdXRwdXQoJ21vbnRoQ2xpY2snKSBtb250aENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxNb250aENhbGVuZGFyQ29tcG9uZW50PigpO1xuXG4gIC8qKlxuICAgKiBTZXRzIGlmIHRoZSBjb250cm9sIHNob3VsZCBiZSBpbiBhXG4gICAqIGRpc2FibGVkIHN0YXRlLlxuICAgKi9cbiAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcblxuICAvKipcbiAgICogRGF0ZSB0byBzaG93LlxuICAgKi9cbiAgcHJpdmF0ZSBfdmFsdWUgPSBuZXcgRGF0ZSgpO1xuXG4gIGdldCB2YWx1ZSgpOiBEYXRlIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgdmFsdWUoZGF0ZTogRGF0ZSkge1xuICAgIHRoaXMud3JpdGVWYWx1ZShkYXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgaG93IGEgZGF5IGNlbGwgc2hvdWxkIGdyb3cuXG4gICAqL1xuICBwcml2YXRlIF9ncm93OiBHcm93TW9kZSA9IHsgbW9kZTogJ3N0cmV0Y2gnIH07XG5cbiAgQElucHV0KCkgc2V0IGdyb3cgKG1vZGU6IEdyb3dNb2RlKSB7XG4gICAgaWYgKG1vZGUpIHtcbiAgICAgIHRoaXMuX2dyb3cgPSBtb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9ncm93ID0geyBtb2RlOiAnc3RyZXRjaCcgfTtcbiAgICB9XG4gIH1cblxuICBnZXQgZ3JvdygpOiBHcm93TW9kZSB7XG4gICAgcmV0dXJuIHRoaXMuX2dyb3c7XG4gIH1cblxuICBwcml2YXRlIGRlZmF1bHRGaXJzdERheU9mV2VlayA9IERheU9mV2Vlay5TdW5kYXk7XG5cbiAgcHJpdmF0ZSBkZWZhdWx0RGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlciA9IGRlZmF1bHREYXlPZldlZWtDYXB0aW9uRm9ybWF0dGVyRmFjdG9yeSh0aGlzLmRlZmF1bHRGaXJzdERheU9mV2Vlayk7XG5cbiAgLyoqXG4gICAqIEZpcnN0IGRheSBvZiB0aGUgd2Vlay5cbiAgICovXG4gIHByaXZhdGUgX2ZpcnN0RGF5T2ZXZWVrOiBEYXlPZldlZWsgPSB0aGlzLmRlZmF1bHRGaXJzdERheU9mV2VlaztcblxuICBASW5wdXQoKSBzZXQgZmlyc3REYXlPZldlZWsgKGRheU9mV2VlazogRGF5T2ZXZWVrKSB7XG4gICAgdGhpcy5fZmlyc3REYXlPZldlZWsgPSBkYXlPZldlZWs7XG4gICAgdGhpcy5kZWZhdWx0RGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlciA9IGRlZmF1bHREYXlPZldlZWtDYXB0aW9uRm9ybWF0dGVyRmFjdG9yeSh0aGlzLl9maXJzdERheU9mV2Vlayk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICBnZXQgZmlyc3REYXlPZldlZWsoKTogRGF5T2ZXZWVrIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3REYXlPZldlZWs7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0dGVyIGZvciBkYXlzLlxuICAgKi9cbiAgcHJpdmF0ZSBfZGF5Rm9ybWF0dGVyOiAoZGF5PzogRGF5SW5mbykgPT4gc3RyaW5nO1xuXG4gIEBJbnB1dCgpIHNldCBkYXlGb3JtYXR0ZXIgKGZvcm1hdHRlcjogKGRheT86IERheUluZm8pID0+IHN0cmluZykge1xuICAgIHRoaXMuX2RheUZvcm1hdHRlciA9IGZvcm1hdHRlcjtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIGdldCBkYXlGb3JtYXR0ZXIoKTogKGRheT86IERheUluZm8pID0+IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2RheUZvcm1hdHRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYXB0aW9ucyBvZiB0aGUgZGlmZmVyZW50IGRheXMgb2YgdGhlIHdlZWsuXG4gICAqL1xuICBkYXlzT2ZXZWVrQ2FwdGlvbnM7XG5cbiAgLyoqXG4gICAqIEZvcm1hdHRlciBmb3IgdGhlIGNhcHRpb25zIG9mIHRoZSBkaWZmZXJlbnRcbiAgICogZGF5cyBvZiB0aGUgd2Vlay5cbiAgICovXG4gIHByaXZhdGUgX2RheU9mV2Vla0NhcHRpb25Gb3JtYXR0ZXI6IChkYXlPZldlZWs6IERheU9mV2VlaykgPT4gc3RyaW5nO1xuXG4gIEBJbnB1dCgpIHNldCBkYXlPZldlZWtDYXB0aW9uRm9ybWF0dGVyIChmb3JtYXR0ZXI6IChkYXlPZldlZWs6IERheU9mV2VlaykgPT4gc3RyaW5nKSB7XG4gICAgdGhpcy5fZGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlciA9IGZvcm1hdHRlcjtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIGdldCBkYXlPZldlZWtDYXB0aW9uRm9ybWF0dGVyKCk6IChkYXlPZldlZWs6IERheU9mV2VlaykgPT4gc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fZGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYXB0aW9uIG9mIHRoZSBtb250aC5cbiAgICovXG4gIG1vbnRoQ2FwdGlvbjtcblxuICAvKipcbiAgICogRm9ybWF0dGVyIGZvciB0aGUgbW9udGggY2FwdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX21vbnRoQ2FwdGlvbkZvcm1hdHRlcjogKGRhdGU6IERhdGUpID0+IHN0cmluZztcblxuICBASW5wdXQoKSBzZXQgbW9udGhDYXB0aW9uRm9ybWF0dGVyIChmb3JtYXR0ZXI6IChkYXRlOiBEYXRlKSA9PiBzdHJpbmcpIHtcbiAgICB0aGlzLl9tb250aENhcHRpb25Gb3JtYXR0ZXIgPSBmb3JtYXR0ZXI7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICBnZXQgbW9udGhDYXB0aW9uRm9ybWF0dGVyKCk6IChkYXRlOiBEYXRlKSA9PiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9tb250aENhcHRpb25Gb3JtYXR0ZXI7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGEgQ1NTIGNsYXNzIGZvciB0aGUgc3BlY2lmaWVkIGRheS5cbiAgICovXG4gIEBJbnB1dCgpIGN1c3RvbURheUNsYXNzOiAoZGF5OiBEYXlJbmZvKSA9PiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIENTUyBjbGFzcyBmb3IgdGhlIG1vbnRoLlxuICAgKi9cbiAgQElucHV0KCkgbW9udGhDbGFzcyA9ICdzYy1tb250aCc7XG5cbiAgLyoqXG4gICAqIENTUyBjbGFzcyBmb3IgdGhlIGRpc2FibGVkIHN0YXRlLlxuICAgKi9cbiAgQElucHV0KCkgZGlzYWJsZWRDbGFzcyA9ICdzYy1tb250aC0tZGlzYWJsZWQnO1xuXG4gIC8qKlxuICAgKiBDU1MgY2xhc3MgZm9yIHRoZSBtb250aCBjYXB0aW9uLlxuICAgKi9cbiAgQElucHV0KCkgbW9udGhDYXB0aW9uQ2xhc3MgPSAnc2MtbW9udGhfX2NhcHRpb24nO1xuXG4gIC8qKlxuICAgKiBDU1MgY2xhc3MgZm9yIHRoZSBkYXkgb2YgdGhlIHdlZWsgY2FwdGlvbnMuXG4gICAqL1xuICBASW5wdXQoKSBkYXlPZldlZWtDYXB0aW9uQ2xhc3MgPSAnc2MtbW9udGhfX3dlZWstY2FwdGlvbic7XG5cbiAgLyoqXG4gICAqIENTUyBjbGFzcyBmb3IgdGhlIGRheSBjYXB0aW9ucy5cbiAgICovXG4gIEBJbnB1dCgpIGRheUNhcHRpb25DbGFzcyA9ICdzYy1tb250aF9fZGF5JztcblxuICAvKipcbiAgICogQ1NTIGNsYXNzIGZvciB0aGUgY3VycmVudCBkYXkuXG4gICAqL1xuICBASW5wdXQoKSBjdXJyZW50RGF5Q2xhc3MgPSAnc2MtbW9udGhfX2RheS0tdG9kYXknO1xuXG4gIC8qKlxuICAgKiBDU1MgY2xhc3MgZm9yIHRoZSBkYXkgd2hlbiB0aGUgc3RhdGUgaXMgZGlzYWJsZWQuXG4gICAqL1xuICBASW5wdXQoKSBkaXNhYmxlZERheUNsYXNzID0gJ3NjLW1vbnRoX19kYXktLWRpc2FibGVkJztcblxuICAvKipcbiAgICogQ1NTIGNsYXNzIGZvciB0aGUgc2VsZWN0ZWQgZGF5LlxuICAgKi9cbiAgQElucHV0KCkgc2VsZWN0ZWREYXlDbGFzcyA9ICdzYy1tb250aF9fZGF5LS1zZWxlY3RlZCc7XG5cbiAgLyoqXG4gICAqIFZpZXcgb2YgdGhlIGN1cnJlbnQgbW9udGguXG4gICAqL1xuICB2aWV3O1xuXG4gIHByaXZhdGUgZGVmYXVsdE1vbnRoQ2FwdGlvbkZvcm1hdHRlciA9IChkYXRlOiBEYXRlKSA9PiBkYXRlLnRvRGF0ZVN0cmluZygpO1xuICBwcml2YXRlIGRlZmF1bHREYXlGb3JtYXR0ZXIgPSAoZGF5PzogRGF5SW5mbykgPT4gZGF5ID8gZGF5LmRheS50b1N0cmluZygpIDogJyc7XG4gIHByaXZhdGUgb25DaGFuZ2UgPSAoZGF0ZTogRGF0ZSkgPT4geyB9O1xuICBwcml2YXRlIG9uVG91Y2hlZCA9ICgpID0+IHsgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGNvbXBvbmVudC5cbiAgICovXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgd3JpdGVWYWx1ZShkYXRlOiBEYXRlKTogdm9pZCB7XG4gICAgaWYgKGRhdGUpIHtcbiAgICAgIHRoaXMuX3ZhbHVlID0gZGF0ZTtcbiAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgdGhpcy5vbkNoYW5nZShkYXRlKTtcbiAgICB9XG4gIH1cblxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiAoZGF0ZTogRGF0ZSkgPT4ge30pOiB2b2lkIHtcbiAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gIH1cblxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gIH1cblxuICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoZXMgdGhlIGNvbXBvbmVudC5cbiAgICovXG4gIHByaXZhdGUgcmVmcmVzaCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlZnJlc2hNb250aENhcHRpb24odGhpcy52YWx1ZSk7XG4gICAgdGhpcy5yZWZyZXNoRGF5T2ZXZWVrQ2FwdGlvbnMoKTtcbiAgICB0aGlzLnJlZnJlc2hWaWV3KHRoaXMudmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyB0aGUgbW9udGggY2FwdGlvbi5cbiAgICogQHBhcmFtIGRhdGUgRGF0ZS5cbiAgICovXG4gIHByaXZhdGUgcmVmcmVzaE1vbnRoQ2FwdGlvbihkYXRlOiBEYXRlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubW9udGhDYXB0aW9uRm9ybWF0dGVyKSB7XG4gICAgICB0aGlzLm1vbnRoQ2FwdGlvbiA9IHRoaXMubW9udGhDYXB0aW9uRm9ybWF0dGVyKGRhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vbnRoQ2FwdGlvbiA9IHRoaXMuZGVmYXVsdE1vbnRoQ2FwdGlvbkZvcm1hdHRlcihkYXRlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaGVzIHRoZSBkYXkgb2Ygd2VlayBjYXB0aW9ucy5cbiAgICovXG4gIHByaXZhdGUgcmVmcmVzaERheU9mV2Vla0NhcHRpb25zKCk6IHZvaWQge1xuICAgIGNvbnN0IGRheUNhcHRpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgY29uc3QgZGF5T2ZXZWVrRm9ybWF0dGVyID0gdGhpcy5kYXlPZldlZWtDYXB0aW9uRm9ybWF0dGVyID9cbiAgICAgIHRoaXMuZGF5T2ZXZWVrQ2FwdGlvbkZvcm1hdHRlciA6XG4gICAgICB0aGlzLmRlZmF1bHREYXlPZldlZWtDYXB0aW9uRm9ybWF0dGVyO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBEQVlfTkFNRVMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRheUNhcHRpb25zLnB1c2goZGF5T2ZXZWVrRm9ybWF0dGVyKGkpKTtcbiAgICB9XG5cbiAgICB0aGlzLmRheXNPZldlZWtDYXB0aW9ucyA9IGRheUNhcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyB0aGUgY2FsZW5kYXIgdmlldy5cbiAgICogQHBhcmFtIGRhdGUgRGF0ZS5cbiAgICovXG4gIHByaXZhdGUgcmVmcmVzaFZpZXcoZGF0ZTogRGF0ZSk6IHZvaWQge1xuICAgIHRoaXMudmlldyA9IG5ldyBNb250aFZpZXcoZGF0ZSkuY3JlYXRlVmlldyhmYWxzZSwgdGhpcy5maXJzdERheU9mV2Vlayk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgQ1NTIGNsYXNzZXMgdG8gYXBwbHkgdG8gdGhlIG1vbnRoLlxuICAgKi9cbiAgZ2V0Q2xhc3NGb3JNb250aCgpOiBzdHJpbmcge1xuICAgIGxldCBjbGFzc2VzVG9BcHBseSA9IHRoaXMubW9udGhDbGFzcztcblxuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICBjbGFzc2VzVG9BcHBseSA9IHRoaXMubW9udGhDbGFzcyArICcgJyArIHRoaXMuZGlzYWJsZWRDbGFzcztcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3Nlc1RvQXBwbHk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgQ1NTIGNsYXNzIGFwcGxpY2FibGUgdG9cbiAgICogdGhlIHNwZWNpZmllZCBkYXkuXG4gICAqIEBwYXJhbSBkYXkgRGF5LlxuICAgKi9cbiAgZ2V0Q2xhc3NGb3JEYXkoZGF5PzogRGF5SW5mbyk6IHN0cmluZyB7XG4gICAgbGV0IGRheUNsYXNzVG9BcHBseSA9ICcnO1xuXG4gICAgaWYgKGRheSkge1xuXG4gICAgICBpZiAoZGF5LmRheSA9PT0gdGhpcy52YWx1ZS5nZXREYXRlKCkpIHtcbiAgICAgICAgZGF5Q2xhc3NUb0FwcGx5ID0gdGhpcy5zZWxlY3RlZERheUNsYXNzO1xuICAgICAgfSBlbHNlIGlmIChkYXkuaXNUb2RheSkge1xuICAgICAgICBkYXlDbGFzc1RvQXBwbHkgPSB0aGlzLmN1cnJlbnREYXlDbGFzcztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXN0b21EYXlDbGFzcykge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGhpcy52YWx1ZS52YWx1ZU9mKCkpO1xuICAgICAgICBkYXRlLnNldERhdGUoZGF5LmRheSk7XG4gICAgICAgIGRheUNsYXNzVG9BcHBseSA9IHRoaXMuY3VzdG9tRGF5Q2xhc3MoZGF5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgZGF5Q2xhc3NUb0FwcGx5ID0gZGF5Q2xhc3NUb0FwcGx5ICsgJyAnICsgdGhpcy5kaXNhYmxlZERheUNsYXNzO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5kYXlDYXB0aW9uQ2xhc3MgKyAnICcgKyBkYXlDbGFzc1RvQXBwbHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmRheUNhcHRpb25DbGFzcztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIGZvcm1hdHRlZCBzdHJpbmcgY29ycmVzcG9uZGluZ1xuICAgKiB0byB0aGUgc3BlY2lmaWVkIGRheS5cbiAgICogQHBhcmFtIGRheSBEYXkgdG8gZm9ybWF0LlxuICAgKi9cbiAgZ2V0Rm9ybWF0dGVkRGF5KGRheTogRGF5SW5mbyk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuZGF5Rm9ybWF0dGVyKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXlGb3JtYXR0ZXIoZGF5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdERheUZvcm1hdHRlcihkYXkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb250cm9scyB0aGUgY2xpY2sgZXZlbnQgb2YgYSBkYXkgY2VsbC5cbiAgICogQHBhcmFtIGRheUluZm8gSW5mbyBhYm91dCB0aGUgc2VsZWN0ZWQgZGF5LlxuICAgKi9cbiAgb25EYXlDbGljayhkYXlJbmZvOiBEYXlJbmZvKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRpc2FibGVkICYmIGRheUluZm8pIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKHRoaXMudmFsdWUudmFsdWVPZigpKTtcbiAgICAgIHNlbGVjdGVkRGF0ZS5zZXREYXRlKGRheUluZm8uZGF5KTtcblxuICAgICAgdGhpcy52YWx1ZSA9IG5ldyBEYXRlKHNlbGVjdGVkRGF0ZS52YWx1ZU9mKCkpO1xuXG4gICAgICB0aGlzLmNoYW5nZS5lbWl0KHNlbGVjdGVkRGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnRyb2xzIHRoZSBjbGljayBldmVudCBvZiB0aGUgbW9udGguXG4gICAqL1xuICBvbk1vbnRoQ2xpY2soKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLm1vbnRoQ2xpY2suZW1pdCh0aGlzKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogUmVwcmVzZW50cyBpbmZvcm1hdGlvbiBhYm91dCBvbmVcbiAqIGRheSBvZiB0aGUgbW9udGguXG4gKi9cbmV4cG9ydCBjbGFzcyBEYXlJbmZvIHtcbiAgICBpc1RvZGF5OiBib29sZWFuO1xuICAgIGlzU2VsZWN0ZWQ6IGJvb2xlYW47XG4gICAgZGF5OiBudW1iZXI7XG4gICAgZGF0ZTogRGF0ZTtcbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCcm93c2VyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG5pbXBvcnQgeyBNb250aENhbGVuZGFyQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL21vbnRoLWNhbGVuZGFyL21vbnRoLWNhbGVuZGFyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBNb250aENhcHRpb25UZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gJy4vZGlyZWN0aXZlcy9tb250aC1jYXB0aW9uLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBEYXlPZldlZWtDYXB0aW9uVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZXMvZGF5LW9mLXdlZWstY2FwdGlvbi10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgRGF5VGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZXMvZGF5LXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIEJyb3dzZXJNb2R1bGUsXG4gICAgRm9ybXNNb2R1bGVcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbXG4gICAgTW9udGhDYWxlbmRhckNvbXBvbmVudCxcbiAgICBNb250aENhcHRpb25UZW1wbGF0ZURpcmVjdGl2ZSxcbiAgICBEYXlPZldlZWtDYXB0aW9uVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgRGF5VGVtcGxhdGVEaXJlY3RpdmVcbiAgXSxcbiAgZXhwb3J0czogW1xuICAgIE1vbnRoQ2FsZW5kYXJDb21wb25lbnQsXG4gICAgTW9udGhDYXB0aW9uVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgRGF5T2ZXZWVrQ2FwdGlvblRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIERheVRlbXBsYXRlRGlyZWN0aXZlXG4gIF1cbn0pXG5leHBvcnQg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