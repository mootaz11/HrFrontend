/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChild, ElementRef, Input, TemplateRef, ViewChild } from '@angular/core';
import { NgxSimpleCalendarService } from './ngx-simple-calendar.service';
import { months, days } from './data-models/data-calendar';
export class NgxSimpleCalendarComponent {
    /**
     * @param {?} ngxCalendarSrv
     */
    constructor(ngxCalendarSrv) {
        this.ngxCalendarSrv = ngxCalendarSrv;
        this.options = {};
        this.dayCorrectedHeight = '';
        this.months = months;
        this.days = days;
        this.settings = {
            outline: true,
            evenDayDimensions: false
        };
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set events(value) {
        this.eventsInternal = value;
        this.initializeCalendar();
    }
    /**
     * @return {?}
     */
    get events() {
        return this.eventsInternal;
    }
    /**
     * @return {?}
     */
    get activeMonth() {
        /** @type {?} */
        const currentMonth = months.find((/**
         * @param {?} month
         * @return {?}
         */
        (month) => month.id === this.currentMonth));
        return {
            year: this.currentYear,
            month: currentMonth,
            setNextMonth: this.setNextMonth,
            setPreviousMonth: this.setPreviousMonth
        };
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.settings = Object.assign({}, this.settings, this.options);
        this.initializeCalendar();
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        setTimeout((/**
         * @return {?}
         */
        () => this.dayCorrectedHeight = `${this.dayHolder.nativeElement.clientWidth}px`), 0);
    }
    /**
     * @private
     * @return {?}
     */
    initializeCalendar() {
        this.setupActiveDate();
        this.setupCalendarData();
    }
    /**
     * @private
     * @return {?}
     */
    setupActiveDate() {
        if (!this.currentMonth) {
            /** @type {?} */
            const now = new Date();
            this.currentMonth = now.getMonth();
            this.currentYear = now.getFullYear();
            this.currentMonthYearText = this.ngxCalendarSrv.getMonthYearText(this.currentMonth, this.currentYear);
        }
    }
    /**
     * @private
     * @return {?}
     */
    setupCalendarData() {
        this.calendarData = this.ngxCalendarSrv.setupCalendar(this.currentMonth, this.currentYear, this.events);
    }
    /**
     * @return {?}
     */
    setPreviousMonth() {
        if ((this.currentMonth - 1) === -1) {
            this.currentMonth = 11;
            this.currentYear = this.currentYear - 1;
        }
        else {
            this.currentMonth = this.currentMonth - 1;
        }
        this.calendarData = this.ngxCalendarSrv.setupCalendar(this.currentMonth, this.currentYear, this.events);
        this.currentMonthYearText = this.ngxCalendarSrv.getMonthYearText(this.currentMonth, this.currentYear);
    }
    /**
     * @return {?}
     */
    setNextMonth() {
        if ((this.currentMonth + 1) === 12) {
            this.currentMonth = 0;
            this.currentYear = this.currentYear + 1;
        }
        else {
            this.currentMonth = this.currentMonth + 1;
        }
        this.calendarData = this.ngxCalendarSrv.setupCalendar(this.currentMonth, this.currentYear, this.events);
        this.currentMonthYearText = this.ngxCalendarSrv.getMonthYearText(this.currentMonth, this.currentYear);
    }
}
NgxSimpleCalendarComponent.decorators = [
    { type: Component, args: [{
                selector: 'ngx-simple-calendar',
                template: "<div class=\"ngx-calendar__top-bar\">\r\n  <ng-container *ngIf=\"topBarTemplate\">\r\n    <ng-container *ngTemplateOutlet=\"topBarTemplate; context: activeMonth\"></ng-container>\r\n  </ng-container>\r\n  <ng-container *ngIf=\"!topBarTemplate\">\r\n    <div class=\"ngx-calendar__top-bar-icon\" (click)=\"setPreviousMonth()\">\r\n      <\r\n    </div>\r\n    <span class=\"ngx-calendar__title\">{{currentMonthYearText }}</span>\r\n    <div class=\"ngx-calendar__top-bar-icon\" (click)=\"setNextMonth()\">\r\n      >\r\n    </div>\r\n  </ng-container>\r\n\r\n</div>\r\n<div class=\"ngx-calendar__wrapper\">\r\n  <div class=\"ngx-calendar__calendar\">\r\n    <div class=\"ngx-calendar__days-of-week\">\r\n\r\n      <div class=\"ngx-calendar__day-of-week\"\r\n           *ngFor=\"let day of days\">\r\n        <ng-container *ngIf=\"weekDaysTemplate\">\r\n          <ng-container *ngTemplateOutlet=\"weekDaysTemplate; context: day\"></ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!weekDaysTemplate\">\r\n          {{day.name }}\r\n        </ng-container>\r\n      </div>\r\n\r\n    </div>\r\n    <div class=\"ngx-calendar__days-holder\"\r\n         [style.align-content]=\"settings.evenDayDimensions ? 'baseline': 'initial' \"\r\n         [class.ngx-calendar__days-holder--outline]=\"settings.outline\">\r\n      <div class=\"ngx-calendar__day\"\r\n           #dayHolder\r\n           *ngFor=\"let day of calendarData\"\r\n           [style.height]=\"settings.evenDayDimensions ? dayCorrectedHeight : 'initial'\"\r\n           [class.ngx-calendar__day--outline]=\"settings.outline\"\r\n           [class.today]=\"day.today\"\r\n           [class.not-current]=\"!day.activeMonth\">\r\n        <div [style.display]=\"day.activeMonth ? 'none': 'block'\" class=\"ngx-calendar__day--overlay\"></div>\r\n        <div *ngIf=\"!dayTemplate\" class=\"ngx-calendar__default-day\">\r\n          <div class=\"ngx-calendar__day-number\">{{day.number}}</div>\r\n        </div>\r\n        <ng-container *ngIf=\"dayTemplate\">\r\n          <ng-container *ngTemplateOutlet=\"dayTemplate; context: day\"></ng-container>\r\n        </ng-container>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n",
                styles: [":host{height:100%;width:100%;position:absolute;top:0;bottom:0;right:0;left:0;display:flex;flex-direction:column}.ngx-calendar__top-bar{display:flex;justify-content:center;align-items:center;margin-bottom:1.35rem}.ngx-calendar__top-bar-icon{background-color:#eceff1;font-size:1.1rem;height:1.5rem;width:1.5rem;display:flex;align-items:center;border-radius:50%;justify-content:center;margin:0 1.25rem;color:#6c6d6e;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ngx-calendar__title{color:#455a64;font-size:1.25rem;letter-spacing:.25px;font-weight:500}.ngx-calendar__days-holder,.ngx-calendar__wrapper{flex:1;position:relative}.ngx-calendar__days-holder{display:flex;flex-wrap:wrap}.ngx-calendar__days-holder--outline{border-left:1px solid #cfd8dc;border-top:1px solid #cfd8dc}.ngx-calendar__calendar,.ngx-calendar__days{position:absolute;top:0;bottom:0;right:0;left:0;display:flex}.ngx-calendar__calendar{flex-direction:column}.ngx-calendar__days-of-week{display:flex}.ngx-calendar__day-of-week{flex:1;color:#64818f;font-size:.775rem;padding-top:.35rem;padding-bottom:.35rem}.ngx-calendar__days{background-color:#fff;border:1px solid #cfd8dc;display:flex;flex-wrap:wrap}.ngx-calendar__day{flex:0 1 calc(100%/7 - 1px);border-bottom:1px solid transparent;border-right:1px solid transparent;position:relative}.ngx-calendar__day--overlay{background-color:#f0f4f88a;position:absolute;top:0;bottom:0;right:0;left:0;z-index:2}.ngx-calendar__day--outline{border-bottom:1px solid #cfd8dc;border-right:1px solid #cfd8dc}.ngx-calendar__default-day{position:absolute;top:0;bottom:0;right:0;left:0;padding:.5rem}.ngx-calendar__default-day:nth-child(7n),.ngx-calendar__default-day:nth-child(7n-1){background-color:#feedd9}.ngx-calendar__default-day:nth-child(-n+7){border-top:none}.ngx-calendar__default-day.today{box-shadow:inset 0 0 2px 2px #f57c00}.ngx-calendar__day-number{text-align:right;color:#546e7a;font-size:.85rem}"]
            }] }
];
/** @nocollapse */
NgxSimpleCalendarComponent.ctorParameters = () => [
    { type: NgxSimpleCalendarService }
];
NgxSimpleCalendarComponent.propDecorators = {
    options: [{ type: Input, args: ['options',] }],
    events: [{ type: Input, args: ['events',] }],
    dayHolder: [{ type: ViewChild, args: ['dayHolder', { static: false, read: ElementRef },] }],
    dayTemplate: [{ type: ContentChild, args: ['day', { static: false, read: TemplateRef },] }],
    topBarTemplate: [{ type: ContentChild, args: ['topBar', { static: false, read: TemplateRef },] }],
    weekDaysTemplate: [{ type: ContentChild, args: ['weekDays', { static: false, read: TemplateRef },] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    NgxSimpleCalendarComponent.prototype.eventsInternal;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.options;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.dayHolder;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.dayTemplate;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.topBarTemplate;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.weekDaysTemplate;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.dayCorrectedHeight;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.calendarData;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.currentMonthYearText;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.currentMonth;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.currentYear;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.months;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.days;
    /** @type {?} */
    NgxSimpleCalendarComponent.prototype.settings;
    /**
     * @type {?}
     * @private
     */
    NgxSimpleCalendarComponent.prototype.ngxCalendarSrv;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNpbXBsZS1jYWxlbmRhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtc2ltcGxlLWNhbGVuZGFyLyIsInNvdXJjZXMiOlsibGliL25neC1zaW1wbGUtY2FsZW5kYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQWdCLFNBQVMsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBVSxXQUFXLEVBQUUsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3hILE9BQU8sRUFBQyx3QkFBd0IsRUFBQyxNQUFNLCtCQUErQixDQUFDO0FBQ3ZFLE9BQU8sRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUEyRCxNQUFNLDZCQUE2QixDQUFDO0FBUW5ILE1BQU0sT0FBTywwQkFBMEI7Ozs7SUErQnJDLFlBQW9CLGNBQXdDO1FBQXhDLG1CQUFjLEdBQWQsY0FBYyxDQUEwQjtRQTNCMUMsWUFBTyxHQUFHLEVBQUUsQ0FBQztRQThCL0IsdUJBQWtCLEdBQUcsRUFBRSxDQUFDO1FBTXhCLFdBQU0sR0FBcUIsTUFBTSxDQUFDO1FBQ2xDLFNBQUksR0FBVyxJQUFJLENBQUM7UUFFcEIsYUFBUSxHQUFHO1lBQ1QsT0FBTyxFQUFFLElBQUk7WUFDYixpQkFBaUIsRUFBRSxLQUFLO1NBQ3pCLENBQUM7SUFkRixDQUFDOzs7OztJQTFCRCxJQUFxQixNQUFNLENBQUMsS0FBc0I7UUFDaEQsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7SUFDNUIsQ0FBQzs7OztJQUVELElBQUksTUFBTTtRQUNSLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUM3QixDQUFDOzs7O0lBUUQsSUFBSSxXQUFXOztjQUNQLFlBQVksR0FBRyxNQUFNLENBQUMsSUFBSTs7OztRQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLElB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LENBQUMsTUFBTSxDQUFDLENBQUM7UUFDeEcsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDeEcsQ0FBQzs7O1lBckdGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUscUJBQXFCO2dCQUMvQiw2cUVBQW1EOzthQUVwRDs7OztZQVJPLHdCQUF3Qjs7O3NCQWE3QixLQUFLLFNBQUMsU0FBUztxQkFFZixLQUFLLFNBQUMsUUFBUTt3QkFTZCxTQUFTLFNBQUMsV0FBVyxFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFDOzBCQUV4RCxZQUFZLFNBQUMsS0FBSyxFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFDOzZCQUN0RCxZQUFZLFNBQUMsUUFBUSxFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFDOytCQUN6RCxZQUFZLFNBQUMsVUFBVSxFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFDOzs7Ozs7O0lBakI1RCxvREFBd0M7O0lBRXhDLDZDQUErQjs7SUFXL0IsK0NBQXFFOztJQUVyRSxpREFBcUU7O0lBQ3JFLG9EQUEyRTs7SUFDM0Usc0RBQStFOztJQWUvRSx3REFBd0I7O0lBQ3hCLGtEQUE0Qjs7SUFDNUIsMERBQTZCOztJQUM3QixrREFBcUI7O0lBQ3JCLGlEQUFvQjs7SUFFcEIsNENBQWtDOztJQUNsQywwQ0FBb0I7O0lBRXBCLDhDQUdFOzs7OztJQWZVLG9EQUFnRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QWZ0ZXJWaWV3SW5pdCwgQ29tcG9uZW50LCBDb250ZW50Q2hpbGQsIEVsZW1lbnRSZWYsIElucHV0LCBPbkluaXQsIFRlbXBsYXRlUmVmLCBWaWV3Q2hpbGR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtOZ3hTaW1wbGVDYWxlbmRhclNlcnZpY2V9IGZyb20gJy4vbmd4LXNpbXBsZS1jYWxlbmRhci5zZXJ2aWNlJztcbmltcG9ydCB7bW9udGhzLCBkYXlzLCBDYWxlbmRhckRheSwgQ2FsZW5kYXJFdmVudCwgVG9wQmFyLCBDYWxlbmRhck1vbnRocywgRGF5SX0gZnJvbSAnLi9kYXRhLW1vZGVscy9kYXRhLWNhbGVuZGFyJztcblxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZ3gtc2ltcGxlLWNhbGVuZGFyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL25neC1zaW1wbGUtY2FsZW5kYXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9uZ3gtc2ltcGxlLWNhbGVuZGFyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTmd4U2ltcGxlQ2FsZW5kYXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xuXG4gIHByaXZhdGUgZXZlbnRzSW50ZXJuYWw6IENhbGVuZGFyRXZlbnRbXTtcblxuICBASW5wdXQoJ29wdGlvbnMnKSBvcHRpb25zID0ge307XG5cbiAgQElucHV0KCdldmVudHMnKSBzZXQgZXZlbnRzKHZhbHVlOiBDYWxlbmRhckV2ZW50W10pIHtcbiAgICB0aGlzLmV2ZW50c0ludGVybmFsID0gdmFsdWU7XG4gICAgdGhpcy5pbml0aWFsaXplQ2FsZW5kYXIoKTtcbiAgfVxuXG4gIGdldCBldmVudHMoKTogQ2FsZW5kYXJFdmVudFtdIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudHNJbnRlcm5hbDtcbiAgfVxuXG4gIEBWaWV3Q2hpbGQoJ2RheUhvbGRlcicsIHtzdGF0aWM6IGZhbHNlLCByZWFkOiBFbGVtZW50UmVmfSkgZGF5SG9sZGVyO1xuXG4gIEBDb250ZW50Q2hpbGQoJ2RheScsIHtzdGF0aWM6IGZhbHNlLCByZWFkOiBUZW1wbGF0ZVJlZn0pIGRheVRlbXBsYXRlO1xuICBAQ29udGVudENoaWxkKCd0b3BCYXInLCB7c3RhdGljOiBmYWxzZSwgcmVhZDogVGVtcGxhdGVSZWZ9KSB0b3BCYXJUZW1wbGF0ZTtcbiAgQENvbnRlbnRDaGlsZCgnd2Vla0RheXMnLCB7c3RhdGljOiBmYWxzZSwgcmVhZDogVGVtcGxhdGVSZWZ9KSB3ZWVrRGF5c1RlbXBsYXRlO1xuXG4gIGdldCBhY3RpdmVNb250aCgpOiBUb3BCYXIge1xuICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG1vbnRocy5maW5kKChtb250aCkgPT4gbW9udGguaWQgPT09IHRoaXMuY3VycmVudE1vbnRoKTtcbiAgICByZXR1cm4ge1xuICAgICAgeWVhcjogdGhpcy5jdXJyZW50WWVhcixcbiAgICAgIG1vbnRoOiBjdXJyZW50TW9udGgsXG4gICAgICBzZXROZXh0TW9udGg6IHRoaXMuc2V0TmV4dE1vbnRoLFxuICAgICAgc2V0UHJldmlvdXNNb250aDogdGhpcy5zZXRQcmV2aW91c01vbnRoXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbmd4Q2FsZW5kYXJTcnY6IE5neFNpbXBsZUNhbGVuZGFyU2VydmljZSkge1xuICB9XG5cbiAgZGF5Q29ycmVjdGVkSGVpZ2h0ID0gJyc7XG4gIGNhbGVuZGFyRGF0YTogQ2FsZW5kYXJEYXlbXTtcbiAgY3VycmVudE1vbnRoWWVhclRleHQ6IHN0cmluZztcbiAgY3VycmVudE1vbnRoOiBudW1iZXI7XG4gIGN1cnJlbnRZZWFyOiBudW1iZXI7XG5cbiAgbW9udGhzOiBDYWxlbmRhck1vbnRoc1tdID0gbW9udGhzO1xuICBkYXlzOiBEYXlJW10gPSBkYXlzO1xuXG4gIHNldHRpbmdzID0ge1xuICAgIG91dGxpbmU6IHRydWUsXG4gICAgZXZlbkRheURpbWVuc2lvbnM6IGZhbHNlXG4gIH07XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHsuLi50aGlzLnNldHRpbmdzLCAuLi50aGlzLm9wdGlvbnN9O1xuICAgIHRoaXMuaW5pdGlhbGl6ZUNhbGVuZGFyKCk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmRheUNvcnJlY3RlZEhlaWdodCA9IGAke3RoaXMuZGF5SG9sZGVyLm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGh9cHhgLCAwKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUNhbGVuZGFyKCkge1xuICAgIHRoaXMuc2V0dXBBY3RpdmVEYXRlKCk7XG4gICAgdGhpcy5zZXR1cENhbGVuZGFyRGF0YSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cEFjdGl2ZURhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRNb250aCkge1xuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgIHRoaXMuY3VycmVudE1vbnRoID0gbm93LmdldE1vbnRoKCk7XG4gICAgICB0aGlzLmN1cnJlbnRZZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XG4gICAgICB0aGlzLmN1cnJlbnRNb250aFllYXJUZXh0ID0gdGhpcy5uZ3hDYWxlbmRhclNydi5nZXRNb250aFllYXJUZXh0KHRoaXMuY3VycmVudE1vbnRoLCB0aGlzLmN1cnJlbnRZZWFyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwQ2FsZW5kYXJEYXRhKCkge1xuICAgIHRoaXMuY2FsZW5kYXJEYXRhID0gdGhpcy5uZ3hDYWxlbmRhclNydi5zZXR1cENhbGVuZGFyKHRoaXMuY3VycmVudE1vbnRoLCB0aGlzLmN1cnJlbnRZZWFyLCB0aGlzLmV2ZW50cyk7XG4gIH1cblxuICBzZXRQcmV2aW91c01vbnRoKCkge1xuICAgIGlmICgodGhpcy5jdXJyZW50TW9udGggLSAxKSA9PT0gLTEpIHtcbiAgICAgIHRoaXMuY3VycmVudE1vbnRoID0gMTE7XG4gICAgICB0aGlzLmN1cnJlbnRZZWFyID0gdGhpcy5jdXJyZW50WWVhciAtIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VycmVudE1vbnRoID0gdGhpcy5jdXJyZW50TW9udGggLSAxO1xuICAgIH1cbiAgICB0aGlzLmNhbGVuZGFyRGF0YSA9IHRoaXMubmd4Q2FsZW5kYXJTcnYuc2V0dXBDYWxlbmRhcih0aGlzLmN1cnJlbnRNb250aCwgdGhpcy5jdXJyZW50WWVhciwgdGhpcy5ldmVudHMpO1xuICAgIHRoaXMuY3VycmVudE1vbnRoWWVhclRleHQgPSB0aGlzLm5neENhbGVuZGFyU3J2LmdldE1vbnRoWWVhclRleHQodGhpcy5jdXJyZW50TW9udGgsIHRoaXMuY3VycmVudFllYXIpO1xuICB9XG5cbiAgc2V0TmV4dE1vbnRoKCkge1xuICAgIGlmICgodGhpcy5jdXJyZW50TW9udGggKyAxKSA9PT0gMTIpIHtcbiAgICAgIHRoaXMuY3VycmVudE1vbnRoID0gMDtcbiAgICAgIHRoaXMuY3VycmVudFllYXIgPSB0aGlzLmN1cnJlbnRZZWFyICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50TW9udGggPSB0aGlzLmN1cnJlbnRNb250aCArIDE7XG4gICAgfVxuXG4gICAgdGhpcy5jYWxlbmRhckRhdGEgPSB0aGlzLm5neENhbGVuZGFyU3J2LnNldHVwQ2FsZW5kYXIodGhpcy5jdXJyZW50TW9udGgsIHRoaXMuY3VycmVudFllYXIsIHRoaXMuZXZlbnRzKTtcbiAgICB0aGlzLmN1cnJlbnRNb250aFllYXJUZXh0ID0gdGhpcy5uZ3hDYWxlbmRhclNydi5nZXRNb250aFllYXJUZXh0KHRoaXMuY3VycmVudE1vbnRoLCB0aGlzLmN1cnJlbnRZZWFyKTtcbiAgfVxufVxuIl19